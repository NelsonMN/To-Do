(()=>{"use strict";var t={138:(t,e,n)=>{n.d(e,{IK:()=>s,iQ:()=>o,m8:()=>d});const o=(t,e,n,o,s,d)=>({getTitle:()=>t,setTitle:e=>t=e,getDescription:()=>e,setDescription:t=>e=t,getDate:()=>n,setDate:t=>n=t,getPriority:()=>o,setPriority:t=>o=t,getStatus:()=>s,setStatus:t=>s=t,getId:()=>d,setId:t=>d=t}),s=(t,e)=>{let n=[];return{getTasks:()=>n,getProjectTitle:()=>t,getProjectId:()=>e,setProjectTitle:e=>t=e,setProjectId:t=>e=t,getTask:t=>n.find((e=>e.getId()===t)),addTask:t=>{n.push(t)},removeTask:t=>{n=n.filter((e=>e.getId()!==t))}}},d=()=>{let t=[];return{getProject:e=>t.find((t=>t.getProjectId()===e)),getProjects:()=>t,addProject:e=>{t.push(e)},removeProject:e=>{t=t.filter((t=>t.getProjectId()!==e))}}}},982:(t,e,n)=>{n.d(e,{B:()=>c,z:()=>a});const o=document.querySelectorAll("[data-modal-target]"),s=document.querySelectorAll("[data-close-button]"),d=document.getElementById("overlay");function c(t){null!=t&&(t.classList.add("active"),d.classList.add("active"))}function a(t){null!=t&&(t.classList.remove("active"),d.classList.remove("active"))}o.forEach((t=>{t.addEventListener("click",(()=>{c(document.querySelector(t.dataset.modalTarget))}))})),s.forEach((t=>{t.addEventListener("click",(()=>{a(t.closest(".form"))}))}))},803:(t,e,n)=>{var o=n(138),s=n(982);const d=(0,o.m8)(),c=(0,o.IK)("Default Project");d.addProject(c);const a=document.getElementById("due-date"),i=(new Date).toISOString().slice(0,10);a.value=i;const l=document.querySelector(".add-project"),r=document.getElementById("add-project"),u=document.querySelector(".set-new-project-btn"),m=document.querySelector(".cancel-new-project-btn"),g=document.getElementById("project-title-input");l.addEventListener("click",(()=>{r.classList.toggle("hidden"),l.classList.toggle("hidden")})),u.addEventListener("click",(()=>{const t=function(){const t=g.value,e=self.crypto.randomUUID();return(0,o.IK)(t,e)}();d.addProject(t),function(t){const e=document.querySelector(".projects"),n=document.createElement("div");n.id=t.getProjectId();const o=document.getElementById("add-project");n.classList.add("project","high-light");const s=document.createElement("div");s.classList.add("project-title-div","high-light");const d=document.createElement("span");d.classList.add("project-title","high-light"),d.textContent=t.getProjectTitle();const c=document.createElement("input");c.classList.add("edit-project-title","hidden"),d.type="text";const a=document.createElement("div");a.classList.add("edit-project-buttons");const i=document.createElement("span");i.classList.add("edit-project","material-icons-outlined"),i.textContent="edit";const l=document.createElement("span");l.classList.add("delete-project","material-icons-outlined"),l.textContent="delete";const r=document.createElement("span");r.classList.add("edit-project-btn","material-icons-outlined","hidden"),r.textContent="check";const u=document.createElement("span");u.classList.add("cancel-project-btn","material-icons-outlined","hidden"),u.textContent="cancel",n.append(s,a),s.append(d,c),a.append(i,l,r,u),e.insertBefore(n,o)}(t),r.classList.toggle("hidden"),l.classList.toggle("hidden"),g.value=""})),m.addEventListener("click",(()=>{r.classList.toggle("hidden"),l.classList.toggle("hidden"),g.value=""}));const p=document.querySelector(".projects"),y="\n    transform: scale(1.01);\n    transition: 0.2s;\n    box-shadow: 5px 5px 5px #bcbcbc;\n    ";let E;p.addEventListener("click",(t=>{if(document.querySelectorAll(".project").forEach((t=>{t.classList.contains("high-light")&&(t.removeAttribute("style"),t.classList.remove("selected"))})),t.target.matches("div")&&t.target.classList.contains("project")?(t.target.style.cssText=y,t.target.classList.add("selected")):t.target.matches("div")&&t.target.classList.contains("project-title-div")&&t.target.classList.contains("high-light")?(t.target.parentNode.style.cssText=y,t.target.parentNode.classList.add("selected")):t.target.matches("span")&&t.target.classList.contains("project-title")&&t.target.classList.contains("high-light")&&(t.target.parentNode.parentNode.style.cssText=y,t.target.parentNode.parentNode.classList.add("selected")),t.target.matches("span")&&t.target.textContent,t.target.matches("span")&&"delete"==t.target.textContent){const e=t.target.parentNode.parentNode,n=e.id;console.log(d.getProjects()),d.removeProject(n),e.remove(),console.log(d.getProjects())}})),document.querySelector(".tasks").addEventListener("click",(t=>{if(t.target.matches("span")&&"edit"==t.target.textContent){const e=document.querySelector("#edit-form");(0,s.B)(e);const n=t.target.parentNode.parentNode.id;E=n;const o=document.getElementById("edit-title"),d=document.getElementById("edit-description"),c=document.getElementById("edit-due-date"),a=document.getElementById("edit-priority"),i=document.getElementById("edit-status");o.value=taskToEdit.getTitle(),d.value=taskToEdit.getDescription(),c.value=taskToEdit.getDate(),a.value=taskToEdit.getPriority(),"Complete"==taskToEdit.getStatus()?i.checked=!0:i.checked=!1}else if(t.target.matches("span")&&"delete"==t.target.textContent){const e=t.target.parentNode.parentNode;c.removeTask(e.id),e.remove()}else if(t.target.matches("button")&&"Details"==t.target.textContent){const e=t.target.parentNode.parentNode.id,n=c.getTask(e);E=e;const o=document.getElementById("task-title-output"),d=document.getElementById("task-due-date-output"),a=document.getElementById("task-priority-output"),i=document.getElementById("task-status-output"),l=document.getElementById("task-details-output");o.textContent=n.getTitle(),d.textContent=n.getDate(),a.textContent=n.getPriority(),i.textContent=n.getStatus(),l.textContent=n.getDescription();const r=document.getElementById("task-details");(0,s.B)(r),document.querySelectorAll("[data-close-button]").forEach((t=>{t.addEventListener("click",(()=>{const e=t.closest("#task-details");(0,s.z)(e)}))}))}}));const v=document.querySelector(".add-task"),L=document.querySelector(".edit-task");v.addEventListener("click",(t=>{t.preventDefault();const e=function(t){const e=document.getElementById("title").value,n=document.getElementById("description").value,s=document.getElementById("due-date").value,d=document.getElementById("priority").value;let c;c=document.getElementById("status").checked?"Complete":"Incomplete";const a=self.crypto.randomUUID();return(0,o.iQ)(e,n,s,d,c,a)}();!function(t){const e=document.querySelector(".tasks"),n=document.createElement("div");n.classList.add("task"),n.id=t.getId();const o=document.createElement("div");o.classList.add("first-task-elements"),"Low"==t.getPriority()?n.style.borderLeft="5px solid green":"Medium"==t.getPriority()?n.style.borderLeft="5px solid orange":n.style.borderLeft="5px solid red","Complete"==t.getStatus()?n.style.opacity="0.5":"Incomplete"==t.getStatus()&&(n.style.opactiy="1");const s=document.createElement("div");s.classList.add("title"),s.textContent=t.getTitle();const d=document.createElement("div");d.classList.add("last-task-elements");const c=document.createElement("button");c.textContent="Details",c.classList.add("details");const a=document.createElement("div");a.classList.add("due-date"),a.textContent=t.getDate();const i=document.createElement("span");i.classList.add("edit","material-icons-outlined"),i.textContent="edit";const l=document.createElement("span");l.classList.add("delete","material-icons-outlined"),l.textContent="delete",o.append(s),d.append(c,a,i,l),n.append(o,d),e.append(n)}(e),c.addTask(e),document.querySelector(".form-card").reset();const n=document.getElementById("due-date"),s=(new Date).toISOString().slice(0,10);n.value=s})),L.addEventListener("click",(t=>{t.preventDefault(),function(t){const e=c.getTask(E),n=document.getElementById("edit-title").value,o=document.getElementById("edit-description").value,s=document.getElementById("edit-due-date").value,d=document.getElementById("edit-priority").value,a=document.getElementById("edit-status").checked;e.setTitle(n),e.setDescription(o),e.setDate(s),e.setPriority(d),a?e.setStatus("Complete"):e.setStatus("Incomplete")}(),function(t){const e=document.getElementById(t),n=c.getTask(t);e.childNodes[0].textContent=n.getTitle(),"Low"==n.getPriority()?e.style.borderLeft="5px solid green":"Medium"==n.getPriority()?e.style.borderLeft="5px solid orange":e.style.borderLeft="5px solid red","Complete"==n.getStatus()?e.style.opacity="0.5":"Incomplete"==n.getStatus()&&(e.style.opacity="1"),e.childNodes[1].childNodes[1].textContent=n.getDate()}(E)}))}},e={};function n(o){var s=e[o];if(void 0!==s)return s.exports;var d=e[o]={exports:{}};return t[o](d,d.exports,n),d.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(138),n(803),n(982)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixjQUNaZ0gsRUFBUXJCLE1BQU11QixXQUFhLG1CQUUzQkYsRUFBUXJCLE1BQU11QixXQUFhLGdCQUdQLFlBQXBCOUYsRUFBS2pCLFlBQ0w2RyxFQUFRckIsTUFBTXdCLFFBQVUsTUFDRyxjQUFwQi9GLEVBQUtqQixjQUNaNkcsRUFBUXJCLE1BQU13QixRQUFVLEtBR1JILEVBQVFZLFdBQVcsR0FBR0EsV0FBVyxHQUN6Q25ELFlBQWNyRCxFQUFLdkIsVUFrRy9CZ0ksQ0FBYXhDLFFDM1dieUMsRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsSUFPVixPQUhBRSxFQUFvQkwsR0FBVUksRUFBUUEsRUFBT0QsUUFBU0osR0FHL0NLLEVBQU9ELFFDcEJmSixFQUFvQk8sRUFBSSxDQUFDSCxFQUFTSSxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hSLEVBQW9CVSxFQUFFRixFQUFZQyxLQUFTVCxFQUFvQlUsRUFBRU4sRUFBU0ssSUFDNUVFLE9BQU9DLGVBQWVSLEVBQVNLLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRVQsRUFBb0JVLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NHbEZoQixFQUFvQixLQUNwQkEsRUFBb0IsS0FDTUEsRUFBb0IsTSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLy4vc3JjL21vZGFsLmpzIiwid2VicGFjazovL3RvLWRvLy4vc3JjL3VzZXItaW50ZXJmYWNlLmpzIiwid2VicGFjazovL3RvLWRvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvLWRvL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvLWRvL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBUYXNrID0gKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHN0YXR1cywgaWQpID0+IHtcblxuICAgIGNvbnN0IGdldFRpdGxlID0gKCkgPT4gdGl0bGU7XG4gICAgY29uc3Qgc2V0VGl0bGUgPSBuZXdUaXRsZSA9PiB0aXRsZSA9IG5ld1RpdGxlO1xuICAgIGNvbnN0IGdldERlc2NyaXB0aW9uID0gKCkgPT4gZGVzY3JpcHRpb247XG4gICAgY29uc3Qgc2V0RGVzY3JpcHRpb249IG5ld0Rlc2NyaXB0aW9uID0+IGRlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgY29uc3QgZ2V0RGF0ZSA9ICgpID0+IGR1ZURhdGU7XG4gICAgY29uc3Qgc2V0RGF0ZSA9IG5ld0RhdGUgPT4gZHVlRGF0ZSA9IG5ld0RhdGU7XG4gICAgY29uc3QgZ2V0UHJpb3JpdHkgPSAoKSA9PiBwcmlvcml0eTtcbiAgICBjb25zdCBzZXRQcmlvcml0eSA9IG5ld1ByaW9yaXR5ID0+IHByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XG4gICAgY29uc3QgZ2V0U3RhdHVzID0gKCkgPT4gc3RhdHVzO1xuICAgIGNvbnN0IHNldFN0YXR1cyA9IG5ld1N0YXR1cyA9PiBzdGF0dXMgPSBuZXdTdGF0dXM7XG4gICAgY29uc3QgZ2V0SWQgPSAoKSA9PiBpZDtcbiAgICBjb25zdCBzZXRJZCA9IG5ld0lkID0+IGlkID0gbmV3SWQ7XG5cbiAgICByZXR1cm4ge2dldFRpdGxlLCBzZXRUaXRsZSwgZ2V0RGVzY3JpcHRpb24sIHNldERlc2NyaXB0aW9uLCBnZXREYXRlLCBzZXREYXRlLCBnZXRQcmlvcml0eSwgc2V0UHJpb3JpdHksIGdldFN0YXR1cywgc2V0U3RhdHVzLCBnZXRJZCwgc2V0SWR9XG59O1xuXG5cbmNvbnN0IFByb2plY3QgPSAocHJvamVjdFRpdGxlLCBwcm9qZWN0SWQpID0+IHtcblxuICAgIGxldCBwcm9qZWN0ID0gW107XG5cbiAgICBjb25zdCBnZXRQcm9qZWN0VGl0bGUgPSAoKSA9PiBwcm9qZWN0VGl0bGU7XG4gICAgY29uc3Qgc2V0UHJvamVjdFRpdGxlID0gbmV3VGl0bGUgPT4gcHJvamVjdFRpdGxlID0gbmV3VGl0bGU7XG4gICAgY29uc3QgZ2V0UHJvamVjdElkID0gKCkgPT4gcHJvamVjdElkO1xuICAgIGNvbnN0IHNldFByb2plY3RJZCA9IG5ld0lkID0+IHByb2plY3RJZCA9IG5ld0lkO1xuXG4gICAgY29uc3QgZ2V0VGFzayA9IChpZCkgPT4ge1xuICAgICAgICByZXR1cm4gcHJvamVjdC5maW5kKCh0YXNrKSA9PiB0YXNrLmdldElkKCkgPT09IGlkKVxuICAgIH07XG5cbiAgICBjb25zdCBnZXRUYXNrcyA9ICgpID0+IHByb2plY3Q7XG5cbiAgICBjb25zdCBhZGRUYXNrID0gKHRhc2spID0+IHtcbiAgICAgICAgcHJvamVjdC5wdXNoKHRhc2spXG4gICAgfTtcblxuICAgIGNvbnN0IHJlbW92ZVRhc2sgPSAoaWQpID0+IHtcbiAgICAgICAgcHJvamVjdCA9IHByb2plY3QuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmdldElkKCkgIT09IGlkKVxuICAgIH07XG5cbiAgICByZXR1cm4ge2dldFRhc2tzLCBnZXRQcm9qZWN0VGl0bGUsIGdldFByb2plY3RJZCwgc2V0UHJvamVjdFRpdGxlLCBzZXRQcm9qZWN0SWQsIGdldFRhc2ssIGFkZFRhc2ssIHJlbW92ZVRhc2t9XG59O1xuXG5cbmNvbnN0IFRvRG8gPSAoKSA9PiB7XG4gICAgXG4gICAgbGV0IHRvRG8gPSBbXTtcbiAgICBcbiAgICBjb25zdCBnZXRQcm9qZWN0ID0gKHByb2plY3RJZCkgPT4ge1xuICAgICAgICByZXR1cm4gdG9Eby5maW5kKChwcm9qZWN0KSA9PiBwcm9qZWN0LmdldFByb2plY3RJZCgpID09PSBwcm9qZWN0SWQpXG4gICAgfTtcblxuICAgIGNvbnN0IGdldFByb2plY3RzID0gKCkgPT4gdG9EbztcblxuICAgIGNvbnN0IGFkZFByb2plY3QgPSAocHJvamVjdCkgPT4ge1xuICAgICAgICB0b0RvLnB1c2gocHJvamVjdClcbiAgICB9O1xuXG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdCA9IChwcm9qZWN0SWQpID0+IHtcbiAgICAgICAgdG9EbyA9IHRvRG8uZmlsdGVyKChwcm9qZWN0KSA9PiBwcm9qZWN0LmdldFByb2plY3RJZCgpICE9PSBwcm9qZWN0SWQpXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4ge2dldFByb2plY3QsIGdldFByb2plY3RzLCBhZGRQcm9qZWN0LCByZW1vdmVQcm9qZWN0fVxufTtcblxuZXhwb3J0IHtUYXNrLCBQcm9qZWN0LCBUb0RvfSIsImNvbnN0IG9wZW5Nb2RhbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtbW9kYWwtdGFyZ2V0XVwiKTtcbmNvbnN0IGNsb3NlTW9kYWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWNsb3NlLWJ1dHRvbl1cIik7XG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdmVybGF5XCIpO1xuXG5vcGVuTW9kYWxCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uLmRhdGFzZXQubW9kYWxUYXJnZXQpO1xuICAgICAgICBvcGVuRm9ybShmb3JtKTtcbiAgICB9KVxufSkgXG5cbmNsb3NlTW9kYWxCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGJ1dHRvbi5jbG9zZXN0KFwiLmZvcm1cIilcbiAgICAgICAgY2xvc2VGb3JtKGZvcm0pO1xuICAgIH0pXG59KVxuXG5mdW5jdGlvbiBvcGVuRm9ybShmb3JtKSB7XG4gICAgaWYgKGZvcm0gPT0gbnVsbCkgcmV0dXJuXG4gICAgZm9ybS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VGb3JtKGZvcm0pIHtcbiAgICBpZiAoZm9ybSA9PSBudWxsKSByZXR1cm5cbiAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xufVxuXG5leHBvcnQge29wZW5Gb3JtLCBjbG9zZUZvcm19IiwiaW1wb3J0IHtUYXNrLCBQcm9qZWN0LCBUb0RvfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0IHtvcGVuRm9ybSwgY2xvc2VGb3JtfSBmcm9tICcuL21vZGFsJ1xuXG5cbi8vIEluaXRpYWxpemUgVG8tRG8gTGlzdFxuXG5jb25zdCB0b0RvTGlzdCA9IFRvRG8oKVxuXG5cbi8vIEluaXRpYWxpemUgRGVmYXVsdCBQcm9qZWN0XG5jb25zdCBkZWZhdWx0UHJvamVjdCA9IFByb2plY3QoJ0RlZmF1bHQgUHJvamVjdCcpXG50b0RvTGlzdC5hZGRQcm9qZWN0KGRlZmF1bHRQcm9qZWN0KVxuXG5cbi8vIEluaXRpYWxpemUgRm9ybSBEZWZhdWx0c1xuY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlLWRhdGUnKVxuY29uc3QgdG9kYXlEYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbnRhc2tEYXRlLnZhbHVlID0gdG9kYXlEYXRlO1xuXG5cbi8vIFByb2plY3QgVUlcblxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdCgpIHtcbiAgIGNvbnN0IHByb2plY3RUaXRsZSA9IHByb2plY3RUaXRsZUlucHV0LnZhbHVlXG4gICBjb25zdCBwcm9qZWN0SWQgPSBzZWxmLmNyeXB0by5yYW5kb21VVUlEKCk7XG5cbiAgIGNvbnN0IG5ld1Byb2plY3QgPSBQcm9qZWN0KHByb2plY3RUaXRsZSwgcHJvamVjdElkKVxuICAgcmV0dXJuIG5ld1Byb2plY3Rcbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdFVJKHByb2plY3QpIHtcbiAgICBjb25zdCBwcm9qZWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIilcbiAgICBjb25zdCBwcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBwcm9qZWN0RGl2LmlkID0gcHJvamVjdC5nZXRQcm9qZWN0SWQoKVxuXG4gICAgY29uc3QgYWRkUHJvamVjdERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWRkLXByb2plY3RcIilcbiAgICBwcm9qZWN0RGl2LmNsYXNzTGlzdC5hZGQoJ3Byb2plY3QnLCAnaGlnaC1saWdodCcpXG5cbiAgICBjb25zdCBwcm9qZWN0VGl0bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHByb2plY3RUaXRsZURpdi5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC10aXRsZS1kaXZcIiwgXCJoaWdoLWxpZ2h0XCIpXG5cbiAgICBjb25zdCBwcm9qZWN0VGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICBwcm9qZWN0VGl0bGUuY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGl0bGVcIiwgXCJoaWdoLWxpZ2h0XCIpXG4gICAgcHJvamVjdFRpdGxlLnRleHRDb250ZW50ID0gcHJvamVjdC5nZXRQcm9qZWN0VGl0bGUoKVxuXG4gICAgY29uc3QgcHJvamVjdFRpdGxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpXG4gICAgcHJvamVjdFRpdGxlSW5wdXQuY2xhc3NMaXN0LmFkZChcImVkaXQtcHJvamVjdC10aXRsZVwiLCBcImhpZGRlblwiKVxuICAgIHByb2plY3RUaXRsZS50eXBlID0gXCJ0ZXh0XCJcblxuICAgIGNvbnN0IHByb2plY3RFZGl0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBwcm9qZWN0RWRpdERpdi5jbGFzc0xpc3QuYWRkKFwiZWRpdC1wcm9qZWN0LWJ1dHRvbnNcIilcblxuICAgIGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0LXByb2plY3RcIiwgXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKVxuICAgIGVkaXRCdG4udGV4dENvbnRlbnQgPSAnZWRpdCdcblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZGVsZXRlLXByb2plY3RcIiwgXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKVxuICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9ICdkZWxldGUnXG5cbiAgICBjb25zdCBjaGVja0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIGNoZWNrQnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0LXByb2plY3QtYnRuXCIsIFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIiwgXCJoaWRkZW5cIilcbiAgICBjaGVja0J0bi50ZXh0Q29udGVudCA9ICdjaGVjaydcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIGNhbmNlbEJ0bi5jbGFzc0xpc3QuYWRkKFwiY2FuY2VsLXByb2plY3QtYnRuXCIsIFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIiwgXCJoaWRkZW5cIilcbiAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSAnY2FuY2VsJ1xuXG4gICAgcHJvamVjdERpdi5hcHBlbmQocHJvamVjdFRpdGxlRGl2LCBwcm9qZWN0RWRpdERpdilcbiAgICBwcm9qZWN0VGl0bGVEaXYuYXBwZW5kKHByb2plY3RUaXRsZSwgcHJvamVjdFRpdGxlSW5wdXQpXG4gICAgcHJvamVjdEVkaXREaXYuYXBwZW5kKGVkaXRCdG4sIGRlbGV0ZUJ0biwgY2hlY2tCdG4sIGNhbmNlbEJ0bilcbiAgICBwcm9qZWN0c0NvbnRhaW5lci5pbnNlcnRCZWZvcmUocHJvamVjdERpdiwgYWRkUHJvamVjdERpdilcbn1cblxuXG4vLyBBZGQgUHJvamVjdCBFdmVudCBMaXN0ZW5lcnNcbmNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXByb2plY3QnKVxuY29uc3QgYWRkUHJvamVjdERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtcHJvamVjdCcpXG5jb25zdCBzZXRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZXQtbmV3LXByb2plY3QtYnRuXCIpXG5jb25zdCBjYW5jZWxQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWwtbmV3LXByb2plY3QtYnRuXCIpXG5jb25zdCBwcm9qZWN0VGl0bGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC10aXRsZS1pbnB1dFwiKVxuXG5hZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGFkZFByb2plY3REaXYuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICBhZGRQcm9qZWN0QnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG59KVxuXG5zZXRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBjcmVhdGVQcm9qZWN0KClcbiAgICB0b0RvTGlzdC5hZGRQcm9qZWN0KG5ld1Byb2plY3QpXG4gICAgY3JlYXRlUHJvamVjdFVJKG5ld1Byb2plY3QpXG4gICAgYWRkUHJvamVjdERpdi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxuICAgIGFkZFByb2plY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICBwcm9qZWN0VGl0bGVJbnB1dC52YWx1ZSA9ICcnXG59KVxuXG5jYW5jZWxQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGFkZFByb2plY3REaXYuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICBhZGRQcm9qZWN0QnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgcHJvamVjdFRpdGxlSW5wdXQudmFsdWUgPSAnJ1xufSlcblxuXG4vLyBEeW5hbWljIFByb2plY3QgRXZlbnQgTGlzdGVuZXJzXG5mdW5jdGlvbiByZW1vdmVQcm9qZWN0U3R5bGluZ3MoKSB7XG4gICAgY29uc3QgcHJvamVjdERpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdCcpXG4gICAgcHJvamVjdERpdnMuZm9yRWFjaChlID0+IHtcbiAgICAgICAgaWYgKGUuY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWdoLWxpZ2h0JykpIHtcbiAgICAgICAgICAgIGUucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpXG4gICAgICAgICAgICBlLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJylcbiAgICAgICAgfVxuICAgIH0pXG59XG5cbmNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJylcbmNvbnN0IHByb2plY3RTdHlsZSA9IGBcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDEpO1xuICAgIHRyYW5zaXRpb246IDAuMnM7XG4gICAgYm94LXNoYWRvdzogNXB4IDVweCA1cHggI2JjYmNiYztcbiAgICBgXG5cbnByb2plY3RzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAvLyBIb3ZlciAvIFNlbGVjdGlvbiBzdHlsaW5nXG4gICAgcmVtb3ZlUHJvamVjdFN0eWxpbmdzKClcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhcImRpdlwiKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Byb2plY3QnKSkge1xuICAgICAgICBlLnRhcmdldC5zdHlsZS5jc3NUZXh0ID0gcHJvamVjdFN0eWxlXG4gICAgICAgIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJylcbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJkaXZcIikgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm9qZWN0LXRpdGxlLWRpdicpICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGlnaC1saWdodCcpKSB7XG4gICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuc3R5bGUuY3NzVGV4dCA9IHByb2plY3RTdHlsZVxuICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJylcbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJzcGFuXCIpICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJvamVjdC10aXRsZScpICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGlnaC1saWdodCcpKSB7XG4gICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5zdHlsZS5jc3NUZXh0ID0gcHJvamVjdFN0eWxlXG4gICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpXG4gICAgfVxuXG4gICAgLy8gRWRpdCBQcm9qZWN0XG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJzcGFuXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09ICdlZGl0Jykge31cblxuICAgIC8vIERlbGV0ZSBQcm9qZWN0XG5cbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gJ2RlbGV0ZScpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZVxuICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSBwcm9qZWN0LmlkXG4gICAgICAgIGNvbnNvbGUubG9nKHRvRG9MaXN0LmdldFByb2plY3RzKCkpIFxuICAgICAgICB0b0RvTGlzdC5yZW1vdmVQcm9qZWN0KHByb2plY3RJZClcbiAgICAgICAgcHJvamVjdC5yZW1vdmUoKVxuICAgICAgICBjb25zb2xlLmxvZyh0b0RvTGlzdC5nZXRQcm9qZWN0cygpKSBcbiAgICB9XG5cblxufSlcblxuICAgICBcblxuLy8gVGFzayBVSVxuXG5mdW5jdGlvbiBjcmVhdGVUYXNrKHByb2plY3QpIHtcbiAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpLnZhbHVlXG4gICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlLWRhdGUnKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmlvcml0eScpLnZhbHVlXG4gICAgY29uc3QgdGFza0NoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpLmNoZWNrZWRcbiAgICBsZXQgdGFza1N0YXR1c1xuICAgIGlmICh0YXNrQ2hlY2tib3gpIHtcbiAgICAgICAgdGFza1N0YXR1cyA9ICdDb21wbGV0ZSdcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXNrU3RhdHVzID0gJ0luY29tcGxldGUnXG4gICAgfVxuICAgIGNvbnN0IHRhc2tJZCA9IHNlbGYuY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdUYXNrID0gVGFzayh0YXNrVGl0bGUsIHRhc2tEZXNjcmlwdGlvbiwgdGFza0RhdGUsIHRhc2tQcmlvcml0eSwgdGFza1N0YXR1cywgdGFza0lkKVxuICAgIHJldHVybiBuZXdUYXNrXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRhc2socHJvamVjdCkge1xuICAgIGNvbnN0IHRhc2tUb0VkaXQgPSBkZWZhdWx0UHJvamVjdC5nZXRUYXNrKHRhc2tJZClcbiAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC10aXRsZScpLnZhbHVlXG4gICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtZGVzY3JpcHRpb24nKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtZHVlLWRhdGUnKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXByaW9yaXR5JykudmFsdWVcbiAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1zdGF0dXMnKS5jaGVja2VkXG5cbiAgICB0YXNrVG9FZGl0LnNldFRpdGxlKHRhc2tUaXRsZSlcbiAgICB0YXNrVG9FZGl0LnNldERlc2NyaXB0aW9uKHRhc2tEZXNjcmlwdGlvbilcbiAgICB0YXNrVG9FZGl0LnNldERhdGUodGFza0RhdGUpXG4gICAgdGFza1RvRWRpdC5zZXRQcmlvcml0eSh0YXNrUHJpb3JpdHkpXG4gICAgaWYgKHRhc2tDaGVja2JveCkge1xuICAgICAgICB0YXNrVG9FZGl0LnNldFN0YXR1cygnQ29tcGxldGUnKVxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tUb0VkaXQuc2V0U3RhdHVzKCdJbmNvbXBsZXRlJylcbiAgICB9IFxufVxuXG5mdW5jdGlvbiBjcmVhdGVUYXNrVUkodGFzaykge1xuICAgIGNvbnN0IHRhc2tzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKVxuICAgIGNvbnN0IHRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0YXNrRGl2LmNsYXNzTGlzdC5hZGQoXCJ0YXNrXCIpXG4gICAgdGFza0Rpdi5pZCA9IHRhc2suZ2V0SWQoKVxuXG4gICAgY29uc3QgZmlyc3RUYXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZmlyc3RUYXNrRGl2LmNsYXNzTGlzdC5hZGQoXCJmaXJzdC10YXNrLWVsZW1lbnRzXCIpXG5cbiAgICBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdMb3cnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgZ3JlZW4nO1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdNZWRpdW0nKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgb3JhbmdlJ1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgcmVkJ1xuICAgIH1cblxuICAgIGlmICh0YXNrLmdldFN0YXR1cygpID09ICdDb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjaXR5ID0gJzAuNSdcbiAgICB9IGVsc2UgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0luY29tcGxldGUnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUub3BhY3RpeSA9ICcxJ1xuICAgIH1cblxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGl0bGUuY2xhc3NMaXN0LmFkZChcInRpdGxlXCIpXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLmdldFRpdGxlKClcblxuICAgIGNvbnN0IGxhc3RUYXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGFzdFRhc2tEaXYuY2xhc3NMaXN0LmFkZChcImxhc3QtdGFzay1lbGVtZW50c1wiKTtcblxuICAgIGNvbnN0IGRldGFpbHNCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGRldGFpbHNCdG4udGV4dENvbnRlbnQgPSAnRGV0YWlscydcbiAgICBkZXRhaWxzQnRuLmNsYXNzTGlzdC5hZGQoJ2RldGFpbHMnKVxuXG4gICAgY29uc3QgZGF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRhdGVEaXYuY2xhc3NMaXN0LmFkZCgnZHVlLWRhdGUnKTtcbiAgICBkYXRlRGl2LnRleHRDb250ZW50ID0gdGFzay5nZXREYXRlKClcblxuICAgIGNvbnN0IGVkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgZWRpdC5jbGFzc0xpc3QuYWRkKFwiZWRpdFwiLCBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpO1xuICAgIGVkaXQudGV4dENvbnRlbnQgPSAnZWRpdCc7XG5cbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWxldGVcIiwgXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSAnZGVsZXRlJztcblxuICAgIGZpcnN0VGFza0Rpdi5hcHBlbmQodGl0bGUpXG4gICAgbGFzdFRhc2tEaXYuYXBwZW5kKGRldGFpbHNCdG4sIGRhdGVEaXYsIGVkaXQsIGRlbGV0ZUJ0bilcbiAgICB0YXNrRGl2LmFwcGVuZChmaXJzdFRhc2tEaXYsIGxhc3RUYXNrRGl2KVxuICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZCh0YXNrRGl2KVxufTtcblxuZnVuY3Rpb24gdXBkYXRlVGFza1VJKGlkKSB7XG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxuICAgIGNvbnN0IHRhc2sgPSBkZWZhdWx0UHJvamVjdC5nZXRUYXNrKGlkKVxuXG4gICAgY29uc3QgdGFza1RpdGxlID0gdGFza0Rpdi5jaGlsZE5vZGVzWzBdXG4gICAgdGFza1RpdGxlLnRleHRDb250ZW50ID0gdGFzay5nZXRUaXRsZSgpXG5cbiAgICBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdMb3cnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgZ3JlZW4nO1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdNZWRpdW0nKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgb3JhbmdlJztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIHJlZCc7XG4gICAgfVxuXG4gICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0NvbXBsZXRlJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLm9wYWNpdHkgPSAnMC41JztcbiAgICB9IGVsc2UgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0luY29tcGxldGUnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdGFza0R1ZURhdGUgPSB0YXNrRGl2LmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1sxXVxuICAgIHRhc2tEdWVEYXRlLnRleHRDb250ZW50ID0gdGFzay5nZXREYXRlKClcbn1cblxuXG4vLyBEeW5hbWljIFRhc2sgRXZlbnQgTGlzdGVuZXJzXG5cbmxldCB0YXNrSWQgLy8gdGhlIHZhcmlhYmxlIHRvIGFjY2VzcyBhIHNwZWNpZmljIHRhc2sgaWQgZm9yIGVkaXRpbmdcblxuY29uc3QgdGFza3NEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpXG50YXNrc0Rpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7ICAgXG5cbiAgICAvLyBFZGl0XG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJzcGFuXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09IFwiZWRpdFwiKSB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtZm9ybVwiKTtcbiAgICAgICAgb3BlbkZvcm0oZm9ybSlcblxuICAgICAgICBjb25zdCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZFxuXG4gICAgICAgIHRhc2tJZCA9IGlkXG4gICAgICAgIFxuICAgICAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC10aXRsZScpXG4gICAgICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWRlc2NyaXB0aW9uJylcbiAgICAgICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1kdWUtZGF0ZScpXG4gICAgICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXByaW9yaXR5JylcbiAgICAgICAgY29uc3QgdGFza0NoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtc3RhdHVzJylcblxuICAgICAgICB0YXNrVGl0bGUudmFsdWUgPSB0YXNrVG9FZGl0LmdldFRpdGxlKCk7XG4gICAgICAgIHRhc2tEZXNjcmlwdGlvbi52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0RGVzY3JpcHRpb24oKTtcbiAgICAgICAgdGFza0RhdGUudmFsdWUgPSB0YXNrVG9FZGl0LmdldERhdGUoKTtcbiAgICAgICAgdGFza1ByaW9yaXR5LnZhbHVlID0gdGFza1RvRWRpdC5nZXRQcmlvcml0eSgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRhc2tUb0VkaXQuZ2V0U3RhdHVzKCkgPT0gJ0NvbXBsZXRlJykge1xuICAgICAgICAgICAgdGFza0NoZWNrYm94LmNoZWNrZWQgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXNrQ2hlY2tib3guY2hlY2tlZCA9IGZhbHNlXG4gICAgICAgIH0gICAgICAgIFxuXG4gICAgLy8gRGVsZXRlICBcbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJzcGFuXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09IFwiZGVsZXRlXCIpIHtcbiAgICAgICAgY29uc3QgdGFzayA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZVxuICAgICAgICBkZWZhdWx0UHJvamVjdC5yZW1vdmVUYXNrKHRhc2suaWQpXG4gICAgICAgIHRhc2sucmVtb3ZlKClcbiAgICBcblxuICAgIC8vIERldGFpbHMgQnV0dG9uXG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5tYXRjaGVzKFwiYnV0dG9uXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09ICdEZXRhaWxzJykge1xuICAgICAgICBjb25zdCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZFxuICAgICAgICBjb25zdCB0YXNrID0gZGVmYXVsdFByb2plY3QuZ2V0VGFzayhpZClcblxuICAgICAgICB0YXNrSWQgPSBpZFxuICAgICAgICBcbiAgICAgICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stdGl0bGUtb3V0cHV0XCIpXG4gICAgICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZHVlLWRhdGUtb3V0cHV0XCIpXG4gICAgICAgIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLXByaW9yaXR5LW91dHB1dFwiKVxuICAgICAgICBjb25zdCBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stc3RhdHVzLW91dHB1dFwiKVxuICAgICAgICBjb25zdCBkZXRhaWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLWRldGFpbHMtb3V0cHV0XCIpXG5cblxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRhc2suZ2V0VGl0bGUoKVxuICAgICAgICBkYXRlLnRleHRDb250ZW50ID0gdGFzay5nZXREYXRlKClcbiAgICAgICAgcHJpb3JpdHkudGV4dENvbnRlbnQgPSB0YXNrLmdldFByaW9yaXR5KClcbiAgICAgICAgc3RhdHVzLnRleHRDb250ZW50ID0gdGFzay5nZXRTdGF0dXMoKVxuICAgICAgICBkZXRhaWxzLnRleHRDb250ZW50ID0gdGFzay5nZXREZXNjcmlwdGlvbigpXG5cbiAgICAgICAgY29uc3QgZGV0YWlsc01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLWRldGFpbHNcIik7XG4gICAgICAgIG9wZW5Gb3JtKGRldGFpbHNNb2RhbClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNsb3NlTW9kYWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWNsb3NlLWJ1dHRvbl1cIilcbiAgICAgICAgY2xvc2VNb2RhbEJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZm9ybSA9IGJ1dHRvbi5jbG9zZXN0KFwiI3Rhc2stZGV0YWlsc1wiKVxuICAgICAgICAgICAgICAgIGNsb3NlRm9ybShmb3JtKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG59KTtcblxuLy8gVGFzayBCdXR0b24gRnVuY3Rpb25hbGl0eVxuXG5jb25zdCBhZGRUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC10YXNrJyk7XG5jb25zdCBlZGl0VGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lZGl0LXRhc2snKTtcblxuYWRkVGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbmV3VGFzayA9IGNyZWF0ZVRhc2soKVxuICAgIGNyZWF0ZVRhc2tVSShuZXdUYXNrKVxuICAgIGRlZmF1bHRQcm9qZWN0LmFkZFRhc2sobmV3VGFzaylcbiAgICBjb25zdCBmb3JtQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1jYXJkXCIpO1xuICAgIGZvcm1DYXJkLnJlc2V0KCk7XG4gICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlLWRhdGUnKVxuICAgIGNvbnN0IHRvZGF5RGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG4gICAgdGFza0RhdGUudmFsdWUgPSB0b2RheURhdGU7XG59KVxuXG5lZGl0VGFza0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdXBkYXRlVGFzaygpXG4gICAgdXBkYXRlVGFza1VJKHRhc2tJZClcbn0pIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDgwMyk7XG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgyKTtcbiJdLCJuYW1lcyI6WyJUYXNrIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsInN0YXR1cyIsImlkIiwiZ2V0VGl0bGUiLCJzZXRUaXRsZSIsIm5ld1RpdGxlIiwiZ2V0RGVzY3JpcHRpb24iLCJzZXREZXNjcmlwdGlvbiIsIm5ld0Rlc2NyaXB0aW9uIiwiZ2V0RGF0ZSIsInNldERhdGUiLCJuZXdEYXRlIiwiZ2V0UHJpb3JpdHkiLCJzZXRQcmlvcml0eSIsIm5ld1ByaW9yaXR5IiwiZ2V0U3RhdHVzIiwic2V0U3RhdHVzIiwibmV3U3RhdHVzIiwiZ2V0SWQiLCJzZXRJZCIsIm5ld0lkIiwiUHJvamVjdCIsInByb2plY3RUaXRsZSIsInByb2plY3RJZCIsInByb2plY3QiLCJnZXRUYXNrcyIsImdldFByb2plY3RUaXRsZSIsImdldFByb2plY3RJZCIsInNldFByb2plY3RUaXRsZSIsInNldFByb2plY3RJZCIsImdldFRhc2siLCJmaW5kIiwidGFzayIsImFkZFRhc2siLCJwdXNoIiwicmVtb3ZlVGFzayIsImZpbHRlciIsIlRvRG8iLCJ0b0RvIiwiZ2V0UHJvamVjdCIsImdldFByb2plY3RzIiwiYWRkUHJvamVjdCIsInJlbW92ZVByb2plY3QiLCJvcGVuTW9kYWxCdXR0b25zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xvc2VNb2RhbEJ1dHRvbnMiLCJvdmVybGF5IiwiZ2V0RWxlbWVudEJ5SWQiLCJvcGVuRm9ybSIsImZvcm0iLCJjbGFzc0xpc3QiLCJhZGQiLCJjbG9zZUZvcm0iLCJyZW1vdmUiLCJmb3JFYWNoIiwiYnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhc2V0IiwibW9kYWxUYXJnZXQiLCJjbG9zZXN0IiwidG9Eb0xpc3QiLCJkZWZhdWx0UHJvamVjdCIsInRhc2tEYXRlIiwidG9kYXlEYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJ2YWx1ZSIsImFkZFByb2plY3RCdG4iLCJhZGRQcm9qZWN0RGl2Iiwic2V0UHJvamVjdEJ0biIsImNhbmNlbFByb2plY3RCdG4iLCJwcm9qZWN0VGl0bGVJbnB1dCIsInRvZ2dsZSIsIm5ld1Byb2plY3QiLCJzZWxmIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImNyZWF0ZVByb2plY3QiLCJwcm9qZWN0c0NvbnRhaW5lciIsInByb2plY3REaXYiLCJjcmVhdGVFbGVtZW50IiwicHJvamVjdFRpdGxlRGl2IiwidGV4dENvbnRlbnQiLCJ0eXBlIiwicHJvamVjdEVkaXREaXYiLCJlZGl0QnRuIiwiZGVsZXRlQnRuIiwiY2hlY2tCdG4iLCJjYW5jZWxCdG4iLCJhcHBlbmQiLCJpbnNlcnRCZWZvcmUiLCJjcmVhdGVQcm9qZWN0VUkiLCJwcm9qZWN0cyIsInByb2plY3RTdHlsZSIsInRhc2tJZCIsImUiLCJjb250YWlucyIsInJlbW92ZUF0dHJpYnV0ZSIsInRhcmdldCIsIm1hdGNoZXMiLCJzdHlsZSIsImNzc1RleHQiLCJwYXJlbnROb2RlIiwiY29uc29sZSIsImxvZyIsInRhc2tUaXRsZSIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tQcmlvcml0eSIsInRhc2tDaGVja2JveCIsInRhc2tUb0VkaXQiLCJjaGVja2VkIiwiZGF0ZSIsImRldGFpbHMiLCJkZXRhaWxzTW9kYWwiLCJhZGRUYXNrQnV0dG9uIiwiZWRpdFRhc2tCdXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsIm5ld1Rhc2siLCJ0YXNrU3RhdHVzIiwiY3JlYXRlVGFzayIsInRhc2tzQ29udGFpbmVyIiwidGFza0RpdiIsImZpcnN0VGFza0RpdiIsImJvcmRlckxlZnQiLCJvcGFjaXR5Iiwib3BhY3RpeSIsImxhc3RUYXNrRGl2IiwiZGV0YWlsc0J0biIsImRhdGVEaXYiLCJlZGl0IiwiY3JlYXRlVGFza1VJIiwicmVzZXQiLCJ1cGRhdGVUYXNrIiwiY2hpbGROb2RlcyIsInVwZGF0ZVRhc2tVSSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=