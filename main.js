(()=>{"use strict";var e={138:(e,t,d)=>{d.d(t,{IK:()=>a,TG:()=>o,iQ:()=>n});const n=(e="",t="",d="Low",n="No Due Date",a)=>({getTitle:()=>e,setTitle:t=>e=t,getDetails:()=>t,setDetails:e=>t=e,getPriority:()=>d,setPriority:e=>d=e,getDueDate:()=>n,setDueDate:e=>n=e,getStatus:()=>a,setStatus:e=>a=e}),a=e=>{let t=[];return{getTitle:()=>e,setTitle:t=>e=t,getTasks:()=>t,setTasks:e=>t=e,getTask:e=>t.find((t=>e===t.getTitle())),containsTask:e=>t.some((t=>e===t.getTitle())),addTask:e=>t.push(e),removeTask:e=>{t=t.filter((t=>e!==t.getTitle()))}}},o=()=>{let e=[];return{getProjects:()=>e,getProject:t=>e.find((e=>t===e.getTitle())),containsProject:t=>e.some((e=>t===e.getTitle())),addProject:t=>e.push(t),removeProject:t=>{e=e.filter((e=>t!==e.getTitle()))}}}},803:(e,t,d)=>{var n=d(138);const a=(0,n.TG)(),o=(0,n.IK)("Home"),l=(0,n.IK)("Today"),i=(0,n.IK)("This Week");a.addProject(o),a.addProject(l),a.addProject(i),document.getElementById("due-date").value=r();const s={};function r(){let e=new Date,t=String(e.getDate()).padStart(2,"0"),d=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+d+"-"+t}function c(e){const t=e.target.parentNode.parentNode.parentNode.children[0].children[1].textContent;o.removeTask(t),e.target.parentNode.parentNode.parentNode.remove()}function u(e){const t=e.target.parentNode.parentNode.parentNode.children[0].children[1].textContent,d=o.getTask(t),n=d.getDueDate(),a=d.getPriority(),l=d.getDetails(),i=d.getStatus(),s=document.getElementById("edit-title"),r=document.getElementById("edit-due-date"),c=document.getElementById("edit-priority"),u=document.getElementById("edit-details"),m=document.getElementById("edit-status");s.value=t,r.value=n,c.value=a,u.value=l,m.checked="Not Complete"!=i}document.getElementById("submit-task").addEventListener("click",(e=>{if(e.stopImmediatePropagation(),e.target.closest("form").checkValidity()){e.preventDefault(),function(e){const t=document.querySelector(".tasks"),d=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),l=document.createElement("div"),i=document.createElement("div"),r=document.createElement("button"),m=document.createElement("div"),g=document.createElement("div"),y=document.createElement("span"),p=document.createElement("div"),v=document.createElement("span");d.classList.add("task"),n.classList.add("first-task-elements"),a.classList.add("task-checkbox"),l.classList.add("task-title"),i.classList.add("last-task-elements"),m.classList.add("task-due-date"),g.classList.add("task-edit"),y.classList.add("material-icons-outlined","edit-symbol"),y.dataset.modalTarget="#edit-modal",p.classList.add("task-delete"),v.classList.add("material-icons-outlined","delete-symbol"),"Complete"==e.getStatus()?a.style.background="green":a.style.background="white","low"==e.getPriority()?d.style.borderLeft="5px solid green":"medium"==e.getPriority()?d.style.borderLeft="5px solid orange":"high"==e.getPriority()&&(d.style.borderLeft="5px solid red"),l.textContent=e.getTitle(),m.textContent=e.getDueDate(),r.textContent="Details",y.textContent="edit",v.textContent="delete",v.addEventListener("click",c),y.addEventListener("click",E),y.addEventListener("click",u),o.addTask(e),d.append(n,i),n.append(a,l),i.append(r,m,g,p),g.append(y),p.append(v),t.append(d),s[e]=d}(function(){const e=document.getElementById("title").value,t=document.getElementById("due-date").value,d=document.getElementById("priority").value,a=document.getElementById("details").value;let o;return o=document.getElementById("status").checked?"Complete":"Not Complete",(0,n.iQ)(e,a,d,t,o)}());const t=document.getElementById("new-task"),d=document.getElementById("due-date");t.reset(),d.value=r()}})),document.getElementById("edit-task-submit").addEventListener("click",(e=>{if(e.target.closest("form").checkValidity()){e.preventDefault(),e.stopPropagation();const t=function(){const e=document.getElementById("edit-title").value,t=document.getElementById("edit-due-date").value,d=document.getElementById("edit-priority").value,a=document.getElementById("edit-details").value;let o;return o=document.getElementById("status").checked?"Complete":"Not Complete",(0,n.iQ)(e,a,d,t,o)}();!function(e){const t=document.getElementById("edit-title").value,d=document.getElementById("edit-due-date").value,n=document.getElementById("edit-priority").value,a=document.getElementById("edit-details").value,o=document.getElementById("edit-status").checked;e.setTitle(t),e.setDueDate(d),e.setPriority(n),e.setDetails(a),o?e.setStatus("Complete"):e.setStatus("Not Complete")}(t),function(e){const t=s[e];t.children[0].children[1].textContent=e.getTitle(),t.children[1].children[1].textContent=e.getDueDate(),"low"==e.getPriority()?t.style.borderLeft="5px solid green":"medium"==e.getPriority()?t.style.borderLeft="5px solid orange":"high"==e.getPriority()&&(t.style.borderLeft="5px solid red");const d=t.children[0].children[0];"Complete"==e.getStatus()?d.style.background="green":"Not Complete"==e.getStatus()&&(d.style.background="white")}(t),document.getElementById("new-task").reset()}}));const m=document.querySelectorAll("[data-modal-target]"),g=document.querySelectorAll("[data-close-button]"),y=document.getElementById("overlay");function p(e){k(document.querySelector(e.target.dataset.modalTarget))}function v(e){var t;null!=(t=e.target.closest(".modal"))&&(t.classList.remove("active"),y.classList.remove("active"))}function E(e){k(document.querySelector(e.target.dataset.modalTarget))}function k(e){null!=e&&(e.classList.add("active"),y.classList.add("active"))}m.forEach((e=>{e.addEventListener("click",p)})),g.forEach((e=>{e.addEventListener("click",v)}))}},t={};function d(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,d),o.exports}d.d=(e,t)=>{for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d(138),d(803)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiNEVBS0EsTUFBTUEsRUFBTyxDQUFDQyxFQUFRLEdBQUlDLEVBQVUsR0FBSUMsRUFBVyxNQUFPQyxFQUFVLGNBQWVDLEtBZ0J4RSxDQUNIQyxTQWhCYSxJQUFNTCxFQWdCVE0sU0FmR0MsR0FBWVAsRUFBUU8sRUFnQmpDQyxXQWRlLElBQU1QLEVBY1RRLFdBYkdDLEdBQWNULEVBQVVTLEVBY3ZDQyxZQVpnQixJQUFNVCxFQVlUVSxZQVhHQyxHQUFlWCxFQUFXVyxFQVkxQ0MsV0FWZSxJQUFNWCxFQVVUWSxXQVRHQyxHQUFjYixFQUFVYSxFQVV2Q0MsVUFSYyxJQUFNYixFQVFUYyxVQVBHQyxHQUFjZixFQUFTZSxJQWF2Q0MsRUFBV3BCLElBSWIsSUFBSXFCLEVBQVEsR0FvQlosTUFBTyxDQUNIaEIsU0F4QmEsSUFBTUwsRUF3QlRNLFNBdkJJQyxHQUFhUCxFQUFRTyxFQXdCbkNlLFNBcEJhLElBQU1ELEVBb0JURSxTQWxCSUMsR0FBYUgsRUFBUUcsRUFtQm5DQyxRQWpCWUMsR0FDTEwsRUFBTU0sTUFBTUMsR0FBU0YsSUFBY0UsRUFBS3ZCLGFBaUIvQ3dCLGFBZGlCSCxHQUNWTCxFQUFNUyxNQUFNRixHQUFTRixJQUFjRSxFQUFLdkIsYUFjL0MwQixRQVhZSCxHQUFRUCxFQUFNVyxLQUFLSixHQVd0QkssV0FUTVAsSUFDZkwsRUFBUUEsRUFBTWEsUUFBUU4sR0FBU0YsSUFBY0UsRUFBS3ZCLGdCQWNwRDhCLEVBQVcsS0FFYixJQUFJQyxFQUFXLEdBd0JmLE1BQU8sQ0FDSEMsWUF2QmdCLElBQU1ELEVBd0J0QkUsV0F0QmdCQyxHQUNUSCxFQUFTVCxNQUFNYSxHQUFZRCxJQUFpQkMsRUFBUW5DLGFBc0IzRG9DLGdCQW5CcUJGLEdBQ2RILEVBQVNOLE1BQU1VLEdBQVlELElBQWlCQyxFQUFRbkMsYUFtQjNEcUMsV0FoQmdCRixHQUFZSixFQUFTSixLQUFLUSxHQWdCOUJHLGNBZE9KLElBQ25CSCxFQUFXQSxFQUFTRixRQUFRTSxHQUFZRCxJQUFpQkMsRUFBUW5DLGlCLDJCQ2hGekUsTUFBTXVDLEdBQU8sVUFFUEMsR0FBTyxRQUFRLFFBQ2ZDLEdBQVEsUUFBUSxTQUNoQkMsR0FBVyxRQUFRLGFBRXpCSCxFQUFLRixXQUFXRyxHQUNoQkQsRUFBS0YsV0FBV0ksR0FDaEJGLEVBQUtGLFdBQVdLLEdBRUhDLFNBQVNDLGVBQWUsWUFDaENDLE1BQVFDLElBSWIsTUFBTUMsRUFBWSxHQUdsQixTQUFTRCxJQUNMLElBQUlMLEVBQVEsSUFBSU8sS0FDWkMsRUFBS0MsT0FBT1QsRUFBTVUsV0FBV0MsU0FBUyxFQUFHLEtBQ3pDQyxFQUFLSCxPQUFPVCxFQUFNYSxXQUFhLEdBQUdGLFNBQVMsRUFBRyxLQUVsRCxPQURXWCxFQUFNYyxjQUNILElBQU1GLEVBQUssSUFBTUosRUE4Sm5DLFNBQVNPLEVBQVdDLEdBQ2hCLE1BQU05RCxFQUFROEQsRUFBRUMsT0FBT0MsV0FBV0EsV0FBV0EsV0FBV0MsU0FBUyxHQUFHQSxTQUFTLEdBQUdDLFlBQ2hGckIsRUFBS1osV0FBV2pDLEdBQ0g4RCxFQUFFQyxPQUFPQyxXQUFXQSxXQUFXQSxXQUN2Q0csU0FHVCxTQUFTQyxFQUFTTixHQUNkLE1BQU05RCxFQUFROEQsRUFBRUMsT0FBT0MsV0FBV0EsV0FBV0EsV0FBV0MsU0FBUyxHQUFHQSxTQUFTLEdBQUdDLFlBQzFFdEMsRUFBT2lCLEVBQUtwQixRQUFRekIsR0FDcEJHLEVBQVV5QixFQUFLZCxhQUNmWixFQUFXMEIsRUFBS2pCLGNBQ2hCVixFQUFVMkIsRUFBS3BCLGFBQ2ZKLEVBQVN3QixFQUFLWCxZQUVkb0QsRUFBWXJCLFNBQVNDLGVBQWUsY0FDcENxQixFQUFjdEIsU0FBU0MsZUFBZSxpQkFDdENzQixFQUFldkIsU0FBU0MsZUFBZSxpQkFDdkN1QixFQUFjeEIsU0FBU0MsZUFBZSxnQkFDdEN3QixFQUFhekIsU0FBU0MsZUFBZSxlQUUzQ29CLEVBQVVuQixNQUFRbEQsRUFDbEJzRSxFQUFZcEIsTUFBUS9DLEVBQ3BCb0UsRUFBYXJCLE1BQVFoRCxFQUNyQnNFLEVBQVl0QixNQUFRakQsRUFHaEJ3RSxFQUFXQyxRQURELGdCQUFWdEUsRUFRYTRDLFNBQVNDLGVBQWUsZUFFaEMwQixpQkFBaUIsU0FBVWIsSUFFcEMsR0FEQUEsRUFBRWMsMkJBQ0VkLEVBQUVDLE9BQU9jLFFBQVEsUUFBUUMsZ0JBQWlCLENBQzFDaEIsRUFBRWlCLGlCQTFJVixTQUFzQm5ELEdBRWxCLE1BQU1vRCxFQUFhaEMsU0FBU2lDLGNBQWMsVUFDcENDLEVBQVVsQyxTQUFTbUMsY0FBYyxPQUNqQ0MsRUFBb0JwQyxTQUFTbUMsY0FBYyxPQUMzQ0UsRUFBZXJDLFNBQVNtQyxjQUFjLE9BQ3RDekQsRUFBWXNCLFNBQVNtQyxjQUFjLE9BQ25DRyxFQUFtQnRDLFNBQVNtQyxjQUFjLE9BQzFDSSxFQUFhdkMsU0FBU21DLGNBQWMsVUFDcENLLEVBQWN4QyxTQUFTbUMsY0FBYyxPQUNyQ00sRUFBV3pDLFNBQVNtQyxjQUFjLE9BQ2xDTyxFQUFhMUMsU0FBU21DLGNBQWMsUUFDcENRLEVBQWEzQyxTQUFTbUMsY0FBYyxPQUNwQ1MsRUFBZTVDLFNBQVNtQyxjQUFjLFFBRzVDRCxFQUFRVyxVQUFVQyxJQUFJLFFBQ3RCVixFQUFrQlMsVUFBVUMsSUFBSSx1QkFDaENULEVBQWFRLFVBQVVDLElBQUksaUJBQzNCcEUsRUFBVW1FLFVBQVVDLElBQUksY0FDeEJSLEVBQWlCTyxVQUFVQyxJQUFJLHNCQUMvQk4sRUFBWUssVUFBVUMsSUFBSSxpQkFDMUJMLEVBQVNJLFVBQVVDLElBQUksYUFDdkJKLEVBQVdHLFVBQVVDLElBQUksMEJBQTJCLGVBQ3BESixFQUFXSyxRQUFRQyxZQUFjLGNBQ2pDTCxFQUFXRSxVQUFVQyxJQUFJLGVBQ3pCRixFQUFhQyxVQUFVQyxJQUFJLDBCQUEyQixpQkFFOUIsWUFBcEJsRSxFQUFLWCxZQUNMb0UsRUFBYVksTUFBTUMsV0FBYSxRQUVoQ2IsRUFBYVksTUFBTUMsV0FBYSxRQUdWLE9BQXRCdEUsRUFBS2pCLGNBQ0x1RSxFQUFRZSxNQUFNRSxXQUFhLGtCQUNFLFVBQXRCdkUsRUFBS2pCLGNBQ1p1RSxFQUFRZSxNQUFNRSxXQUFhLG1CQUNFLFFBQXRCdkUsRUFBS2pCLGdCQUNadUUsRUFBUWUsTUFBTUUsV0FBYSxpQkFHL0J6RSxFQUFVd0MsWUFBY3RDLEVBQUt2QixXQUM3Qm1GLEVBQVl0QixZQUFjdEMsRUFBS2QsYUFDL0J5RSxFQUFXckIsWUFBYyxVQUN6QndCLEVBQVd4QixZQUFjLE9BQ3pCMEIsRUFBYTFCLFlBQWMsU0FHM0IwQixFQUFhakIsaUJBQWlCLFFBQVNkLEdBQ3ZDNkIsRUFBV2YsaUJBQWlCLFFBQVN5QixHQUNyQ1YsRUFBV2YsaUJBQWlCLFFBQVNQLEdBR3JDdkIsRUFBS2QsUUFBUUgsR0FHYnNELEVBQVFtQixPQUFPakIsRUFBbUJFLEdBQ2xDRixFQUFrQmlCLE9BQU9oQixFQUFjM0QsR0FDdkM0RCxFQUFpQmUsT0FBT2QsRUFBWUMsRUFBYUMsRUFBVUUsR0FDM0RGLEVBQVNZLE9BQU9YLEdBQ2hCQyxFQUFXVSxPQUFPVCxHQUNsQlosRUFBV3FCLE9BQU9uQixHQUdsQjlCLEVBQVV4QixHQUFRc0QsRUEyRWRvQixDQWxNUixXQUNJLE1BQU10RyxFQUFRZ0QsU0FBU0MsZUFBZSxTQUFTQyxNQUN6Qy9DLEVBQVU2QyxTQUFTQyxlQUFlLFlBQVlDLE1BQzlDaEQsRUFBVzhDLFNBQVNDLGVBQWUsWUFBWUMsTUFDL0NqRCxFQUFVK0MsU0FBU0MsZUFBZSxXQUFXQyxNQUVuRCxJQUFJcUQsRUFPSixPQUxJQSxFQUhXdkQsU0FBU0MsZUFBZSxVQUFVeUIsUUFHaEMsV0FFQSxnQkFFSixRQUFLMUUsRUFBT0MsRUFBU0MsRUFBVUMsRUFBU29HLEdBcUxqQ0MsSUFFaEIsTUFBTUMsRUFBT3pELFNBQVNDLGVBQWUsWUFDL0J5RCxFQUFPMUQsU0FBU0MsZUFBZSxZQUNyQ3dELEVBQUtFLFFBQ0xELEVBQUt4RCxNQUFRQyxRQUdFSCxTQUFTQyxlQUFlLG9CQUNoQzBCLGlCQUFpQixTQUFVYixJQUN0QyxHQUFJQSxFQUFFQyxPQUFPYyxRQUFRLFFBQVFDLGdCQUFpQixDQUMxQ2hCLEVBQUVpQixpQkFDRmpCLEVBQUU4QyxrQkFDRixNQUFNQyxFQTdMZCxXQUNJLE1BQU03RyxFQUFRZ0QsU0FBU0MsZUFBZSxjQUFjQyxNQUM5Qy9DLEVBQVU2QyxTQUFTQyxlQUFlLGlCQUFpQkMsTUFDbkRoRCxFQUFXOEMsU0FBU0MsZUFBZSxpQkFBaUJDLE1BQ3BEakQsRUFBVStDLFNBQVNDLGVBQWUsZ0JBQWdCQyxNQUV4RCxJQUFJcUQsRUFPSixPQUxJQSxFQUhXdkQsU0FBU0MsZUFBZSxVQUFVeUIsUUFHaEMsV0FFQSxnQkFFSixRQUFLMUUsRUFBT0MsRUFBU0MsRUFBVUMsRUFBU29HLEdBaUw1Qk8sSUE3SzdCLFNBQTZCbEYsR0FDekIsTUFBTXJCLEVBQVd5QyxTQUFTQyxlQUFlLGNBQWNDLE1BQ2pEbEMsRUFBYWdDLFNBQVNDLGVBQWUsaUJBQWlCQyxNQUN0RHJDLEVBQWNtQyxTQUFTQyxlQUFlLGlCQUFpQkMsTUFDdkR4QyxFQUFhc0MsU0FBU0MsZUFBZSxnQkFBZ0JDLE1BQ3JEL0IsRUFBWTZCLFNBQVNDLGVBQWUsZUFBZXlCLFFBRXpEOUMsRUFBS3RCLFNBQVNDLEdBQ2RxQixFQUFLYixXQUFXQyxHQUNoQlksRUFBS2hCLFlBQVlDLEdBQ2pCZSxFQUFLbkIsV0FBV0MsR0FFWlMsRUFDQVMsRUFBS1YsVUFBVSxZQUVmVSxFQUFLVixVQUFVLGdCQStKZjZGLENBQW9CRixHQW5GNUIsU0FBc0JqRixHQUNsQixNQUFNb0YsRUFBTTVELEVBQVV4QixHQUVSb0YsRUFBSS9DLFNBQVMsR0FBR0EsU0FBUyxHQUNqQ0MsWUFBY3RDLEVBQUt2QixXQUVUMkcsRUFBSS9DLFNBQVMsR0FBR0EsU0FBUyxHQUNqQ0MsWUFBY3RDLEVBQUtkLGFBRUQsT0FBdEJjLEVBQUtqQixjQUNMcUcsRUFBSWYsTUFBTUUsV0FBYSxrQkFDTSxVQUF0QnZFLEVBQUtqQixjQUNacUcsRUFBSWYsTUFBTUUsV0FBYSxtQkFDTSxRQUF0QnZFLEVBQUtqQixnQkFDWnFHLEVBQUlmLE1BQU1FLFdBQWEsaUJBRzNCLE1BQU1kLEVBQWUyQixFQUFJL0MsU0FBUyxHQUFHQSxTQUFTLEdBRXRCLFlBQXBCckMsRUFBS1gsWUFDTG9FLEVBQWFZLE1BQU1DLFdBQWEsUUFDTCxnQkFBcEJ0RSxFQUFLWCxjQUNab0UsRUFBYVksTUFBTUMsV0FBYSxTQThEaENlLENBQWFKLEdBQ0E3RCxTQUFTQyxlQUFlLFlBQ2hDMEQsWUFPYixNQUFNTyxFQUFpQmxFLFNBQVNtRSxpQkFBaUIsdUJBQzNDQyxFQUFtQnBFLFNBQVNtRSxpQkFBaUIsdUJBQzdDRSxFQUFVckUsU0FBU0MsZUFBZSxXQUV4QyxTQUFTcUUsRUFBWXhELEdBRWpCeUQsRUFEY3ZFLFNBQVNpQyxjQUFjbkIsRUFBRUMsT0FBT2dDLFFBQVFDLGNBSTFELFNBQVN3QixFQUFVMUQsR0F3Qm5CLElBQW9CMkQsRUFDSCxPQURHQSxFQXZCRjNELEVBQUVDLE9BQU9jLFFBQVEsYUF5Qi9CNEMsRUFBTTVCLFVBQVUxQixPQUFPLFVBQ3ZCa0QsRUFBUXhCLFVBQVUxQixPQUFPLFdBdEI3QixTQUFTaUMsRUFBYXRDLEdBRWxCeUQsRUFEY3ZFLFNBQVNpQyxjQUFjbkIsRUFBRUMsT0FBT2dDLFFBQVFDLGNBWTFELFNBQVN1QixFQUFVRSxHQUNGLE1BQVRBLElBQ0pBLEVBQU01QixVQUFVQyxJQUFJLFVBQ3BCdUIsRUFBUXhCLFVBQVVDLElBQUksV0FYMUJvQixFQUFlUSxTQUFRQyxJQUNuQkEsRUFBT2hELGlCQUFpQixRQUFTMkMsTUFHckNGLEVBQWlCTSxTQUFRQyxJQUNyQkEsRUFBT2hELGlCQUFpQixRQUFTNkMsUUNoUmpDSSxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhRSxRQUdyQixJQUFJQyxFQUFTTixFQUF5QkUsR0FBWSxDQUdqREcsUUFBUyxJQU9WLE9BSEFFLEVBQW9CTCxHQUFVSSxFQUFRQSxFQUFPRCxRQUFTSixHQUcvQ0ssRUFBT0QsUUNwQmZKLEVBQW9CTyxFQUFJLENBQUNILEVBQVNJLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWFIsRUFBb0JVLEVBQUVGLEVBQVlDLEtBQVNULEVBQW9CVSxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFVCxFQUFvQlUsRUFBSSxDQUFDSyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0dsRmhCLEVBQW9CLEtBQ01BLEVBQW9CLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby8uL3NyYy91c2VyLWludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG8tZG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNEYXRlLCB0b0RhdGUsIGlzVGhpc1dlZWssIGlzVG9kYXkgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcbmltcG9ydCB7IGlkIH0gZnJvbSBcImRhdGUtZm5zL2xvY2FsZVwiO1xuXG4vLyBUYXNrIEZhY3RvcnlcblxuY29uc3QgVGFzayA9ICh0aXRsZSA9ICcnLCBkZXRhaWxzID0gJycsIHByaW9yaXR5ID0gJ0xvdycsIGR1ZURhdGUgPSAnTm8gRHVlIERhdGUnLCBzdGF0dXMpID0+IHtcbiAgICBjb25zdCBnZXRUaXRsZSA9ICgpID0+IHRpdGxlO1xuICAgIGNvbnN0IHNldFRpdGxlID0gbmV3VGl0bGUgPT4gdGl0bGUgPSBuZXdUaXRsZTtcblxuICAgIGNvbnN0IGdldERldGFpbHMgPSAoKSA9PiBkZXRhaWxzO1xuICAgIGNvbnN0IHNldERldGFpbHMgPSBuZXdEZXRhaWxzID0+IGRldGFpbHMgPSBuZXdEZXRhaWxzO1xuXG4gICAgY29uc3QgZ2V0UHJpb3JpdHkgPSAoKSA9PiBwcmlvcml0eTtcbiAgICBjb25zdCBzZXRQcmlvcml0eSA9IG5ld1ByaW9yaXR5ID0+IHByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XG5cbiAgICBjb25zdCBnZXREdWVEYXRlID0gKCkgPT4gZHVlRGF0ZTtcbiAgICBjb25zdCBzZXREdWVEYXRlID0gbmV3RHVlRGF0ZSA9PiBkdWVEYXRlID0gbmV3RHVlRGF0ZTtcblxuICAgIGNvbnN0IGdldFN0YXR1cyA9ICgpID0+IHN0YXR1cztcbiAgICBjb25zdCBzZXRTdGF0dXMgPSBuZXdTdGF0dXMgID0+IHN0YXR1cyA9IG5ld1N0YXR1czsgICBcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldFRpdGxlLCBzZXRUaXRsZSwgXG4gICAgICAgIGdldERldGFpbHMsIHNldERldGFpbHMsIFxuICAgICAgICBnZXRQcmlvcml0eSwgc2V0UHJpb3JpdHksIFxuICAgICAgICBnZXREdWVEYXRlLCBzZXREdWVEYXRlLFxuICAgICAgICBnZXRTdGF0dXMsIHNldFN0YXR1c1xuICAgIH1cbn07XG5cbi8vIFByb2plY3QgRmFjdG9yeVxuXG5jb25zdCBQcm9qZWN0ID0gKHRpdGxlKSA9PiB7XG4gICAgY29uc3QgZ2V0VGl0bGUgPSAoKSA9PiB0aXRsZTtcbiAgICBjb25zdCBzZXRUaXRsZSA9IChuZXdUaXRsZSkgPT4gdGl0bGUgPSBuZXdUaXRsZTtcblxuICAgIGxldCB0YXNrcyA9IFtdO1xuXG4gICAgY29uc3QgZ2V0VGFza3MgPSAoKSA9PiB0YXNrcztcblxuICAgIGNvbnN0IHNldFRhc2tzID0gKG5ld1Rhc2tzKSA9PiB0YXNrcyA9IG5ld1Rhc2tzO1xuICAgIFxuICAgIGNvbnN0IGdldFRhc2sgPSB0YXNrVGl0bGUgPT4ge1xuICAgICAgICByZXR1cm4gdGFza3MuZmluZCgodGFzaykgPT4gdGFza1RpdGxlID09PSB0YXNrLmdldFRpdGxlKCkpXG4gICAgfTtcblxuICAgIGNvbnN0IGNvbnRhaW5zVGFzayA9IHRhc2tUaXRsZSA9PiB7XG4gICAgICAgIHJldHVybiB0YXNrcy5zb21lKCh0YXNrKSA9PiB0YXNrVGl0bGUgPT09IHRhc2suZ2V0VGl0bGUoKSlcbiAgICB9O1xuXG4gICAgY29uc3QgYWRkVGFzayA9IHRhc2sgPT4gdGFza3MucHVzaCh0YXNrKVxuXG4gICAgY29uc3QgcmVtb3ZlVGFzayA9IHRhc2tUaXRsZSA9PiB7XG4gICAgICAgIHRhc2tzID0gdGFza3MuZmlsdGVyKCh0YXNrKSA9PiB0YXNrVGl0bGUgIT09IHRhc2suZ2V0VGl0bGUoKSk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIGdldFRpdGxlLCBzZXRUaXRsZSxcbiAgICAgICAgZ2V0VGFza3MsIHNldFRhc2tzLFxuICAgICAgICBnZXRUYXNrLFxuICAgICAgICBjb250YWluc1Rhc2ssXG4gICAgICAgIGFkZFRhc2ssIHJlbW92ZVRhc2tcbiAgICB9XG59O1xuXG4vLyBUbyBEbyBMaXN0IEZhY3RvcnlcblxuY29uc3QgVG9Eb0xpc3QgPSAoKSA9PiB7XG4gICAgXG4gICAgbGV0IHByb2plY3RzID0gW11cbiAgICBcbiAgICBjb25zdCBnZXRQcm9qZWN0cyA9ICgpID0+IHByb2plY3RzO1xuXG4gICAgY29uc3QgZ2V0UHJvamVjdCA9IChwcm9qZWN0VGl0bGUpID0+IHtcbiAgICAgICAgcmV0dXJuIHByb2plY3RzLmZpbmQoKHByb2plY3QpID0+IHByb2plY3RUaXRsZSA9PT0gcHJvamVjdC5nZXRUaXRsZSgpKVxuICAgIH07XG5cbiAgICBjb25zdCBjb250YWluc1Byb2plY3QgPSAocHJvamVjdFRpdGxlKSA9PiB7XG4gICAgICAgIHJldHVybiBwcm9qZWN0cy5zb21lKChwcm9qZWN0KSA9PiBwcm9qZWN0VGl0bGUgPT09IHByb2plY3QuZ2V0VGl0bGUoKSlcbiAgICB9XG5cbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gKHByb2plY3QpID0+IHByb2plY3RzLnB1c2gocHJvamVjdClcblxuICAgIGNvbnN0IHJlbW92ZVByb2plY3QgPSAocHJvamVjdFRpdGxlKSA9PiB7XG4gICAgICAgIHByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKChwcm9qZWN0KSA9PiBwcm9qZWN0VGl0bGUgIT09IHByb2plY3QuZ2V0VGl0bGUoKSlcbiAgICB9XG5cbiAgICBjb25zdCBzZXRBbGxUYXNrcyA9ICgpID0+IHt9XG5cbiAgICBjb25zdCBzZXRUb2RheSA9ICgpID0+IHt9XG5cbiAgICBjb25zdCBzZXRUaGlzV2VlayA9ICgpID0+IHt9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRQcm9qZWN0cyxcbiAgICAgICAgZ2V0UHJvamVjdCxcbiAgICAgICAgY29udGFpbnNQcm9qZWN0LFxuICAgICAgICBhZGRQcm9qZWN0LCByZW1vdmVQcm9qZWN0XG4gICAgfVxufVxuXG5leHBvcnQge1Rhc2ssIFByb2plY3QsIFRvRG9MaXN0fSIsImltcG9ydCB7VGFzaywgUHJvamVjdCwgVG9Eb0xpc3R9IGZyb20gXCIuL2luZGV4XCJcblxuLy8gVG8gRG8gTGlzdCBJbml0aWFsaXphdGlvbjpcblxuY29uc3QgdG9EbyA9IFRvRG9MaXN0KCk7XG5cbmNvbnN0IGhvbWUgPSBQcm9qZWN0KCdIb21lJyk7XG5jb25zdCB0b2RheSA9IFByb2plY3QoJ1RvZGF5Jyk7XG5jb25zdCB0aGlzV2VlayA9IFByb2plY3QoJ1RoaXMgV2VlaycpO1xuXG50b0RvLmFkZFByb2plY3QoaG9tZSlcbnRvRG8uYWRkUHJvamVjdCh0b2RheSlcbnRvRG8uYWRkUHJvamVjdCh0aGlzV2VlaylcblxuY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWUtZGF0ZScpXG5kYXRlLnZhbHVlID0gZ2V0VG9kYXkoKVxuXG4vLyBEaXYgbGlzdFxuXG5jb25zdCBkaXZPYmplY3QgPSB7fVxuXG4vLyBUb2RheSdzIERhdGVcbmZ1bmN0aW9uIGdldFRvZGF5KCkge1xuICAgIGxldCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgbGV0IGRkID0gU3RyaW5nKHRvZGF5LmdldERhdGUoKSkucGFkU3RhcnQoMiwgJzAnKTtcbiAgICBsZXQgbW0gPSBTdHJpbmcodG9kYXkuZ2V0TW9udGgoKSArIDEpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgbGV0IHl5eXkgPSB0b2RheS5nZXRGdWxsWWVhcigpO1xuICAgIHJldHVybiB5eXl5ICsgJy0nICsgbW0gKyAnLScgKyBkZDtcbn1cblxuLy8gR2V0L1NldCBOZXcgYW5kIFByZXZpb3VzIFRha3NzOlxuXG5mdW5jdGlvbiBnZXROZXdUYXNrSW5mbygpIHtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGl0bGVcIikudmFsdWU7XG4gICAgY29uc3QgZHVlRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVlLWRhdGVcIikudmFsdWU7XG4gICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5XCIpLnZhbHVlO1xuICAgIGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRldGFpbHNcIikudmFsdWU7XG4gICAgY29uc3Qgc3RhdHVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdGF0dXNcIikuY2hlY2tlZDtcbiAgICBsZXQgdGFza1N0YXR1c1xuICAgIGlmIChzdGF0dXMpIHtcbiAgICAgICAgdGFza1N0YXR1cyA9ICdDb21wbGV0ZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFza1N0YXR1cyA9ICdOb3QgQ29tcGxldGUnO1xuICAgIH1cbiAgICBjb25zdCB0YXNrID0gVGFzayh0aXRsZSwgZGV0YWlscywgcHJpb3JpdHksIGR1ZURhdGUsIHRhc2tTdGF0dXMpXG4gICAgcmV0dXJuIHRhc2tcbiAgICBcbn1cblxuZnVuY3Rpb24gZ2V0UHJldmlvdXNUYXNrSW5mbygpIHtcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC10aXRsZVwiKS52YWx1ZTtcbiAgICBjb25zdCBkdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LWR1ZS1kYXRlXCIpLnZhbHVlO1xuICAgIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LXByaW9yaXR5XCIpLnZhbHVlO1xuICAgIGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtZGV0YWlsc1wiKS52YWx1ZTtcbiAgICBjb25zdCBzdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXR1c1wiKS5jaGVja2VkO1xuICAgIGxldCB0YXNrU3RhdHVzXG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgICB0YXNrU3RhdHVzID0gJ0NvbXBsZXRlJztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXNrU3RhdHVzID0gJ05vdCBDb21wbGV0ZSc7XG4gICAgfVxuICAgIGNvbnN0IHRhc2sgPSBUYXNrKHRpdGxlLCBkZXRhaWxzLCBwcmlvcml0eSwgZHVlRGF0ZSwgdGFza1N0YXR1cylcbiAgICByZXR1cm4gdGFza1xufVxuXG5mdW5jdGlvbiBzZXRQcmV2aW91c1Rhc2tJbmZvKHRhc2spIHtcbiAgICBjb25zdCBuZXdUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC10aXRsZVwiKS52YWx1ZTtcbiAgICBjb25zdCBuZXdEdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LWR1ZS1kYXRlXCIpLnZhbHVlO1xuICAgIGNvbnN0IG5ld1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LXByaW9yaXR5XCIpLnZhbHVlO1xuICAgIGNvbnN0IG5ld0RldGFpbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtZGV0YWlsc1wiKS52YWx1ZTtcbiAgICBjb25zdCBuZXdTdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtc3RhdHVzXCIpLmNoZWNrZWQ7XG5cbiAgICB0YXNrLnNldFRpdGxlKG5ld1RpdGxlKVxuICAgIHRhc2suc2V0RHVlRGF0ZShuZXdEdWVEYXRlKVxuICAgIHRhc2suc2V0UHJpb3JpdHkobmV3UHJpb3JpdHkpXG4gICAgdGFzay5zZXREZXRhaWxzKG5ld0RldGFpbHMpXG5cbiAgICBpZiAobmV3U3RhdHVzKSB7XG4gICAgICAgIHRhc2suc2V0U3RhdHVzKCdDb21wbGV0ZScpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFzay5zZXRTdGF0dXMoJ05vdCBDb21wbGV0ZScpXG4gICAgfVxufVxuXG4vLyBDcmVhdGluZyBUYXNrIFVJXG5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2tVSSh0YXNrKSB7XG4gICAgLy8gQ3JlYXRpbmcgZWxlbWVudHNcbiAgICBjb25zdCB0YXNrSG9sZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRhc2tzJylcbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgZmlyc3RUYXNrRWxlbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBsYXN0VGFza0VsZW1lbnRzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgZGV0YWlsc0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgY29uc3QgdGFza0R1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCB0YXNrRWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGVkaXRTeW1ib2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICBjb25zdCB0YXNrRGVsZXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgZGVsZXRlU3ltYm9sID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG5cbiAgICAvLyBBZGRpbmcgY2xhc3Nlc1xuICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZCgndGFzaycpXG4gICAgZmlyc3RUYXNrRWxlbWVudHMuY2xhc3NMaXN0LmFkZCgnZmlyc3QtdGFzay1lbGVtZW50cycpXG4gICAgdGFza0NoZWNrYm94LmNsYXNzTGlzdC5hZGQoJ3Rhc2stY2hlY2tib3gnKVxuICAgIHRhc2tUaXRsZS5jbGFzc0xpc3QuYWRkKCd0YXNrLXRpdGxlJylcbiAgICBsYXN0VGFza0VsZW1lbnRzLmNsYXNzTGlzdC5hZGQoJ2xhc3QtdGFzay1lbGVtZW50cycpXG4gICAgdGFza0R1ZURhdGUuY2xhc3NMaXN0LmFkZCgndGFzay1kdWUtZGF0ZScpXG4gICAgdGFza0VkaXQuY2xhc3NMaXN0LmFkZCgndGFzay1lZGl0JylcbiAgICBlZGl0U3ltYm9sLmNsYXNzTGlzdC5hZGQoJ21hdGVyaWFsLWljb25zLW91dGxpbmVkJywgJ2VkaXQtc3ltYm9sJylcbiAgICBlZGl0U3ltYm9sLmRhdGFzZXQubW9kYWxUYXJnZXQgPSBcIiNlZGl0LW1vZGFsXCJcbiAgICB0YXNrRGVsZXRlLmNsYXNzTGlzdC5hZGQoJ3Rhc2stZGVsZXRlJylcbiAgICBkZWxldGVTeW1ib2wuY2xhc3NMaXN0LmFkZCgnbWF0ZXJpYWwtaWNvbnMtb3V0bGluZWQnLCAnZGVsZXRlLXN5bWJvbCcpXG4gXG4gICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0NvbXBsZXRlJykge1xuICAgICAgICB0YXNrQ2hlY2tib3guc3R5bGUuYmFja2dyb3VuZCA9ICdncmVlbic7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFza0NoZWNrYm94LnN0eWxlLmJhY2tncm91bmQgPSAnd2hpdGUnO1xuICAgIH1cblxuICAgIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ2xvdycpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBncmVlbic7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ21lZGl1bScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBvcmFuZ2UnO1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdoaWdoJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIHJlZCc7XG4gICAgfVxuXG4gICAgdGFza1RpdGxlLnRleHRDb250ZW50ID0gdGFzay5nZXRUaXRsZSgpO1xuICAgIHRhc2tEdWVEYXRlLnRleHRDb250ZW50ID0gdGFzay5nZXREdWVEYXRlKCk7XG4gICAgZGV0YWlsc0J0bi50ZXh0Q29udGVudCA9ICdEZXRhaWxzJztcbiAgICBlZGl0U3ltYm9sLnRleHRDb250ZW50ID0gJ2VkaXQnO1xuICAgIGRlbGV0ZVN5bWJvbC50ZXh0Q29udGVudCA9ICdkZWxldGUnO1xuXG4gICAgLy8gRXZlbnQgTGlzdGVuZXJzXG4gICAgZGVsZXRlU3ltYm9sLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZGVsZXRlVGFzaylcbiAgICBlZGl0U3ltYm9sLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkVkaXRUYXNrKVxuICAgIGVkaXRTeW1ib2wuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlZGl0VGFzaylcblxuICAgIC8vIEFkZCBUYXNrIHRvIE1haW4gUHJvamVjdFxuICAgIGhvbWUuYWRkVGFzayh0YXNrKVxuXG4gICAgLy8gQXBwZW5kaW5nIGl0ZW1zIHRvIERPTVxuICAgIHRhc2tEaXYuYXBwZW5kKGZpcnN0VGFza0VsZW1lbnRzLCBsYXN0VGFza0VsZW1lbnRzKVxuICAgIGZpcnN0VGFza0VsZW1lbnRzLmFwcGVuZCh0YXNrQ2hlY2tib3gsIHRhc2tUaXRsZSlcbiAgICBsYXN0VGFza0VsZW1lbnRzLmFwcGVuZChkZXRhaWxzQnRuLCB0YXNrRHVlRGF0ZSwgdGFza0VkaXQsIHRhc2tEZWxldGUpXG4gICAgdGFza0VkaXQuYXBwZW5kKGVkaXRTeW1ib2wpXG4gICAgdGFza0RlbGV0ZS5hcHBlbmQoZGVsZXRlU3ltYm9sKVxuICAgIHRhc2tIb2xkZXIuYXBwZW5kKHRhc2tEaXYpXG5cbiAgICAvLyBBZGRpbmcgSXRlbSB0byBEaXZPYmplY3RcbiAgICBkaXZPYmplY3RbdGFza10gPSB0YXNrRGl2XG59XG5cbi8vIFVwZGF0aW5nIFRhc2sgVUlcblxuZnVuY3Rpb24gdXBkYXRlVGFza1VJKHRhc2spIHtcbiAgICBjb25zdCBkaXYgPSBkaXZPYmplY3RbdGFza11cblxuICAgIGNvbnN0IHRpdGxlID0gZGl2LmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLmdldFRpdGxlKClcbiAgICBcbiAgICBjb25zdCBkdWVEYXRlID0gZGl2LmNoaWxkcmVuWzFdLmNoaWxkcmVuWzFdXG4gICAgZHVlRGF0ZS50ZXh0Q29udGVudCA9IHRhc2suZ2V0RHVlRGF0ZSgpXG5cbiAgICBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdsb3cnKSB7XG4gICAgICAgIGRpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBncmVlbic7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ21lZGl1bScpIHtcbiAgICAgICAgZGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIG9yYW5nZSc7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ2hpZ2gnKSB7XG4gICAgICAgIGRpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCByZWQnO1xuICAgIH1cblxuICAgIGNvbnN0IHRhc2tDaGVja2JveCA9IGRpdi5jaGlsZHJlblswXS5jaGlsZHJlblswXVxuXG4gICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0NvbXBsZXRlJykge1xuICAgICAgICB0YXNrQ2hlY2tib3guc3R5bGUuYmFja2dyb3VuZCA9ICdncmVlbic7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFN0YXR1cygpID09ICdOb3QgQ29tcGxldGUnKSB7XG4gICAgICAgIHRhc2tDaGVja2JveC5zdHlsZS5iYWNrZ3JvdW5kID0gJ3doaXRlJztcbiAgICB9XG59XG5cblxuLy8gRXZlbnQgTGlzdGVuZXIgVGFza3M6XG5cbmZ1bmN0aW9uIGRlbGV0ZVRhc2soZSkge1xuICAgIGNvbnN0IHRpdGxlID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0udGV4dENvbnRlbnRcbiAgICBob21lLnJlbW92ZVRhc2sodGl0bGUpXG4gICAgY29uc3QgaXRlbSA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlXG4gICAgaXRlbS5yZW1vdmUoKVxufVxuXG5mdW5jdGlvbiBlZGl0VGFzayhlKSB7XG4gICAgY29uc3QgdGl0bGUgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlblswXS5jaGlsZHJlblsxXS50ZXh0Q29udGVudFxuICAgIGNvbnN0IHRhc2sgPSBob21lLmdldFRhc2sodGl0bGUpXG4gICAgY29uc3QgZHVlRGF0ZSA9IHRhc2suZ2V0RHVlRGF0ZSgpXG4gICAgY29uc3QgcHJpb3JpdHkgPSB0YXNrLmdldFByaW9yaXR5KClcbiAgICBjb25zdCBkZXRhaWxzID0gdGFzay5nZXREZXRhaWxzKClcbiAgICBjb25zdCBzdGF0dXMgPSB0YXNrLmdldFN0YXR1cygpXG5cbiAgICBjb25zdCBlZGl0VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC10aXRsZScpXG4gICAgY29uc3QgZWRpdER1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1kdWUtZGF0ZScpXG4gICAgY29uc3QgZWRpdFByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcHJpb3JpdHknKVxuICAgIGNvbnN0IGVkaXREZXRhaWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtZGV0YWlscycpXG4gICAgY29uc3QgZWRpdFN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXN0YXR1cycpXG5cbiAgICBlZGl0VGl0bGUudmFsdWUgPSB0aXRsZVxuICAgIGVkaXREdWVEYXRlLnZhbHVlID0gZHVlRGF0ZVxuICAgIGVkaXRQcmlvcml0eS52YWx1ZSA9IHByaW9yaXR5XG4gICAgZWRpdERldGFpbHMudmFsdWUgPSBkZXRhaWxzXG5cbiAgICBpZiAoc3RhdHVzID09ICdOb3QgQ29tcGxldGUnKSB7XG4gICAgICAgIGVkaXRTdGF0dXMuY2hlY2tlZCA9IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWRpdFN0YXR1cy5jaGVja2VkID0gdHJ1ZVxuICAgIH1cbn1cblxuLy8gU3VibWl0IEZvcm0gQnV0dG9uIEZ1bmN0aW9uYWxpdGllc1xuY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N1Ym1pdC10YXNrJylcblxuc3VibWl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpXG4gICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJ2Zvcm0nKS5jaGVja1ZhbGlkaXR5KCkpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSBnZXROZXdUYXNrSW5mbygpXG4gICAgICAgIGNyZWF0ZVRhc2tVSShuZXdUYXNrKVxuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ldy10YXNrJylcbiAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWUtZGF0ZScpXG4gICAgICAgIGZvcm0ucmVzZXQoKVxuICAgICAgICBkYXRlLnZhbHVlID0gZ2V0VG9kYXkoKTsgXG4gICAgfX0pXG5cbmNvbnN0IGVkaXRUYXNrQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtdGFzay1zdWJtaXQnKVxuZWRpdFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCdmb3JtJykuY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsSW5mbyA9IGdldFByZXZpb3VzVGFza0luZm8oKVxuICAgICAgICBzZXRQcmV2aW91c1Rhc2tJbmZvKG9yaWdpbmFsSW5mbylcbiAgICAgICAgdXBkYXRlVGFza1VJKG9yaWdpbmFsSW5mbylcbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctdGFzaycpXG4gICAgICAgIGZvcm0ucmVzZXQoKVxuICAgIH1cbn0pXG5cblxuLy8gTW9kYWwgT3BlbmluZyAvIENsb3NpbmdcblxuY29uc3QgYWRkVGFza0J1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1tb2RhbC10YXJnZXRdJylcbmNvbnN0IGNsb3NlVGFza0J1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1jbG9zZS1idXR0b25dJylcbmNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnb3ZlcmxheScpO1xuXG5mdW5jdGlvbiBvcGVuQWRkVGFzayhlKSB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUudGFyZ2V0LmRhdGFzZXQubW9kYWxUYXJnZXQpXG4gICAgb3Blbk1vZGFsKG1vZGFsKVxufVxuXG5mdW5jdGlvbiBjbG9zZVRhc2soZSkge1xuICAgIGNvbnN0IG1vZGFsID0gZS50YXJnZXQuY2xvc2VzdCgnLm1vZGFsJylcbiAgICBjbG9zZU1vZGFsKG1vZGFsKVxufVxuXG5mdW5jdGlvbiBvcGVuRWRpdFRhc2soZSkge1xuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlLnRhcmdldC5kYXRhc2V0Lm1vZGFsVGFyZ2V0KVxuICAgIG9wZW5Nb2RhbChtb2RhbClcbn1cblxuYWRkVGFza0J1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5BZGRUYXNrKSAgXG59KVxuXG5jbG9zZVRhc2tCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZVRhc2spXG59KVxuXG5mdW5jdGlvbiBvcGVuTW9kYWwobW9kYWwpIHtcbiAgICBpZiAobW9kYWwgPT0gbnVsbCkgcmV0dXJuXG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXG59XG5cbmZ1bmN0aW9uIGNsb3NlTW9kYWwobW9kYWwpIHtcbiAgICBpZiAobW9kYWwgPT0gbnVsbCkgcmV0dXJuXG4gICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXG59IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7XG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oODAzKTtcbiJdLCJuYW1lcyI6WyJUYXNrIiwidGl0bGUiLCJkZXRhaWxzIiwicHJpb3JpdHkiLCJkdWVEYXRlIiwic3RhdHVzIiwiZ2V0VGl0bGUiLCJzZXRUaXRsZSIsIm5ld1RpdGxlIiwiZ2V0RGV0YWlscyIsInNldERldGFpbHMiLCJuZXdEZXRhaWxzIiwiZ2V0UHJpb3JpdHkiLCJzZXRQcmlvcml0eSIsIm5ld1ByaW9yaXR5IiwiZ2V0RHVlRGF0ZSIsInNldER1ZURhdGUiLCJuZXdEdWVEYXRlIiwiZ2V0U3RhdHVzIiwic2V0U3RhdHVzIiwibmV3U3RhdHVzIiwiUHJvamVjdCIsInRhc2tzIiwiZ2V0VGFza3MiLCJzZXRUYXNrcyIsIm5ld1Rhc2tzIiwiZ2V0VGFzayIsInRhc2tUaXRsZSIsImZpbmQiLCJ0YXNrIiwiY29udGFpbnNUYXNrIiwic29tZSIsImFkZFRhc2siLCJwdXNoIiwicmVtb3ZlVGFzayIsImZpbHRlciIsIlRvRG9MaXN0IiwicHJvamVjdHMiLCJnZXRQcm9qZWN0cyIsImdldFByb2plY3QiLCJwcm9qZWN0VGl0bGUiLCJwcm9qZWN0IiwiY29udGFpbnNQcm9qZWN0IiwiYWRkUHJvamVjdCIsInJlbW92ZVByb2plY3QiLCJ0b0RvIiwiaG9tZSIsInRvZGF5IiwidGhpc1dlZWsiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJnZXRUb2RheSIsImRpdk9iamVjdCIsIkRhdGUiLCJkZCIsIlN0cmluZyIsImdldERhdGUiLCJwYWRTdGFydCIsIm1tIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsImRlbGV0ZVRhc2siLCJlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsImNoaWxkcmVuIiwidGV4dENvbnRlbnQiLCJyZW1vdmUiLCJlZGl0VGFzayIsImVkaXRUaXRsZSIsImVkaXREdWVEYXRlIiwiZWRpdFByaW9yaXR5IiwiZWRpdERldGFpbHMiLCJlZGl0U3RhdHVzIiwiY2hlY2tlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCJjbG9zZXN0IiwiY2hlY2tWYWxpZGl0eSIsInByZXZlbnREZWZhdWx0IiwidGFza0hvbGRlciIsInF1ZXJ5U2VsZWN0b3IiLCJ0YXNrRGl2IiwiY3JlYXRlRWxlbWVudCIsImZpcnN0VGFza0VsZW1lbnRzIiwidGFza0NoZWNrYm94IiwibGFzdFRhc2tFbGVtZW50cyIsImRldGFpbHNCdG4iLCJ0YXNrRHVlRGF0ZSIsInRhc2tFZGl0IiwiZWRpdFN5bWJvbCIsInRhc2tEZWxldGUiLCJkZWxldGVTeW1ib2wiLCJjbGFzc0xpc3QiLCJhZGQiLCJkYXRhc2V0IiwibW9kYWxUYXJnZXQiLCJzdHlsZSIsImJhY2tncm91bmQiLCJib3JkZXJMZWZ0Iiwib3BlbkVkaXRUYXNrIiwiYXBwZW5kIiwiY3JlYXRlVGFza1VJIiwidGFza1N0YXR1cyIsImdldE5ld1Rhc2tJbmZvIiwiZm9ybSIsImRhdGUiLCJyZXNldCIsInN0b3BQcm9wYWdhdGlvbiIsIm9yaWdpbmFsSW5mbyIsImdldFByZXZpb3VzVGFza0luZm8iLCJzZXRQcmV2aW91c1Rhc2tJbmZvIiwiZGl2IiwidXBkYXRlVGFza1VJIiwiYWRkVGFza0J1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xvc2VUYXNrQnV0dG9ucyIsIm92ZXJsYXkiLCJvcGVuQWRkVGFzayIsIm9wZW5Nb2RhbCIsImNsb3NlVGFzayIsIm1vZGFsIiwiZm9yRWFjaCIsImJ1dHRvbiIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=