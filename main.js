(()=>{"use strict";var e={138:(e,t,d)=>{d.d(t,{IK:()=>n,iQ:()=>o,m8:()=>s});const o=(e,t,d,o,n,s)=>({getTitle:()=>e,setTitle:t=>e=t,getDescription:()=>t,setDescription:e=>t=e,getDate:()=>d,setDate:e=>d=e,getPriority:()=>o,setPriority:e=>o=e,getStatus:()=>n,setStatus:e=>n=e,getId:()=>s,setId:e=>s=e}),n=(e,t)=>{let d=[];return{getTasks:()=>d,getProjectTitle:()=>e,getProjectId:()=>t,setProjectTitle:t=>e=t,setProjectId:e=>t=e,getTask:e=>d.find((t=>t.getId()===e)),addTask:e=>{d.push(e)},removeTask:e=>{d=d.filter((t=>t.getId()!==e))}}},s=()=>{let e=[];return{getProject:t=>e.find((e=>e.getProjectId()===t)),getProjects:()=>e,addProject:t=>{e.push(t)},removeProject:t=>{e=e.filter((e=>e.getProjectId()!==t))}}}},803:(e,t,d)=>{var o=d(138);(0,o.m8)();const n=(0,o.IK)("Default Project"),s=document.getElementById("due-date"),a=(new Date).toISOString().slice(0,10);let c;s.value=a,document.querySelector(".tasks").addEventListener("click",(e=>{if(e.target.matches("span")&&"edit"==e.target.textContent){g(document.querySelector("#edit-form"));const t=e.target.parentNode.parentNode.id,d=n.getTask(t);c=t;const o=document.getElementById("edit-title"),s=document.getElementById("edit-description"),a=document.getElementById("edit-due-date"),r=document.getElementById("edit-priority"),l=document.getElementById("edit-status");o.value=d.getTitle(),s.value=d.getDescription(),a.value=d.getDate(),r.value=d.getPriority(),"Complete"==d.getStatus()?l.checked=!0:l.checked=!1}else if(e.target.matches("span")&&"delete"==e.target.textContent){const t=e.target.parentNode.parentNode;n.removeTask(t.id),t.remove()}else e.target.matches("button")}));const r=document.querySelector(".add-task"),l=document.querySelector(".edit-task");r.addEventListener("click",(e=>{e.preventDefault();const t=function(){const e=document.getElementById("title").value,t=document.getElementById("description").value,d=document.getElementById("due-date").value,n=document.getElementById("priority").value;let s;s=document.getElementById("status").checked?"Complete":"Incomplete";const a=self.crypto.randomUUID();return(0,o.iQ)(e,t,d,n,s,a)}();!function(e){const t=document.querySelector(".tasks"),d=document.createElement("div");d.classList.add("task"),d.id=e.getId();const o=document.createElement("div");o.classList.add("first-task-elements"),"Low"==e.getPriority()?d.style.borderLeft="5px solid green":"Medium"==e.getPriority()?d.style.borderLeft="5px solid orange":d.style.borderLeft="5px solid red","Complete"==e.getStatus()?d.style.opacity="0.5":"Incomplete"==e.getStatus()&&(d.style.opactiy="1");const n=document.createElement("div");n.classList.add("title"),n.textContent=e.getTitle();const s=document.createElement("div");s.classList.add("last-task-elements");const a=document.createElement("div");a.classList.add("due-date"),a.textContent=e.getDate();const c=document.createElement("span");c.classList.add("edit","material-icons-outlined"),c.textContent="edit";const r=document.createElement("span");r.classList.add("delete","material-icons-outlined"),r.textContent="delete",o.append(n),s.append(a,c,r),d.append(o,s),t.append(d)}(t),n.addTask(t),document.querySelector(".form-card").reset();const d=document.getElementById("due-date"),s=(new Date).toISOString().slice(0,10);d.value=s})),l.addEventListener("click",(e=>{e.preventDefault(),function(){const e=n.getTask(c),t=document.getElementById("edit-title").value,d=document.getElementById("edit-description").value,o=document.getElementById("edit-due-date").value,s=document.getElementById("edit-priority").value,a=document.getElementById("edit-status").checked;e.setTitle(t),e.setDescription(d),e.setDate(o),e.setPriority(s),a?e.setStatus("Complete"):e.setStatus("Incomplete")}(),function(e){const t=document.getElementById(e),d=n.getTask(e);t.childNodes[0].textContent=d.getTitle(),"Low"==d.getPriority()?t.style.borderLeft="5px solid green":"Medium"==d.getPriority()?t.style.borderLeft="5px solid orange":t.style.borderLeft="5px solid red","Complete"==d.getStatus()?t.style.opacity="0.5":"Incomplete"==d.getStatus()&&(t.style.opacity="1"),t.childNodes[1].childNodes[0].textContent=d.getDate()}(c)}));const i=document.querySelectorAll("[data-modal-target]"),u=document.querySelectorAll("[data-close-button]"),m=document.getElementById("overlay");function g(e){null!=e&&(e.classList.add("active"),m.classList.add("active"))}i.forEach((e=>{e.addEventListener("click",(()=>{g(document.querySelector(e.dataset.modalTarget))}))})),u.forEach((e=>{e.addEventListener("click",(()=>{var t;null!=(t=e.closest(".form"))&&(t.classList.remove("active"),m.classList.remove("active"))}))}))}},t={};function d(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,d),s.exports}d.d=(e,t)=>{for(var o in t)d.o(t,o)&&!d.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d(138),d(803)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUksSUFBSUMsS0FBT0QsRUFDWFIsRUFBb0JVLEVBQUVGLEVBQVlDLEtBQVNULEVBQW9CVSxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFVCxFQUFvQlUsRUFBSSxDQUFDSyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0dsRmhCLEVBQW9CLEtBQ01BLEVBQW9CLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby8uL3NyYy91c2VyLWludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG8tZG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgVGFzayA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBzdGF0dXMsIGlkKSA9PiB7XG5cbiAgICBjb25zdCBnZXRUaXRsZSA9ICgpID0+IHRpdGxlO1xuICAgIGNvbnN0IHNldFRpdGxlID0gbmV3VGl0bGUgPT4gdGl0bGUgPSBuZXdUaXRsZTtcbiAgICBjb25zdCBnZXREZXNjcmlwdGlvbiA9ICgpID0+IGRlc2NyaXB0aW9uO1xuICAgIGNvbnN0IHNldERlc2NyaXB0aW9uPSBuZXdEZXNjcmlwdGlvbiA9PiBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgIGNvbnN0IGdldERhdGUgPSAoKSA9PiBkdWVEYXRlO1xuICAgIGNvbnN0IHNldERhdGUgPSBuZXdEYXRlID0+IGR1ZURhdGUgPSBuZXdEYXRlO1xuICAgIGNvbnN0IGdldFByaW9yaXR5ID0gKCkgPT4gcHJpb3JpdHk7XG4gICAgY29uc3Qgc2V0UHJpb3JpdHkgPSBuZXdQcmlvcml0eSA9PiBwcmlvcml0eSA9IG5ld1ByaW9yaXR5O1xuICAgIGNvbnN0IGdldFN0YXR1cyA9ICgpID0+IHN0YXR1cztcbiAgICBjb25zdCBzZXRTdGF0dXMgPSBuZXdTdGF0dXMgPT4gc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgIGNvbnN0IGdldElkID0gKCkgPT4gaWQ7XG4gICAgY29uc3Qgc2V0SWQgPSBuZXdJZCA9PiBpZCA9IG5ld0lkO1xuXG4gICAgcmV0dXJuIHtnZXRUaXRsZSwgc2V0VGl0bGUsIGdldERlc2NyaXB0aW9uLCBzZXREZXNjcmlwdGlvbiwgZ2V0RGF0ZSwgc2V0RGF0ZSwgZ2V0UHJpb3JpdHksIHNldFByaW9yaXR5LCBnZXRTdGF0dXMsIHNldFN0YXR1cywgZ2V0SWQsIHNldElkfVxufTtcblxuXG5jb25zdCBQcm9qZWN0ID0gKHByb2plY3RUaXRsZSwgcHJvamVjdElkKSA9PiB7XG5cbiAgICBsZXQgcHJvamVjdCA9IFtdO1xuXG4gICAgY29uc3QgZ2V0UHJvamVjdFRpdGxlID0gKCkgPT4gcHJvamVjdFRpdGxlO1xuICAgIGNvbnN0IHNldFByb2plY3RUaXRsZSA9IG5ld1RpdGxlID0+IHByb2plY3RUaXRsZSA9IG5ld1RpdGxlO1xuICAgIGNvbnN0IGdldFByb2plY3RJZCA9ICgpID0+IHByb2plY3RJZDtcbiAgICBjb25zdCBzZXRQcm9qZWN0SWQgPSBuZXdJZCA9PiBwcm9qZWN0SWQgPSBuZXdJZDtcblxuICAgIGNvbnN0IGdldFRhc2sgPSAoaWQpID0+IHtcbiAgICAgICAgcmV0dXJuIHByb2plY3QuZmluZCgodGFzaykgPT4gdGFzay5nZXRJZCgpID09PSBpZClcbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0VGFza3MgPSAoKSA9PiBwcm9qZWN0O1xuXG4gICAgY29uc3QgYWRkVGFzayA9ICh0YXNrKSA9PiB7XG4gICAgICAgIHByb2plY3QucHVzaCh0YXNrKVxuICAgIH07XG5cbiAgICBjb25zdCByZW1vdmVUYXNrID0gKGlkKSA9PiB7XG4gICAgICAgIHByb2plY3QgPSBwcm9qZWN0LmZpbHRlcigodGFzaykgPT4gdGFzay5nZXRJZCgpICE9PSBpZClcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtnZXRUYXNrcywgZ2V0UHJvamVjdFRpdGxlLCBnZXRQcm9qZWN0SWQsIHNldFByb2plY3RUaXRsZSwgc2V0UHJvamVjdElkLCBnZXRUYXNrLCBhZGRUYXNrLCByZW1vdmVUYXNrfVxufTtcblxuXG5jb25zdCBUb0RvID0gKCkgPT4ge1xuICAgIFxuICAgIGxldCB0b0RvID0gW107XG4gICAgXG4gICAgY29uc3QgZ2V0UHJvamVjdCA9IChwcm9qZWN0SWQpID0+IHtcbiAgICAgICAgcmV0dXJuIHRvRG8uZmluZCgocHJvamVjdCkgPT4gcHJvamVjdC5nZXRQcm9qZWN0SWQoKSA9PT0gcHJvamVjdElkKVxuICAgIH07XG5cbiAgICBjb25zdCBnZXRQcm9qZWN0cyA9ICgpID0+IHRvRG87XG5cbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gKHByb2plY3QpID0+IHtcbiAgICAgICAgdG9Eby5wdXNoKHByb2plY3QpXG4gICAgfTtcblxuICAgIGNvbnN0IHJlbW92ZVByb2plY3QgPSAocHJvamVjdElkKSA9PiB7XG4gICAgICAgIHRvRG8gPSB0b0RvLmZpbHRlcigocHJvamVjdCkgPT4gcHJvamVjdC5nZXRQcm9qZWN0SWQoKSAhPT0gcHJvamVjdElkKVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHtnZXRQcm9qZWN0LCBnZXRQcm9qZWN0cywgYWRkUHJvamVjdCwgcmVtb3ZlUHJvamVjdH1cbn07XG5cbmV4cG9ydCB7VGFzaywgUHJvamVjdCwgVG9Eb30iLCJpbXBvcnQge1Rhc2ssIFByb2plY3QsIFRvRG99IGZyb20gJy4vaW5kZXgnXG4vLyBJbml0aWFsaXplIFRvLURvIExpc3RcblxuY29uc3QgdG9Eb0xpc3QgPSBUb0RvKClcblxuXG4vLyBJbml0aWFsaXplIERlZmF1bHQgUHJvamVjdFxuY29uc3QgZGVmYXVsdFByb2plY3QgPSBQcm9qZWN0KCdEZWZhdWx0IFByb2plY3QnKVxuXG5cbi8vIEluaXRpYWxpemUgRm9ybSBEZWZhdWx0c1xuY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlLWRhdGUnKVxuY29uc3QgdG9kYXlEYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbnRhc2tEYXRlLnZhbHVlID0gdG9kYXlEYXRlO1xuXG5cbi8vIFRhc2sgVUlcblxuZnVuY3Rpb24gY3JlYXRlVGFzaygpIHtcbiAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpLnZhbHVlXG4gICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlLWRhdGUnKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmlvcml0eScpLnZhbHVlXG4gICAgY29uc3QgdGFza0NoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpLmNoZWNrZWRcbiAgICBsZXQgdGFza1N0YXR1c1xuICAgIGlmICh0YXNrQ2hlY2tib3gpIHtcbiAgICAgICAgdGFza1N0YXR1cyA9ICdDb21wbGV0ZSdcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXNrU3RhdHVzID0gJ0luY29tcGxldGUnXG4gICAgfVxuICAgIGNvbnN0IHRhc2tJZCA9IHNlbGYuY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdUYXNrID0gVGFzayh0YXNrVGl0bGUsIHRhc2tEZXNjcmlwdGlvbiwgdGFza0RhdGUsIHRhc2tQcmlvcml0eSwgdGFza1N0YXR1cywgdGFza0lkKVxuICAgIHJldHVybiBuZXdUYXNrXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRhc2soKSB7XG4gICAgY29uc3QgdGFza1RvRWRpdCA9IGRlZmF1bHRQcm9qZWN0LmdldFRhc2sodGFza0lkKVxuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXRpdGxlJykudmFsdWVcbiAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1kZXNjcmlwdGlvbicpLnZhbHVlXG4gICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1kdWUtZGF0ZScpLnZhbHVlXG4gICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcHJpb3JpdHknKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXN0YXR1cycpLmNoZWNrZWRcblxuICAgIHRhc2tUb0VkaXQuc2V0VGl0bGUodGFza1RpdGxlKVxuICAgIHRhc2tUb0VkaXQuc2V0RGVzY3JpcHRpb24odGFza0Rlc2NyaXB0aW9uKVxuICAgIHRhc2tUb0VkaXQuc2V0RGF0ZSh0YXNrRGF0ZSlcbiAgICB0YXNrVG9FZGl0LnNldFByaW9yaXR5KHRhc2tQcmlvcml0eSlcbiAgICBpZiAodGFza0NoZWNrYm94KSB7XG4gICAgICAgIHRhc2tUb0VkaXQuc2V0U3RhdHVzKCdDb21wbGV0ZScpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFza1RvRWRpdC5zZXRTdGF0dXMoJ0luY29tcGxldGUnKVxuICAgIH0gXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2tVSSh0YXNrKSB7XG4gICAgY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpXG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZChcInRhc2tcIilcbiAgICB0YXNrRGl2LmlkID0gdGFzay5nZXRJZCgpXG5cbiAgICBjb25zdCBmaXJzdFRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBmaXJzdFRhc2tEaXYuY2xhc3NMaXN0LmFkZChcImZpcnN0LXRhc2stZWxlbWVudHNcIilcblxuICAgIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ0xvdycpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBncmVlbic7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ01lZGl1bScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBvcmFuZ2UnXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCByZWQnXG4gICAgfVxuXG4gICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0NvbXBsZXRlJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLm9wYWNpdHkgPSAnMC41J1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSAnSW5jb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjdGl5ID0gJzEnXG4gICAgfVxuXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKFwidGl0bGVcIilcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRhc2suZ2V0VGl0bGUoKVxuXG4gICAgY29uc3QgbGFzdFRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsYXN0VGFza0Rpdi5jbGFzc0xpc3QuYWRkKFwibGFzdC10YXNrLWVsZW1lbnRzXCIpO1xuXG4gICAgY29uc3QgZGF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRhdGVEaXYuY2xhc3NMaXN0LmFkZCgnZHVlLWRhdGUnKTtcbiAgICBkYXRlRGl2LnRleHRDb250ZW50ID0gdGFzay5nZXREYXRlKClcblxuICAgIGNvbnN0IGVkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgZWRpdC5jbGFzc0xpc3QuYWRkKFwiZWRpdFwiLCBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpO1xuICAgIGVkaXQudGV4dENvbnRlbnQgPSAnZWRpdCc7XG5cbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWxldGVcIiwgXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSAnZGVsZXRlJztcblxuICAgIGZpcnN0VGFza0Rpdi5hcHBlbmQodGl0bGUpXG4gICAgbGFzdFRhc2tEaXYuYXBwZW5kKGRhdGVEaXYsIGVkaXQsIGRlbGV0ZUJ0bilcbiAgICB0YXNrRGl2LmFwcGVuZChmaXJzdFRhc2tEaXYsIGxhc3RUYXNrRGl2KVxuICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZCh0YXNrRGl2KVxufTtcblxuZnVuY3Rpb24gdXBkYXRlVGFza1VJKGlkKSB7XG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxuICAgIGNvbnN0IHRhc2sgPSBkZWZhdWx0UHJvamVjdC5nZXRUYXNrKGlkKVxuXG4gICAgY29uc3QgdGFza1RpdGxlID0gdGFza0Rpdi5jaGlsZE5vZGVzWzBdXG4gICAgdGFza1RpdGxlLnRleHRDb250ZW50ID0gdGFzay5nZXRUaXRsZSgpXG5cbiAgICBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdMb3cnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgZ3JlZW4nO1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdNZWRpdW0nKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgb3JhbmdlJztcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIHJlZCc7XG4gICAgfVxuXG4gICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0NvbXBsZXRlJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLm9wYWNpdHkgPSAnMC41JztcbiAgICB9IGVsc2UgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0luY29tcGxldGUnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUub3BhY2l0eSA9ICcxJztcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdGFza0R1ZURhdGUgPSB0YXNrRGl2LmNoaWxkTm9kZXNbMV0uY2hpbGROb2Rlc1swXVxuICAgIHRhc2tEdWVEYXRlLnRleHRDb250ZW50ID0gdGFzay5nZXREYXRlKClcbn1cblxuXG4vLyBUYXNrIEV2ZW50IExpc3RlbmVyc1xuXG5sZXQgdGFza0lkIC8vIHRoZSB2YXJpYWJsZSB0byBhY2Nlc3MgYSBzcGVjaWZpYyB0YXNrIGlkIGZvciBlZGl0aW5nXG5cbmNvbnN0IHRhc2tzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKVxudGFza3NEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyAgIFxuXG4gICAgLy8gRWRpdFxuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKFwic3BhblwiKSAmJiBlLnRhcmdldC50ZXh0Q29udGVudCA9PSBcImVkaXRcIikge1xuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWZvcm1cIik7XG4gICAgICAgIG9wZW5Gb3JtKGZvcm0pXG5cbiAgICAgICAgY29uc3QgaWQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWRcbiAgICAgICAgY29uc3QgdGFza1RvRWRpdCA9IGRlZmF1bHRQcm9qZWN0LmdldFRhc2soaWQpXG5cbiAgICAgICAgdGFza0lkID0gaWRcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXRpdGxlJylcbiAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtZGVzY3JpcHRpb24nKVxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWR1ZS1kYXRlJylcbiAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcHJpb3JpdHknKVxuICAgICAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1zdGF0dXMnKVxuXG4gICAgICAgIHRhc2tUaXRsZS52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0VGl0bGUoKTtcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnZhbHVlID0gdGFza1RvRWRpdC5nZXREZXNjcmlwdGlvbigpO1xuICAgICAgICB0YXNrRGF0ZS52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0RGF0ZSgpO1xuICAgICAgICB0YXNrUHJpb3JpdHkudmFsdWUgPSB0YXNrVG9FZGl0LmdldFByaW9yaXR5KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGFza1RvRWRpdC5nZXRTdGF0dXMoKSA9PSAnQ29tcGxldGUnKSB7XG4gICAgICAgICAgICB0YXNrQ2hlY2tib3guY2hlY2tlZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhc2tDaGVja2JveC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgfSAgICAgICAgXG5cbiAgICAvLyBEZWxldGUgIFxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJkZWxldGVcIikge1xuICAgICAgICBjb25zdCB0YXNrID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlXG4gICAgICAgIGRlZmF1bHRQcm9qZWN0LnJlbW92ZVRhc2sodGFzay5pZClcbiAgICAgICAgdGFzay5yZW1vdmUoKVxuICAgIFxuXG4gICAgLy8gRGV0YWlscyBCdXR0b25cbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJidXR0b25cIikpIHtcblxuICAgIH1cblxufSk7XG5cbi8vIFRhc2sgQnV0dG9uIEZ1bmN0aW9uYWxpdHlcblxuY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtdGFzaycpO1xuY29uc3QgZWRpdFRhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWRpdC10YXNrJyk7XG5cbmFkZFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG5ld1Rhc2sgPSBjcmVhdGVUYXNrKClcbiAgICBjcmVhdGVUYXNrVUkobmV3VGFzaylcbiAgICBkZWZhdWx0UHJvamVjdC5hZGRUYXNrKG5ld1Rhc2spXG4gICAgY29uc3QgZm9ybUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tY2FyZFwiKTtcbiAgICBmb3JtQ2FyZC5yZXNldCgpO1xuICAgIGNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R1ZS1kYXRlJylcbiAgICBjb25zdCB0b2RheURhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgIHRhc2tEYXRlLnZhbHVlID0gdG9kYXlEYXRlO1xufSlcblxuZWRpdFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHVwZGF0ZVRhc2soKVxuICAgIHVwZGF0ZVRhc2tVSSh0YXNrSWQpXG59KVxuXG5cbi8vIE1vZGFsIEFjdGlvbnM6XG5cbmNvbnN0IG9wZW5Nb2RhbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtbW9kYWwtdGFyZ2V0XVwiKTtcbmNvbnN0IGNsb3NlTW9kYWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWNsb3NlLWJ1dHRvbl1cIik7XG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdmVybGF5XCIpO1xuXG5vcGVuTW9kYWxCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uLmRhdGFzZXQubW9kYWxUYXJnZXQpO1xuICAgICAgICBvcGVuRm9ybShmb3JtKTtcbiAgICB9KVxufSkgXG5cbmNsb3NlTW9kYWxCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGJ1dHRvbi5jbG9zZXN0KFwiLmZvcm1cIilcbiAgICAgICAgY2xvc2VGb3JtKGZvcm0pO1xuICAgIH0pXG59KVxuXG5mdW5jdGlvbiBvcGVuRm9ybShmb3JtKSB7XG4gICAgaWYgKGZvcm0gPT0gbnVsbCkgcmV0dXJuXG4gICAgZm9ybS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VGb3JtKGZvcm0pIHtcbiAgICBpZiAoZm9ybSA9PSBudWxsKSByZXR1cm5cbiAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xufSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpO1xudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwMyk7XG4iXSwibmFtZXMiOlsiVGFzayIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJzdGF0dXMiLCJpZCIsImdldFRpdGxlIiwic2V0VGl0bGUiLCJuZXdUaXRsZSIsImdldERlc2NyaXB0aW9uIiwic2V0RGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsImdldERhdGUiLCJzZXREYXRlIiwibmV3RGF0ZSIsImdldFByaW9yaXR5Iiwic2V0UHJpb3JpdHkiLCJuZXdQcmlvcml0eSIsImdldFN0YXR1cyIsInNldFN0YXR1cyIsIm5ld1N0YXR1cyIsImdldElkIiwic2V0SWQiLCJuZXdJZCIsIlByb2plY3QiLCJwcm9qZWN0VGl0bGUiLCJwcm9qZWN0SWQiLCJwcm9qZWN0IiwiZ2V0VGFza3MiLCJnZXRQcm9qZWN0VGl0bGUiLCJnZXRQcm9qZWN0SWQiLCJzZXRQcm9qZWN0VGl0bGUiLCJzZXRQcm9qZWN0SWQiLCJnZXRUYXNrIiwiZmluZCIsInRhc2siLCJhZGRUYXNrIiwicHVzaCIsInJlbW92ZVRhc2siLCJmaWx0ZXIiLCJUb0RvIiwidG9EbyIsImdldFByb2plY3QiLCJnZXRQcm9qZWN0cyIsImFkZFByb2plY3QiLCJyZW1vdmVQcm9qZWN0IiwiZGVmYXVsdFByb2plY3QiLCJ0YXNrRGF0ZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ0b2RheURhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzbGljZSIsInRhc2tJZCIsInZhbHVlIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidGFyZ2V0IiwibWF0Y2hlcyIsInRleHRDb250ZW50Iiwib3BlbkZvcm0iLCJwYXJlbnROb2RlIiwidGFza1RvRWRpdCIsInRhc2tUaXRsZSIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tQcmlvcml0eSIsInRhc2tDaGVja2JveCIsImNoZWNrZWQiLCJyZW1vdmUiLCJhZGRUYXNrQnV0dG9uIiwiZWRpdFRhc2tCdXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsIm5ld1Rhc2siLCJ0YXNrU3RhdHVzIiwic2VsZiIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJjcmVhdGVUYXNrIiwidGFza3NDb250YWluZXIiLCJ0YXNrRGl2IiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTGlzdCIsImFkZCIsImZpcnN0VGFza0RpdiIsInN0eWxlIiwiYm9yZGVyTGVmdCIsIm9wYWNpdHkiLCJvcGFjdGl5IiwibGFzdFRhc2tEaXYiLCJkYXRlRGl2IiwiZWRpdCIsImRlbGV0ZUJ0biIsImFwcGVuZCIsImNyZWF0ZVRhc2tVSSIsInJlc2V0IiwidXBkYXRlVGFzayIsImNoaWxkTm9kZXMiLCJ1cGRhdGVUYXNrVUkiLCJvcGVuTW9kYWxCdXR0b25zIiwicXVlcnlTZWxlY3RvckFsbCIsImNsb3NlTW9kYWxCdXR0b25zIiwib3ZlcmxheSIsImZvcm0iLCJmb3JFYWNoIiwiYnV0dG9uIiwiZGF0YXNldCIsIm1vZGFsVGFyZ2V0IiwiY2xvc2VzdCIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=