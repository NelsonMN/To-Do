(()=>{"use strict";var t={138:(t,e,n)=>{n.d(e,{IK:()=>s,iQ:()=>d,m8:()=>o});const d=(t,e,n,d,s,o)=>({getTitle:()=>t,setTitle:e=>t=e,getDescription:()=>e,setDescription:t=>e=t,getDate:()=>n,setDate:t=>n=t,getPriority:()=>d,setPriority:t=>d=t,getStatus:()=>s,setStatus:t=>s=t,getId:()=>o,setId:t=>o=t}),s=(t,e)=>{let n=[];return{getTasks:()=>n,getProjectTitle:()=>t,getProjectId:()=>e,setProjectTitle:e=>t=e,setProjectId:t=>e=t,getTask:t=>n.find((e=>e.getId()===t)),addTask:t=>{n.push(t)},removeTask:t=>{n=n.filter((e=>e.getId()!==t))}}},o=()=>{let t=[];return{getProject:e=>t.find((t=>t.getProjectId()===e)),getProjects:()=>t,addProject:e=>{t.push(e)},removeProject:e=>{t=t.filter((t=>t.getProjectId()!==e))}}}},982:(t,e,n)=>{n.d(e,{B:()=>c,z:()=>a});const d=document.querySelectorAll("[data-modal-target]"),s=document.querySelectorAll("[data-close-button]"),o=document.getElementById("overlay");function c(t){null!=t&&(t.classList.add("active"),o.classList.add("active"))}function a(t){null!=t&&(t.classList.remove("active"),o.classList.remove("active"))}d.forEach((t=>{t.addEventListener("click",(()=>{c(document.querySelector(t.dataset.modalTarget))}))})),s.forEach((t=>{t.addEventListener("click",(()=>{a(t.closest(".form"))}))}))},803:(t,e,n)=>{var d=n(138),s=n(982);const o=(0,d.m8)(),c=(0,d.IK)("Default Project");o.addProject(c);const a=document.getElementById("due-date"),i=(new Date).toISOString().slice(0,10);a.value=i;const l=document.querySelector(".add-project"),r=document.getElementById("add-project"),u=document.querySelector(".set-new-project-btn"),m=document.querySelector(".cancel-new-project-btn"),g=document.getElementById("project-title-input");l.addEventListener("click",(()=>{r.classList.toggle("hidden"),l.classList.toggle("hidden")})),u.addEventListener("click",(()=>{const t=function(){const t=g.value,e=self.crypto.randomUUID();return(0,d.IK)(t,e)}();o.addProject(t),function(t){const e=document.querySelector(".projects"),n=document.createElement("div"),d=document.getElementById("add-project");n.classList.add("project","highlight");const s=document.createElement("div");s.classList.add("project-title-div","high-light");const o=document.createElement("span");o.classList.add("project-title","high-light"),o.textContent=t.getProjectTitle();const c=document.createElement("input");c.classList.add("edit-project-title","hidden"),o.type="text";const a=document.createElement("div");a.classList.add("edit-project-buttons");const i=document.createElement("span");i.classList.add("edit-project","material-icons-outlined"),i.textContent="edit";const l=document.createElement("span");l.classList.add("delete-project","material-icons-outlined"),l.textContent="delete";const r=document.createElement("span");r.classList.add("edit-project-btn","material-icons-outlined","hidden"),r.textContent="check";const u=document.createElement("span");u.classList.add("cancel-project-btn","material-icons-outlined","hidden"),u.textContent="cancel",n.append(s,a),s.append(o,c),a.append(i,l,r,u),e.insertBefore(n,d)}(t),r.classList.toggle("hidden"),l.classList.toggle("hidden"),g.value=""})),m.addEventListener("click",(()=>{r.classList.toggle("hidden"),l.classList.toggle("hidden"),g.value=""}));const p=document.querySelector(".projects"),y=document.querySelectorAll(".project"),E="\n    transform: scale(1.01);\n    transition: 0.2s;\n    box-shadow: 5px 5px 5px #bcbcbc;\n    ";let v;p.addEventListener("click",(t=>{})),p.addEventListener("click",(t=>{y.forEach((t=>{t.classList.contains("high-light")&&(t.removeAttribute("style"),t.classList.remove("selected"))})),t.target.matches("div")&&t.target.classList.contains("project")?(t.target.style.cssText=E,t.target.classList.add("selected")):t.target.matches("div")&&t.target.classList.contains("project-title-div")&&t.target.classList.contains("high-light")?(t.target.parentNode.style.cssText=E,t.target.parentNode.classList.add("selected")):t.target.matches("span")&&t.target.classList.contains("project-title")&&t.target.classList.contains("high-light")&&(t.target.parentNode.parentNode.style.cssText=E,t.target.parentNode.parentNode.classList.add("selected"))})),document.querySelector(".tasks").addEventListener("click",(t=>{if(t.target.matches("span")&&"edit"==t.target.textContent){const e=document.querySelector("#edit-form");(0,s.B)(e);const n=t.target.parentNode.parentNode.id;v=n;const d=document.getElementById("edit-title"),o=document.getElementById("edit-description"),c=document.getElementById("edit-due-date"),a=document.getElementById("edit-priority"),i=document.getElementById("edit-status");d.value=taskToEdit.getTitle(),o.value=taskToEdit.getDescription(),c.value=taskToEdit.getDate(),a.value=taskToEdit.getPriority(),"Complete"==taskToEdit.getStatus()?i.checked=!0:i.checked=!1}else if(t.target.matches("span")&&"delete"==t.target.textContent){const e=t.target.parentNode.parentNode;c.removeTask(e.id),e.remove()}else if(t.target.matches("button")&&"Details"==t.target.textContent){const e=t.target.parentNode.parentNode.id,n=c.getTask(e);v=e;const d=document.getElementById("task-title-output"),o=document.getElementById("task-due-date-output"),a=document.getElementById("task-priority-output"),i=document.getElementById("task-status-output"),l=document.getElementById("task-details-output");d.textContent=n.getTitle(),o.textContent=n.getDate(),a.textContent=n.getPriority(),i.textContent=n.getStatus(),l.textContent=n.getDescription();const r=document.getElementById("task-details");(0,s.B)(r),document.querySelectorAll("[data-close-button]").forEach((t=>{t.addEventListener("click",(()=>{const e=t.closest("#task-details");(0,s.z)(e)}))}))}}));const L=document.querySelector(".add-task"),h=document.querySelector(".edit-task");L.addEventListener("click",(t=>{t.preventDefault();const e=function(t){const e=document.getElementById("title").value,n=document.getElementById("description").value,s=document.getElementById("due-date").value,o=document.getElementById("priority").value;let c;c=document.getElementById("status").checked?"Complete":"Incomplete";const a=self.crypto.randomUUID();return(0,d.iQ)(e,n,s,o,c,a)}();!function(t){const e=document.querySelector(".tasks"),n=document.createElement("div");n.classList.add("task"),n.id=t.getId();const d=document.createElement("div");d.classList.add("first-task-elements"),"Low"==t.getPriority()?n.style.borderLeft="5px solid green":"Medium"==t.getPriority()?n.style.borderLeft="5px solid orange":n.style.borderLeft="5px solid red","Complete"==t.getStatus()?n.style.opacity="0.5":"Incomplete"==t.getStatus()&&(n.style.opactiy="1");const s=document.createElement("div");s.classList.add("title"),s.textContent=t.getTitle();const o=document.createElement("div");o.classList.add("last-task-elements");const c=document.createElement("button");c.textContent="Details",c.classList.add("details");const a=document.createElement("div");a.classList.add("due-date"),a.textContent=t.getDate();const i=document.createElement("span");i.classList.add("edit","material-icons-outlined"),i.textContent="edit";const l=document.createElement("span");l.classList.add("delete","material-icons-outlined"),l.textContent="delete",d.append(s),o.append(c,a,i,l),n.append(d,o),e.append(n)}(e),c.addTask(e),document.querySelector(".form-card").reset();const n=document.getElementById("due-date"),s=(new Date).toISOString().slice(0,10);n.value=s})),h.addEventListener("click",(t=>{t.preventDefault(),function(t){const e=c.getTask(v),n=document.getElementById("edit-title").value,d=document.getElementById("edit-description").value,s=document.getElementById("edit-due-date").value,o=document.getElementById("edit-priority").value,a=document.getElementById("edit-status").checked;e.setTitle(n),e.setDescription(d),e.setDate(s),e.setPriority(o),a?e.setStatus("Complete"):e.setStatus("Incomplete")}(),function(t){const e=document.getElementById(t),n=c.getTask(t);e.childNodes[0].textContent=n.getTitle(),"Low"==n.getPriority()?e.style.borderLeft="5px solid green":"Medium"==n.getPriority()?e.style.borderLeft="5px solid orange":e.style.borderLeft="5px solid red","Complete"==n.getStatus()?e.style.opacity="0.5":"Incomplete"==n.getStatus()&&(e.style.opacity="1"),e.childNodes[1].childNodes[1].textContent=n.getDate()}(v)}))}},e={};function n(d){var s=e[d];if(void 0!==s)return s.exports;var o=e[d]={exports:{}};return t[d](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var d in e)n.o(e,d)&&!n.o(t,d)&&Object.defineProperty(t,d,{enumerable:!0,get:e[d]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(138),n(803),n(982)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsSUFPVixPQUhBRSxFQUFvQkwsR0FBVUksRUFBUUEsRUFBT0QsUUFBU0osR0FHL0NLLEVBQU9ELFFDcEJmSixFQUFvQk8sRUFBSSxDQUFDSCxFQUFTSSxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hSLEVBQW9CVSxFQUFFRixFQUFZQyxLQUFTVCxFQUFvQlUsRUFBRU4sRUFBU0ssSUFDNUVFLE9BQU9DLGVBQWVSLEVBQVNLLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRVQsRUFBb0JVLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NHbEZoQixFQUFvQixLQUNwQkEsRUFBb0IsS0FDTUEsRUFBb0IsTSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvLWRvLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvLWRvLy4vc3JjL21vZGFsLmpzIiwid2VicGFjazovL3RvLWRvLy4vc3JjL3VzZXItaW50ZXJmYWNlLmpzIiwid2VicGFjazovL3RvLWRvL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3RvLWRvL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvLWRvL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBUYXNrID0gKHRpdGxlLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHN0YXR1cywgaWQpID0+IHtcblxuICAgIGNvbnN0IGdldFRpdGxlID0gKCkgPT4gdGl0bGU7XG4gICAgY29uc3Qgc2V0VGl0bGUgPSBuZXdUaXRsZSA9PiB0aXRsZSA9IG5ld1RpdGxlO1xuICAgIGNvbnN0IGdldERlc2NyaXB0aW9uID0gKCkgPT4gZGVzY3JpcHRpb247XG4gICAgY29uc3Qgc2V0RGVzY3JpcHRpb249IG5ld0Rlc2NyaXB0aW9uID0+IGRlc2NyaXB0aW9uID0gbmV3RGVzY3JpcHRpb247XG4gICAgY29uc3QgZ2V0RGF0ZSA9ICgpID0+IGR1ZURhdGU7XG4gICAgY29uc3Qgc2V0RGF0ZSA9IG5ld0RhdGUgPT4gZHVlRGF0ZSA9IG5ld0RhdGU7XG4gICAgY29uc3QgZ2V0UHJpb3JpdHkgPSAoKSA9PiBwcmlvcml0eTtcbiAgICBjb25zdCBzZXRQcmlvcml0eSA9IG5ld1ByaW9yaXR5ID0+IHByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XG4gICAgY29uc3QgZ2V0U3RhdHVzID0gKCkgPT4gc3RhdHVzO1xuICAgIGNvbnN0IHNldFN0YXR1cyA9IG5ld1N0YXR1cyA9PiBzdGF0dXMgPSBuZXdTdGF0dXM7XG4gICAgY29uc3QgZ2V0SWQgPSAoKSA9PiBpZDtcbiAgICBjb25zdCBzZXRJZCA9IG5ld0lkID0+IGlkID0gbmV3SWQ7XG5cbiAgICByZXR1cm4ge2dldFRpdGxlLCBzZXRUaXRsZSwgZ2V0RGVzY3JpcHRpb24sIHNldERlc2NyaXB0aW9uLCBnZXREYXRlLCBzZXREYXRlLCBnZXRQcmlvcml0eSwgc2V0UHJpb3JpdHksIGdldFN0YXR1cywgc2V0U3RhdHVzLCBnZXRJZCwgc2V0SWR9XG59O1xuXG5cbmNvbnN0IFByb2plY3QgPSAocHJvamVjdFRpdGxlLCBwcm9qZWN0SWQpID0+IHtcblxuICAgIGxldCBwcm9qZWN0ID0gW107XG5cbiAgICBjb25zdCBnZXRQcm9qZWN0VGl0bGUgPSAoKSA9PiBwcm9qZWN0VGl0bGU7XG4gICAgY29uc3Qgc2V0UHJvamVjdFRpdGxlID0gbmV3VGl0bGUgPT4gcHJvamVjdFRpdGxlID0gbmV3VGl0bGU7XG4gICAgY29uc3QgZ2V0UHJvamVjdElkID0gKCkgPT4gcHJvamVjdElkO1xuICAgIGNvbnN0IHNldFByb2plY3RJZCA9IG5ld0lkID0+IHByb2plY3RJZCA9IG5ld0lkO1xuXG4gICAgY29uc3QgZ2V0VGFzayA9IChpZCkgPT4ge1xuICAgICAgICByZXR1cm4gcHJvamVjdC5maW5kKCh0YXNrKSA9PiB0YXNrLmdldElkKCkgPT09IGlkKVxuICAgIH07XG5cbiAgICBjb25zdCBnZXRUYXNrcyA9ICgpID0+IHByb2plY3Q7XG5cbiAgICBjb25zdCBhZGRUYXNrID0gKHRhc2spID0+IHtcbiAgICAgICAgcHJvamVjdC5wdXNoKHRhc2spXG4gICAgfTtcblxuICAgIGNvbnN0IHJlbW92ZVRhc2sgPSAoaWQpID0+IHtcbiAgICAgICAgcHJvamVjdCA9IHByb2plY3QuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmdldElkKCkgIT09IGlkKVxuICAgIH07XG5cbiAgICByZXR1cm4ge2dldFRhc2tzLCBnZXRQcm9qZWN0VGl0bGUsIGdldFByb2plY3RJZCwgc2V0UHJvamVjdFRpdGxlLCBzZXRQcm9qZWN0SWQsIGdldFRhc2ssIGFkZFRhc2ssIHJlbW92ZVRhc2t9XG59O1xuXG5cbmNvbnN0IFRvRG8gPSAoKSA9PiB7XG4gICAgXG4gICAgbGV0IHRvRG8gPSBbXTtcbiAgICBcbiAgICBjb25zdCBnZXRQcm9qZWN0ID0gKHByb2plY3RJZCkgPT4ge1xuICAgICAgICByZXR1cm4gdG9Eby5maW5kKChwcm9qZWN0KSA9PiBwcm9qZWN0LmdldFByb2plY3RJZCgpID09PSBwcm9qZWN0SWQpXG4gICAgfTtcblxuICAgIGNvbnN0IGdldFByb2plY3RzID0gKCkgPT4gdG9EbztcblxuICAgIGNvbnN0IGFkZFByb2plY3QgPSAocHJvamVjdCkgPT4ge1xuICAgICAgICB0b0RvLnB1c2gocHJvamVjdClcbiAgICB9O1xuXG4gICAgY29uc3QgcmVtb3ZlUHJvamVjdCA9IChwcm9qZWN0SWQpID0+IHtcbiAgICAgICAgdG9EbyA9IHRvRG8uZmlsdGVyKChwcm9qZWN0KSA9PiBwcm9qZWN0LmdldFByb2plY3RJZCgpICE9PSBwcm9qZWN0SWQpXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4ge2dldFByb2plY3QsIGdldFByb2plY3RzLCBhZGRQcm9qZWN0LCByZW1vdmVQcm9qZWN0fVxufTtcblxuZXhwb3J0IHtUYXNrLCBQcm9qZWN0LCBUb0RvfSIsImNvbnN0IG9wZW5Nb2RhbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtbW9kYWwtdGFyZ2V0XVwiKTtcbmNvbnN0IGNsb3NlTW9kYWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLWNsb3NlLWJ1dHRvbl1cIik7XG5jb25zdCBvdmVybGF5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJvdmVybGF5XCIpO1xuXG5vcGVuTW9kYWxCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYnV0dG9uLmRhdGFzZXQubW9kYWxUYXJnZXQpO1xuICAgICAgICBvcGVuRm9ybShmb3JtKTtcbiAgICB9KVxufSkgXG5cbmNsb3NlTW9kYWxCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGJ1dHRvbi5jbG9zZXN0KFwiLmZvcm1cIilcbiAgICAgICAgY2xvc2VGb3JtKGZvcm0pO1xuICAgIH0pXG59KVxuXG5mdW5jdGlvbiBvcGVuRm9ybShmb3JtKSB7XG4gICAgaWYgKGZvcm0gPT0gbnVsbCkgcmV0dXJuXG4gICAgZm9ybS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbn1cblxuZnVuY3Rpb24gY2xvc2VGb3JtKGZvcm0pIHtcbiAgICBpZiAoZm9ybSA9PSBudWxsKSByZXR1cm5cbiAgICBmb3JtLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xufVxuXG5leHBvcnQge29wZW5Gb3JtLCBjbG9zZUZvcm19IiwiaW1wb3J0IHtUYXNrLCBQcm9qZWN0LCBUb0RvfSBmcm9tICcuL2luZGV4J1xuaW1wb3J0IHtvcGVuRm9ybSwgY2xvc2VGb3JtfSBmcm9tICcuL21vZGFsJ1xuXG5cbi8vIEluaXRpYWxpemUgVG8tRG8gTGlzdFxuXG5jb25zdCB0b0RvTGlzdCA9IFRvRG8oKVxuXG5cbi8vIEluaXRpYWxpemUgRGVmYXVsdCBQcm9qZWN0XG5jb25zdCBkZWZhdWx0UHJvamVjdCA9IFByb2plY3QoJ0RlZmF1bHQgUHJvamVjdCcpXG50b0RvTGlzdC5hZGRQcm9qZWN0KGRlZmF1bHRQcm9qZWN0KVxuXG5cbi8vIEluaXRpYWxpemUgRm9ybSBEZWZhdWx0c1xuY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlLWRhdGUnKVxuY29uc3QgdG9kYXlEYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbnRhc2tEYXRlLnZhbHVlID0gdG9kYXlEYXRlO1xuXG5cbi8vIFByb2plY3QgVUlcblxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdCgpIHtcbiAgIGNvbnN0IHByb2plY3RUaXRsZSA9IHByb2plY3RUaXRsZUlucHV0LnZhbHVlXG4gICBjb25zdCBwcm9qZWN0SWQgPSBzZWxmLmNyeXB0by5yYW5kb21VVUlEKCk7XG5cbiAgIGNvbnN0IG5ld1Byb2plY3QgPSBQcm9qZWN0KHByb2plY3RUaXRsZSwgcHJvamVjdElkKVxuICAgcmV0dXJuIG5ld1Byb2plY3Rcbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJvamVjdFVJKHByb2plY3QpIHtcbiAgICBjb25zdCBwcm9qZWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdHNcIilcbiAgICBjb25zdCBwcm9qZWN0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBjb25zdCBhZGRQcm9qZWN0RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtcHJvamVjdFwiKVxuICAgIHByb2plY3REaXYuY2xhc3NMaXN0LmFkZCgncHJvamVjdCcsICdoaWdobGlnaHQnKVxuXG4gICAgY29uc3QgcHJvamVjdFRpdGxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBwcm9qZWN0VGl0bGVEaXYuY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGl0bGUtZGl2XCIsIFwiaGlnaC1saWdodFwiKVxuXG4gICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgcHJvamVjdFRpdGxlLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRpdGxlXCIsIFwiaGlnaC1saWdodFwiKVxuICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3QuZ2V0UHJvamVjdFRpdGxlKClcblxuICAgIGNvbnN0IHByb2plY3RUaXRsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxuICAgIHByb2plY3RUaXRsZUlucHV0LmNsYXNzTGlzdC5hZGQoXCJlZGl0LXByb2plY3QtdGl0bGVcIiwgXCJoaWRkZW5cIilcbiAgICBwcm9qZWN0VGl0bGUudHlwZSA9IFwidGV4dFwiXG5cbiAgICBjb25zdCBwcm9qZWN0RWRpdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgcHJvamVjdEVkaXREaXYuY2xhc3NMaXN0LmFkZChcImVkaXQtcHJvamVjdC1idXR0b25zXCIpXG5cbiAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgZWRpdEJ0bi5jbGFzc0xpc3QuYWRkKFwiZWRpdC1wcm9qZWN0XCIsIFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIilcbiAgICBlZGl0QnRuLnRleHRDb250ZW50ID0gJ2VkaXQnXG5cbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcImRlbGV0ZS1wcm9qZWN0XCIsIFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIilcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSAnZGVsZXRlJ1xuXG4gICAgY29uc3QgY2hlY2tCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICBjaGVja0J0bi5jbGFzc0xpc3QuYWRkKFwiZWRpdC1wcm9qZWN0LWJ0blwiLCBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIsIFwiaGlkZGVuXCIpXG4gICAgY2hlY2tCdG4udGV4dENvbnRlbnQgPSAnY2hlY2snXG5cbiAgICBjb25zdCBjYW5jZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICBjYW5jZWxCdG4uY2xhc3NMaXN0LmFkZChcImNhbmNlbC1wcm9qZWN0LWJ0blwiLCBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIsIFwiaGlkZGVuXCIpXG4gICAgY2FuY2VsQnRuLnRleHRDb250ZW50ID0gJ2NhbmNlbCdcblxuICAgIHByb2plY3REaXYuYXBwZW5kKHByb2plY3RUaXRsZURpdiwgcHJvamVjdEVkaXREaXYpXG4gICAgcHJvamVjdFRpdGxlRGl2LmFwcGVuZChwcm9qZWN0VGl0bGUsIHByb2plY3RUaXRsZUlucHV0KVxuICAgIHByb2plY3RFZGl0RGl2LmFwcGVuZChlZGl0QnRuLCBkZWxldGVCdG4sIGNoZWNrQnRuLCBjYW5jZWxCdG4pXG4gICAgcHJvamVjdHNDb250YWluZXIuaW5zZXJ0QmVmb3JlKHByb2plY3REaXYsIGFkZFByb2plY3REaXYpXG59XG5cbi8vIEFkZCBQcm9qZWN0IEV2ZW50IExpc3RlbmVyc1xuY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hZGQtcHJvamVjdCcpXG5jb25zdCBhZGRQcm9qZWN0RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC1wcm9qZWN0JylcbmNvbnN0IHNldFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNldC1uZXctcHJvamVjdC1idG5cIilcbmNvbnN0IGNhbmNlbFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhbmNlbC1uZXctcHJvamVjdC1idG5cIilcbmNvbnN0IHByb2plY3RUaXRsZUlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LXRpdGxlLWlucHV0XCIpXG5cbmFkZFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgXG4gICAgYWRkUHJvamVjdERpdi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxuICAgIGFkZFByb2plY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbn0pXG5cbnNldFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29uc3QgbmV3UHJvamVjdCA9IGNyZWF0ZVByb2plY3QoKVxuICAgIHRvRG9MaXN0LmFkZFByb2plY3QobmV3UHJvamVjdClcbiAgICBjcmVhdGVQcm9qZWN0VUkobmV3UHJvamVjdClcblxuXG4gICAgYWRkUHJvamVjdERpdi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxuICAgIGFkZFByb2plY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICBwcm9qZWN0VGl0bGVJbnB1dC52YWx1ZSA9ICcnXG59KVxuXG5jYW5jZWxQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGFkZFByb2plY3REaXYuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICBhZGRQcm9qZWN0QnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgcHJvamVjdFRpdGxlSW5wdXQudmFsdWUgPSAnJ1xufSlcblxuXG4vLyBEeW5hbWljIFByb2plY3QgRXZlbnQgTGlzdGVuZXJzXG5jb25zdCBwcm9qZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0cycpXG5jb25zdCBwcm9qZWN0RGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgKCcucHJvamVjdCcpXG5jb25zdCBwcm9qZWN0U3R5bGUgPSBgXG4gICAgdHJhbnNmb3JtOiBzY2FsZSgxLjAxKTtcbiAgICB0cmFuc2l0aW9uOiAwLjJzO1xuICAgIGJveC1zaGFkb3c6IDVweCA1cHggNXB4ICNiY2JjYmM7XG4gICAgYFxuXG5mdW5jdGlvbiByZW1vdmVQcm9qZWN0U3R5bGluZygpIHtcbiAgICBwcm9qZWN0RGl2cy5mb3JFYWNoKGUgPT4ge1xuICAgICAgICBpZiAoZS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZ2gtbGlnaHQnKSkge1xuICAgICAgICAgICAgZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJylcbiAgICAgICAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxuICAgICAgICB9XG4gICAgfSlcbn1cblxucHJvamVjdHMuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge30pXG5cbnByb2plY3RzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblxuICAgIC8vIEhvdmVyIC8gU2VsZWN0aW9uIHN0eWxpbmdcbiAgICByZW1vdmVQcm9qZWN0U3R5bGluZygpXG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJkaXZcIikgJiYgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm9qZWN0JykpIHtcbiAgICAgICAgZS50YXJnZXQuc3R5bGUuY3NzVGV4dCA9IHByb2plY3RTdHlsZVxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpXG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5tYXRjaGVzKFwiZGl2XCIpICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJvamVjdC10aXRsZS1kaXYnKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZ2gtbGlnaHQnKSkge1xuICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnN0eWxlLmNzc1RleHQgPSBwcm9qZWN0U3R5bGVcbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpXG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5tYXRjaGVzKFwic3BhblwiKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Byb2plY3QtdGl0bGUnKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZ2gtbGlnaHQnKSkge1xuICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuY3NzVGV4dCA9IHByb2plY3RTdHlsZVxuICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKVxuICAgIH1cblxuICAgIC8vIEVkaXQgUHJvamVjdFxuLy8gICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKFwic3BhblwiKSAmJiBlLnRhcmdldC50ZXh0Q29udGVudCA9PSAnZWRpdCcpIHtcblxuLy8gICAgIH1cbn0pXG5cblxuXG4gICAgICAgIFxuXG4vLyBUYXNrIFVJXG5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2socHJvamVjdCkge1xuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpLnZhbHVlXG4gICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJykudmFsdWVcbiAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWUtZGF0ZScpLnZhbHVlXG4gICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5JykudmFsdWVcbiAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJykuY2hlY2tlZFxuICAgIGxldCB0YXNrU3RhdHVzXG4gICAgaWYgKHRhc2tDaGVja2JveCkge1xuICAgICAgICB0YXNrU3RhdHVzID0gJ0NvbXBsZXRlJ1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tTdGF0dXMgPSAnSW5jb21wbGV0ZSdcbiAgICB9XG4gICAgY29uc3QgdGFza0lkID0gc2VsZi5jcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld1Rhc2sgPSBUYXNrKHRhc2tUaXRsZSwgdGFza0Rlc2NyaXB0aW9uLCB0YXNrRGF0ZSwgdGFza1ByaW9yaXR5LCB0YXNrU3RhdHVzLCB0YXNrSWQpXG4gICAgcmV0dXJuIG5ld1Rhc2tcbn1cblxuZnVuY3Rpb24gdXBkYXRlVGFzayhwcm9qZWN0KSB7XG4gICAgY29uc3QgdGFza1RvRWRpdCA9IGRlZmF1bHRQcm9qZWN0LmdldFRhc2sodGFza0lkKVxuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXRpdGxlJykudmFsdWVcbiAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1kZXNjcmlwdGlvbicpLnZhbHVlXG4gICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1kdWUtZGF0ZScpLnZhbHVlXG4gICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcHJpb3JpdHknKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXN0YXR1cycpLmNoZWNrZWRcblxuICAgIHRhc2tUb0VkaXQuc2V0VGl0bGUodGFza1RpdGxlKVxuICAgIHRhc2tUb0VkaXQuc2V0RGVzY3JpcHRpb24odGFza0Rlc2NyaXB0aW9uKVxuICAgIHRhc2tUb0VkaXQuc2V0RGF0ZSh0YXNrRGF0ZSlcbiAgICB0YXNrVG9FZGl0LnNldFByaW9yaXR5KHRhc2tQcmlvcml0eSlcbiAgICBpZiAodGFza0NoZWNrYm94KSB7XG4gICAgICAgIHRhc2tUb0VkaXQuc2V0U3RhdHVzKCdDb21wbGV0ZScpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFza1RvRWRpdC5zZXRTdGF0dXMoJ0luY29tcGxldGUnKVxuICAgIH0gXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2tVSSh0YXNrKSB7XG4gICAgY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpXG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZChcInRhc2tcIilcbiAgICB0YXNrRGl2LmlkID0gdGFzay5nZXRJZCgpXG5cbiAgICBjb25zdCBmaXJzdFRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBmaXJzdFRhc2tEaXYuY2xhc3NMaXN0LmFkZChcImZpcnN0LXRhc2stZWxlbWVudHNcIilcblxuICAgIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ0xvdycpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBncmVlbic7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ01lZGl1bScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBvcmFuZ2UnXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCByZWQnXG4gICAgfVxuXG4gICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0NvbXBsZXRlJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLm9wYWNpdHkgPSAnMC41J1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSAnSW5jb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjdGl5ID0gJzEnXG4gICAgfVxuXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKFwidGl0bGVcIilcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRhc2suZ2V0VGl0bGUoKVxuXG4gICAgY29uc3QgbGFzdFRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsYXN0VGFza0Rpdi5jbGFzc0xpc3QuYWRkKFwibGFzdC10YXNrLWVsZW1lbnRzXCIpO1xuXG4gICAgY29uc3QgZGV0YWlsc0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgZGV0YWlsc0J0bi50ZXh0Q29udGVudCA9ICdEZXRhaWxzJ1xuICAgIGRldGFpbHNCdG4uY2xhc3NMaXN0LmFkZCgnZGV0YWlscycpXG5cbiAgICBjb25zdCBkYXRlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGF0ZURpdi5jbGFzc0xpc3QuYWRkKCdkdWUtZGF0ZScpO1xuICAgIGRhdGVEaXYudGV4dENvbnRlbnQgPSB0YXNrLmdldERhdGUoKVxuXG4gICAgY29uc3QgZWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBlZGl0LmNsYXNzTGlzdC5hZGQoXCJlZGl0XCIsIFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIik7XG4gICAgZWRpdC50ZXh0Q29udGVudCA9ICdlZGl0JztcblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVwiLCBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpO1xuICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9ICdkZWxldGUnO1xuXG4gICAgZmlyc3RUYXNrRGl2LmFwcGVuZCh0aXRsZSlcbiAgICBsYXN0VGFza0Rpdi5hcHBlbmQoZGV0YWlsc0J0biwgZGF0ZURpdiwgZWRpdCwgZGVsZXRlQnRuKVxuICAgIHRhc2tEaXYuYXBwZW5kKGZpcnN0VGFza0RpdiwgbGFzdFRhc2tEaXYpXG4gICAgdGFza3NDb250YWluZXIuYXBwZW5kKHRhc2tEaXYpXG59O1xuXG5mdW5jdGlvbiB1cGRhdGVUYXNrVUkoaWQpIHtcbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpXG4gICAgY29uc3QgdGFzayA9IGRlZmF1bHRQcm9qZWN0LmdldFRhc2soaWQpXG5cbiAgICBjb25zdCB0YXNrVGl0bGUgPSB0YXNrRGl2LmNoaWxkTm9kZXNbMF1cbiAgICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLmdldFRpdGxlKClcblxuICAgIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ0xvdycpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBncmVlbic7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ01lZGl1bScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBvcmFuZ2UnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgcmVkJztcbiAgICB9XG5cbiAgICBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSAnQ29tcGxldGUnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUub3BhY2l0eSA9ICcwLjUnO1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSAnSW5jb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IHRhc2tEaXYuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzFdXG4gICAgdGFza0R1ZURhdGUudGV4dENvbnRlbnQgPSB0YXNrLmdldERhdGUoKVxufVxuXG5cbi8vIER5bmFtaWMgVGFzayBFdmVudCBMaXN0ZW5lcnNcblxubGV0IHRhc2tJZCAvLyB0aGUgdmFyaWFibGUgdG8gYWNjZXNzIGEgc3BlY2lmaWMgdGFzayBpZCBmb3IgZWRpdGluZ1xuXG5jb25zdCB0YXNrc0RpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3NcIilcbnRhc2tzRGl2LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHsgICBcblxuICAgIC8vIEVkaXRcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJlZGl0XCIpIHtcbiAgICAgICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1mb3JtXCIpO1xuICAgICAgICBvcGVuRm9ybShmb3JtKVxuXG4gICAgICAgIGNvbnN0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkXG5cbiAgICAgICAgdGFza0lkID0gaWRcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXRpdGxlJylcbiAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtZGVzY3JpcHRpb24nKVxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWR1ZS1kYXRlJylcbiAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcHJpb3JpdHknKVxuICAgICAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1zdGF0dXMnKVxuXG4gICAgICAgIHRhc2tUaXRsZS52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0VGl0bGUoKTtcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnZhbHVlID0gdGFza1RvRWRpdC5nZXREZXNjcmlwdGlvbigpO1xuICAgICAgICB0YXNrRGF0ZS52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0RGF0ZSgpO1xuICAgICAgICB0YXNrUHJpb3JpdHkudmFsdWUgPSB0YXNrVG9FZGl0LmdldFByaW9yaXR5KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGFza1RvRWRpdC5nZXRTdGF0dXMoKSA9PSAnQ29tcGxldGUnKSB7XG4gICAgICAgICAgICB0YXNrQ2hlY2tib3guY2hlY2tlZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhc2tDaGVja2JveC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgfSAgICAgICAgXG5cbiAgICAvLyBEZWxldGUgIFxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJkZWxldGVcIikge1xuICAgICAgICBjb25zdCB0YXNrID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlXG4gICAgICAgIGRlZmF1bHRQcm9qZWN0LnJlbW92ZVRhc2sodGFzay5pZClcbiAgICAgICAgdGFzay5yZW1vdmUoKVxuICAgIFxuXG4gICAgLy8gRGV0YWlscyBCdXR0b25cbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJidXR0b25cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gJ0RldGFpbHMnKSB7XG4gICAgICAgIGNvbnN0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkXG4gICAgICAgIGNvbnN0IHRhc2sgPSBkZWZhdWx0UHJvamVjdC5nZXRUYXNrKGlkKVxuXG4gICAgICAgIHRhc2tJZCA9IGlkXG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10aXRsZS1vdXRwdXRcIilcbiAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1kdWUtZGF0ZS1vdXRwdXRcIilcbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stcHJpb3JpdHktb3V0cHV0XCIpXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1zdGF0dXMtb3V0cHV0XCIpXG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGV0YWlscy1vdXRwdXRcIilcblxuXG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gdGFzay5nZXRUaXRsZSgpXG4gICAgICAgIGRhdGUudGV4dENvbnRlbnQgPSB0YXNrLmdldERhdGUoKVxuICAgICAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IHRhc2suZ2V0UHJpb3JpdHkoKVxuICAgICAgICBzdGF0dXMudGV4dENvbnRlbnQgPSB0YXNrLmdldFN0YXR1cygpXG4gICAgICAgIGRldGFpbHMudGV4dENvbnRlbnQgPSB0YXNrLmdldERlc2NyaXB0aW9uKClcblxuICAgICAgICBjb25zdCBkZXRhaWxzTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGV0YWlsc1wiKTtcbiAgICAgICAgb3BlbkZvcm0oZGV0YWlsc01vZGFsKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgY2xvc2VNb2RhbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtY2xvc2UtYnV0dG9uXVwiKVxuICAgICAgICBjbG9zZU1vZGFsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gYnV0dG9uLmNsb3Nlc3QoXCIjdGFzay1kZXRhaWxzXCIpXG4gICAgICAgICAgICAgICAgY2xvc2VGb3JtKGZvcm0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbn0pO1xuXG4vLyBUYXNrIEJ1dHRvbiBGdW5jdGlvbmFsaXR5XG5cbmNvbnN0IGFkZFRhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRhc2snKTtcbmNvbnN0IGVkaXRUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdGFzaycpO1xuXG5hZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBuZXdUYXNrID0gY3JlYXRlVGFzaygpXG4gICAgY3JlYXRlVGFza1VJKG5ld1Rhc2spXG4gICAgZGVmYXVsdFByb2plY3QuYWRkVGFzayhuZXdUYXNrKVxuICAgIGNvbnN0IGZvcm1DYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWNhcmRcIik7XG4gICAgZm9ybUNhcmQucmVzZXQoKTtcbiAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWUtZGF0ZScpXG4gICAgY29uc3QgdG9kYXlEYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICB0YXNrRGF0ZS52YWx1ZSA9IHRvZGF5RGF0ZTtcbn0pXG5cbmVkaXRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICB1cGRhdGVUYXNrKClcbiAgICB1cGRhdGVUYXNrVUkodGFza0lkKVxufSkiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oMTM4KTtcbl9fd2VicGFja19yZXF1aXJlX18oODAzKTtcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5ODIpO1xuIl0sIm5hbWVzIjpbIlRhc2siLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5Iiwic3RhdHVzIiwiaWQiLCJnZXRUaXRsZSIsInNldFRpdGxlIiwibmV3VGl0bGUiLCJnZXREZXNjcmlwdGlvbiIsInNldERlc2NyaXB0aW9uIiwibmV3RGVzY3JpcHRpb24iLCJnZXREYXRlIiwic2V0RGF0ZSIsIm5ld0RhdGUiLCJnZXRQcmlvcml0eSIsInNldFByaW9yaXR5IiwibmV3UHJpb3JpdHkiLCJnZXRTdGF0dXMiLCJzZXRTdGF0dXMiLCJuZXdTdGF0dXMiLCJnZXRJZCIsInNldElkIiwibmV3SWQiLCJQcm9qZWN0IiwicHJvamVjdFRpdGxlIiwicHJvamVjdElkIiwicHJvamVjdCIsImdldFRhc2tzIiwiZ2V0UHJvamVjdFRpdGxlIiwiZ2V0UHJvamVjdElkIiwic2V0UHJvamVjdFRpdGxlIiwic2V0UHJvamVjdElkIiwiZ2V0VGFzayIsImZpbmQiLCJ0YXNrIiwiYWRkVGFzayIsInB1c2giLCJyZW1vdmVUYXNrIiwiZmlsdGVyIiwiVG9EbyIsInRvRG8iLCJnZXRQcm9qZWN0IiwiZ2V0UHJvamVjdHMiLCJhZGRQcm9qZWN0IiwicmVtb3ZlUHJvamVjdCIsIm9wZW5Nb2RhbEJ1dHRvbnMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbG9zZU1vZGFsQnV0dG9ucyIsIm92ZXJsYXkiLCJnZXRFbGVtZW50QnlJZCIsIm9wZW5Gb3JtIiwiZm9ybSIsImNsYXNzTGlzdCIsImFkZCIsImNsb3NlRm9ybSIsInJlbW92ZSIsImZvckVhY2giLCJidXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsImRhdGFzZXQiLCJtb2RhbFRhcmdldCIsImNsb3Nlc3QiLCJ0b0RvTGlzdCIsImRlZmF1bHRQcm9qZWN0IiwidGFza0RhdGUiLCJ0b2RheURhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzbGljZSIsInZhbHVlIiwiYWRkUHJvamVjdEJ0biIsImFkZFByb2plY3REaXYiLCJzZXRQcm9qZWN0QnRuIiwiY2FuY2VsUHJvamVjdEJ0biIsInByb2plY3RUaXRsZUlucHV0IiwidG9nZ2xlIiwibmV3UHJvamVjdCIsInNlbGYiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwiY3JlYXRlUHJvamVjdCIsInByb2plY3RzQ29udGFpbmVyIiwicHJvamVjdERpdiIsImNyZWF0ZUVsZW1lbnQiLCJwcm9qZWN0VGl0bGVEaXYiLCJ0ZXh0Q29udGVudCIsInR5cGUiLCJwcm9qZWN0RWRpdERpdiIsImVkaXRCdG4iLCJkZWxldGVCdG4iLCJjaGVja0J0biIsImNhbmNlbEJ0biIsImFwcGVuZCIsImluc2VydEJlZm9yZSIsImNyZWF0ZVByb2plY3RVSSIsInByb2plY3RzIiwicHJvamVjdERpdnMiLCJwcm9qZWN0U3R5bGUiLCJ0YXNrSWQiLCJlIiwiY29udGFpbnMiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwic3R5bGUiLCJjc3NUZXh0IiwicGFyZW50Tm9kZSIsInRhc2tUaXRsZSIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tQcmlvcml0eSIsInRhc2tDaGVja2JveCIsInRhc2tUb0VkaXQiLCJjaGVja2VkIiwiZGF0ZSIsImRldGFpbHMiLCJkZXRhaWxzTW9kYWwiLCJhZGRUYXNrQnV0dG9uIiwiZWRpdFRhc2tCdXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsIm5ld1Rhc2siLCJ0YXNrU3RhdHVzIiwiY3JlYXRlVGFzayIsInRhc2tzQ29udGFpbmVyIiwidGFza0RpdiIsImZpcnN0VGFza0RpdiIsImJvcmRlckxlZnQiLCJvcGFjaXR5Iiwib3BhY3RpeSIsImxhc3RUYXNrRGl2IiwiZGV0YWlsc0J0biIsImRhdGVEaXYiLCJlZGl0IiwiY3JlYXRlVGFza1VJIiwicmVzZXQiLCJ1cGRhdGVUYXNrIiwiY2hpbGROb2RlcyIsInVwZGF0ZVRhc2tVSSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=