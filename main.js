(()=>{"use strict";var t={138:(t,e,n)=>{n.d(e,{IK:()=>s,iQ:()=>d,m8:()=>o});const d=(t,e,n,d,s,o)=>({getTitle:()=>t,setTitle:e=>t=e,getDescription:()=>e,setDescription:t=>e=t,getDate:()=>n,setDate:t=>n=t,getPriority:()=>d,setPriority:t=>d=t,getStatus:()=>s,setStatus:t=>s=t,getId:()=>o,setId:t=>o=t}),s=(t,e)=>{let n=[];return{getTasks:()=>n,getProjectTitle:()=>t,getProjectId:()=>e,setProjectTitle:e=>t=e,setProjectId:t=>e=t,getTask:t=>n.find((e=>e.getId()===t)),addTask:t=>{n.push(t)},removeTask:t=>{n=n.filter((e=>e.getId()!==t))}}},o=()=>{let t=[];return{getProject:e=>t.find((t=>t.getProjectId()===e)),getProjects:()=>t,addProject:e=>{t.push(e)},removeProject:e=>{t=t.filter((t=>t.getProjectId()!==e))}}}},982:(t,e,n)=>{n.d(e,{B:()=>c,z:()=>a});const d=document.querySelectorAll("[data-modal-target]"),s=document.querySelectorAll("[data-close-button]"),o=document.getElementById("overlay");function c(t){null!=t&&(t.classList.add("active"),o.classList.add("active"))}function a(t){null!=t&&(t.classList.remove("active"),o.classList.remove("active"))}d.forEach((t=>{t.addEventListener("click",(()=>{c(document.querySelector(t.dataset.modalTarget))}))})),s.forEach((t=>{t.addEventListener("click",(()=>{a(t.closest(".form"))}))}))},803:(t,e,n)=>{var d=n(138),s=n(982);const o=(0,d.m8)();function c(){const t=u.value,e=self.crypto.randomUUID();return(0,d.IK)(t,e)}function a(t){const e=document.querySelector(".projects"),n=document.createElement("div");n.id=t.getProjectId();const d=document.getElementById("add-project");n.classList.add("project","high-light");const s=document.createElement("div");s.classList.add("project-title-div","high-light");const o=document.createElement("span");o.classList.add("project-title","high-light"),o.textContent=t.getProjectTitle();const c=document.createElement("input");c.classList.add("edit-project-title","high-light","hidden"),o.type="text";const a=document.createElement("div");a.classList.add("edit-project-buttons");const r=document.createElement("span");r.classList.add("edit-project","material-icons-outlined"),r.textContent="edit";const i=document.createElement("span");i.classList.add("delete-project","material-icons-outlined"),i.textContent="delete";const l=document.createElement("span");l.classList.add("edit-project-btn","material-icons-outlined","hidden"),l.textContent="check";const g=document.createElement("span");return g.classList.add("cancel-project-btn","material-icons-outlined","hidden"),g.textContent="cancel",n.append(s,a),s.append(o,c),a.append(r,i,l,g),e.insertBefore(n,d),n}const r=document.querySelector(".add-project"),i=document.getElementById("add-project"),l=document.querySelector(".set-new-project-btn"),g=document.querySelector(".cancel-new-project-btn"),u=document.getElementById("project-title-input");function m(){o.getProject(y).getTasks().forEach((t=>v(t)))}r.addEventListener("click",(()=>{i.classList.toggle("hidden"),r.classList.toggle("hidden")})),l.addEventListener("click",(()=>{const t=c();y=t.getProjectId(),o.addProject(t),a(t),i.classList.toggle("hidden"),r.classList.toggle("hidden"),u.value=""})),g.addEventListener("click",(()=>{i.classList.toggle("hidden"),r.classList.toggle("hidden"),u.value=""}));const p=document.querySelector(".projects"),h="\n    transform: scale(1.01);\n    transition: 0.2s;\n    box-shadow: 5px 5px 5px #bcbcbc;\n    ";let y,L;function v(t){const e=document.querySelector(".tasks"),n=document.createElement("div");n.classList.add("task"),n.id=t.getId(),n.dataset.project=y;const d=document.createElement("div");d.classList.add("first-task-elements"),"Low"==t.getPriority()?n.style.borderLeft="5px solid green":"Medium"==t.getPriority()?n.style.borderLeft="5px solid orange":n.style.borderLeft="5px solid red","Complete"==t.getStatus()?n.style.opacity="0.5":"Incomplete"==t.getStatus()&&(n.style.opactiy="1");const s=document.createElement("div");s.classList.add("title"),s.textContent=t.getTitle();const o=document.createElement("div");o.classList.add("last-task-elements");const c=document.createElement("button");c.textContent="Details",c.classList.add("details");const a=document.createElement("div");a.classList.add("due-date"),a.textContent=t.getDate();const r=document.createElement("span");r.classList.add("edit","material-icons-outlined"),r.textContent="edit";const i=document.createElement("span");i.classList.add("delete","material-icons-outlined"),i.textContent="delete",d.append(s),o.append(c,a,r,i),n.append(d,o),e.append(n)}p.addEventListener("click",(t=>{if(document.querySelectorAll(".task").forEach((t=>t.remove())),document.querySelectorAll(".project").forEach((t=>{t.classList.contains("high-light")&&(t.removeAttribute("style"),t.classList.remove("selected"))})),t.target.matches("div")&&t.target.classList.contains("project")?(t.target.style.cssText=h,y=t.target.id,m()):t.target.matches("div")&&(t.target.classList.contains("edit-project-title")||t.target.classList.contains("project-title-div"))&&t.target.classList.contains("high-light")?(t.target.parentNode.style.cssText=h,y=t.target.parentNode.id,m()):(t.target.matches("span")&&t.target.classList.contains("project-title")&&t.target.classList.contains("high-light")||t.target.matches("span")&&(t.target.classList.contains("edit-project")||t.target.classList.contains("edit-project-btn")||t.target.classList.contains("cancel-project-btn")))&&(t.target.parentNode.parentNode.style.cssText=h,y=t.target.parentNode.parentNode.id,m()),t.target.matches("span")&&"delete"==t.target.textContent){const e=t.target.parentNode.parentNode,n=e.id;o.removeProject(n),e.remove()}if(t.target.matches("span")&&"edit"==t.target.textContent){t.target.parentNode.parentNode.style.cssText=h,t.target.parentNode.parentNode.classList.add("selected");const e=t.target.parentNode.parentNode.children[0].children[0],n=t.target.parentNode.parentNode.children[0].children[1];n.value=e.textContent;const d=t.target.parentNode.children[0],s=t.target.parentNode.children[1],o=t.target.parentNode.children[2],c=t.target.parentNode.children[3];e.classList.toggle("hidden"),n.classList.toggle("hidden"),d.classList.toggle("hidden"),s.classList.toggle("hidden"),o.classList.toggle("hidden"),c.classList.toggle("hidden")}if(t.target.matches("span")&&"check"==t.target.textContent){const e=t.target.parentNode.parentNode.id,n=o.getProject(e),d=t.target.parentNode.parentNode.children[0].children[0],s=t.target.parentNode.parentNode.children[0].children[1];n.setProjectTitle(s.value),d.textContent=n.getProjectTitle();const c=t.target.parentNode.children[0],a=t.target.parentNode.children[1],r=t.target.parentNode.children[2],i=t.target.parentNode.children[3];d.classList.toggle("hidden"),s.classList.toggle("hidden"),c.classList.toggle("hidden"),a.classList.toggle("hidden"),r.classList.toggle("hidden"),i.classList.toggle("hidden")}if(t.target.matches("span")&&"cancel"==t.target.textContent){t.target.parentNode.parentNode.style.cssText=h,t.target.parentNode.parentNode.classList.add("selected");const e=t.target.parentNode.parentNode.children[0].children[0],n=t.target.parentNode.parentNode.children[0].children[1],d=t.target.parentNode.children[0],s=t.target.parentNode.children[1],o=t.target.parentNode.children[2],c=t.target.parentNode.children[3];e.classList.toggle("hidden"),n.classList.toggle("hidden"),d.classList.toggle("hidden"),s.classList.toggle("hidden"),o.classList.toggle("hidden"),c.classList.toggle("hidden")}})),document.querySelector(".tasks").addEventListener("click",(t=>{if(t.target.matches("span")&&"edit"==t.target.textContent){const e=document.querySelector("#edit-form");(0,s.B)(e);const n=t.target.parentNode.parentNode.id,d=o.getProject(y).getTask(n);L=n;const c=document.getElementById("edit-title"),a=document.getElementById("edit-description"),r=document.getElementById("edit-due-date"),i=document.getElementById("edit-priority"),l=document.getElementById("edit-status");c.value=d.getTitle(),a.value=d.getDescription(),r.value=d.getDate(),i.value=d.getPriority(),"Complete"==d.getStatus()?l.checked=!0:l.checked=!1}else if(t.target.matches("span")&&"delete"==t.target.textContent){const e=t.target.parentNode.parentNode;o.getProject(y).removeTask(e.id),e.remove()}else if(t.target.matches("button")&&"Details"==t.target.textContent){const e=t.target.parentNode.parentNode.id,n=o.getProject(y).getTask(e),d=document.getElementById("task-title-output"),c=document.getElementById("task-due-date-output"),a=document.getElementById("task-priority-output"),r=document.getElementById("task-status-output"),i=document.getElementById("task-details-output");d.textContent=n.getTitle(),c.textContent=n.getDate(),a.textContent=n.getPriority(),r.textContent=n.getStatus(),i.textContent=n.getDescription();const l=document.getElementById("task-details");(0,s.B)(l),document.querySelectorAll("[data-close-button]").forEach((t=>{t.addEventListener("click",(()=>{const e=t.closest("#task-details");(0,s.z)(e)}))}))}}));const E=document.querySelector(".add-task"),j=document.querySelector(".edit-task");E.addEventListener("click",(t=>{t.preventDefault();const e=function(){const t=o.getProject(y),e=document.getElementById("title").value,n=document.getElementById("description").value,s=document.getElementById("due-date").value,c=document.getElementById("priority").value;let a;a=document.getElementById("status").checked?"Complete":"Incomplete";const r=self.crypto.randomUUID(),i=(0,d.iQ)(e,n,s,c,a,r);return t.addTask(i),i}();v(e),document.querySelector(".form-card").reset();const n=document.getElementById("due-date"),s=(new Date).toISOString().slice(0,10);n.value=s})),j.addEventListener("click",(t=>{t.preventDefault(),function(){const t=o.getProject(y).getTask(L),e=document.getElementById("edit-title").value,n=document.getElementById("edit-description").value,d=document.getElementById("edit-due-date").value,s=document.getElementById("edit-priority").value,c=document.getElementById("edit-status").checked;t.setTitle(e),t.setDescription(n),t.setDate(d),t.setPriority(s),c?t.setStatus("Complete"):t.setStatus("Incomplete")}(),function(t){const e=document.getElementById(t),n=o.getProject(y).getTask(t);e.childNodes[0].textContent=n.getTitle(),"Low"==n.getPriority()?e.style.borderLeft="5px solid green":"Medium"==n.getPriority()?e.style.borderLeft="5px solid orange":e.style.borderLeft="5px solid red","Complete"==n.getStatus()?e.style.opacity="0.5":"Incomplete"==n.getStatus()&&(e.style.opacity="1"),e.childNodes[1].childNodes[1].textContent=n.getDate()}(L)}));const I=document.getElementById("due-date"),N=(new Date).toISOString().slice(0,10);I.value=N;const x=c();x.setProjectTitle("Programming"),o.addProject(x);const f=a(x);y=x.getProjectId(),f.id=y,f.style.cssText=h;const P=c();P.setProjectTitle("Gym"),o.addProject(P);const k=a(P);y=P.getProjectId(),k.id=y}},e={};function n(d){var s=e[d];if(void 0!==s)return s.exports;var o=e[d]={exports:{}};return t[d](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var d in e)n.o(e,d)&&!n.o(t,d)&&Object.defineProperty(t,d,{enumerable:!0,get:e[d]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(138),n(803),n(982)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLElBT1YsT0FIQUUsRUFBb0JMLEdBQVVJLEVBQVFBLEVBQU9ELFFBQVNKLEdBRy9DSyxFQUFPRCxRQ3BCZkosRUFBb0JPLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYUixFQUFvQlUsRUFBRUYsRUFBWUMsS0FBU1QsRUFBb0JVLEVBQUVOLEVBQVNLLElBQzVFRSxPQUFPQyxlQUFlUixFQUFTSyxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0VULEVBQW9CVSxFQUFJLENBQUNLLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDR2xGaEIsRUFBb0IsS0FDcEJBLEVBQW9CLEtBQ01BLEVBQW9CLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby8uL3NyYy9tb2RhbC5qcyIsIndlYnBhY2s6Ly90by1kby8uL3NyYy91c2VyLWludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG8tZG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgVGFzayA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBzdGF0dXMsIGlkKSA9PiB7XG5cbiAgICBjb25zdCBnZXRUaXRsZSA9ICgpID0+IHRpdGxlO1xuICAgIGNvbnN0IHNldFRpdGxlID0gbmV3VGl0bGUgPT4gdGl0bGUgPSBuZXdUaXRsZTtcbiAgICBjb25zdCBnZXREZXNjcmlwdGlvbiA9ICgpID0+IGRlc2NyaXB0aW9uO1xuICAgIGNvbnN0IHNldERlc2NyaXB0aW9uPSBuZXdEZXNjcmlwdGlvbiA9PiBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgIGNvbnN0IGdldERhdGUgPSAoKSA9PiBkdWVEYXRlO1xuICAgIGNvbnN0IHNldERhdGUgPSBuZXdEYXRlID0+IGR1ZURhdGUgPSBuZXdEYXRlO1xuICAgIGNvbnN0IGdldFByaW9yaXR5ID0gKCkgPT4gcHJpb3JpdHk7XG4gICAgY29uc3Qgc2V0UHJpb3JpdHkgPSBuZXdQcmlvcml0eSA9PiBwcmlvcml0eSA9IG5ld1ByaW9yaXR5O1xuICAgIGNvbnN0IGdldFN0YXR1cyA9ICgpID0+IHN0YXR1cztcbiAgICBjb25zdCBzZXRTdGF0dXMgPSBuZXdTdGF0dXMgPT4gc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgIGNvbnN0IGdldElkID0gKCkgPT4gaWQ7XG4gICAgY29uc3Qgc2V0SWQgPSBuZXdJZCA9PiBpZCA9IG5ld0lkO1xuXG4gICAgcmV0dXJuIHtnZXRUaXRsZSwgc2V0VGl0bGUsIGdldERlc2NyaXB0aW9uLCBzZXREZXNjcmlwdGlvbiwgZ2V0RGF0ZSwgc2V0RGF0ZSwgZ2V0UHJpb3JpdHksIHNldFByaW9yaXR5LCBnZXRTdGF0dXMsIHNldFN0YXR1cywgZ2V0SWQsIHNldElkfVxufTtcblxuXG5jb25zdCBQcm9qZWN0ID0gKHByb2plY3RUaXRsZSwgcHJvamVjdElkKSA9PiB7XG5cbiAgICBsZXQgcHJvamVjdCA9IFtdO1xuXG4gICAgY29uc3QgZ2V0UHJvamVjdFRpdGxlID0gKCkgPT4gcHJvamVjdFRpdGxlO1xuICAgIGNvbnN0IHNldFByb2plY3RUaXRsZSA9IG5ld1RpdGxlID0+IHByb2plY3RUaXRsZSA9IG5ld1RpdGxlO1xuICAgIGNvbnN0IGdldFByb2plY3RJZCA9ICgpID0+IHByb2plY3RJZDtcbiAgICBjb25zdCBzZXRQcm9qZWN0SWQgPSBuZXdJZCA9PiBwcm9qZWN0SWQgPSBuZXdJZDtcblxuICAgIGNvbnN0IGdldFRhc2sgPSAoaWQpID0+IHtcbiAgICAgICAgcmV0dXJuIHByb2plY3QuZmluZCgodGFzaykgPT4gdGFzay5nZXRJZCgpID09PSBpZClcbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0VGFza3MgPSAoKSA9PiBwcm9qZWN0O1xuXG4gICAgY29uc3QgYWRkVGFzayA9ICh0YXNrKSA9PiB7XG4gICAgICAgIHByb2plY3QucHVzaCh0YXNrKVxuICAgIH07XG5cbiAgICBjb25zdCByZW1vdmVUYXNrID0gKGlkKSA9PiB7XG4gICAgICAgIHByb2plY3QgPSBwcm9qZWN0LmZpbHRlcigodGFzaykgPT4gdGFzay5nZXRJZCgpICE9PSBpZClcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtnZXRUYXNrcywgZ2V0UHJvamVjdFRpdGxlLCBnZXRQcm9qZWN0SWQsIHNldFByb2plY3RUaXRsZSwgc2V0UHJvamVjdElkLCBnZXRUYXNrLCBhZGRUYXNrLCByZW1vdmVUYXNrfVxufTtcblxuXG5jb25zdCBUb0RvID0gKCkgPT4ge1xuICAgIFxuICAgIGxldCB0b0RvID0gW107XG4gICAgXG4gICAgY29uc3QgZ2V0UHJvamVjdCA9IChwcm9qZWN0SWQpID0+IHtcbiAgICAgICAgcmV0dXJuIHRvRG8uZmluZCgocHJvamVjdCkgPT4gcHJvamVjdC5nZXRQcm9qZWN0SWQoKSA9PT0gcHJvamVjdElkKVxuICAgIH07XG5cbiAgICBjb25zdCBnZXRQcm9qZWN0cyA9ICgpID0+IHRvRG87XG5cbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gKHByb2plY3QpID0+IHtcbiAgICAgICAgdG9Eby5wdXNoKHByb2plY3QpXG4gICAgfTtcblxuICAgIGNvbnN0IHJlbW92ZVByb2plY3QgPSAocHJvamVjdElkKSA9PiB7XG4gICAgICAgIHRvRG8gPSB0b0RvLmZpbHRlcigocHJvamVjdCkgPT4gcHJvamVjdC5nZXRQcm9qZWN0SWQoKSAhPT0gcHJvamVjdElkKVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHtnZXRQcm9qZWN0LCBnZXRQcm9qZWN0cywgYWRkUHJvamVjdCwgcmVtb3ZlUHJvamVjdH1cbn07XG5cbmV4cG9ydCB7VGFzaywgUHJvamVjdCwgVG9Eb30iLCJjb25zdCBvcGVuTW9kYWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLW1vZGFsLXRhcmdldF1cIik7XG5jb25zdCBjbG9zZU1vZGFsQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1jbG9zZS1idXR0b25dXCIpO1xuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3ZlcmxheVwiKTtcblxub3Blbk1vZGFsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJ1dHRvbi5kYXRhc2V0Lm1vZGFsVGFyZ2V0KTtcbiAgICAgICAgb3BlbkZvcm0oZm9ybSk7XG4gICAgfSlcbn0pIFxuXG5jbG9zZU1vZGFsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBidXR0b24uY2xvc2VzdChcIi5mb3JtXCIpXG4gICAgICAgIGNsb3NlRm9ybShmb3JtKTtcbiAgICB9KVxufSlcblxuZnVuY3Rpb24gb3BlbkZvcm0oZm9ybSkge1xuICAgIGlmIChmb3JtID09IG51bGwpIHJldHVyblxuICAgIGZvcm0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG59XG5cbmZ1bmN0aW9uIGNsb3NlRm9ybShmb3JtKSB7XG4gICAgaWYgKGZvcm0gPT0gbnVsbCkgcmV0dXJuXG4gICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbn1cblxuZXhwb3J0IHtvcGVuRm9ybSwgY2xvc2VGb3JtfSIsImltcG9ydCB7VGFzaywgUHJvamVjdCwgVG9Eb30gZnJvbSAnLi9pbmRleCdcbmltcG9ydCB7b3BlbkZvcm0sIGNsb3NlRm9ybX0gZnJvbSAnLi9tb2RhbCdcblxuLy8gUHJvamVjdCBVSVxuXG5jb25zdCB0b0RvTGlzdCA9IFRvRG8oKVxuXG4vLyBQcm9qZWN0IFVJXG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3QoKSB7XG4gICBjb25zdCBwcm9qZWN0VGl0bGUgPSBwcm9qZWN0VGl0bGVJbnB1dC52YWx1ZVxuICAgY29uc3QgcHJvamVjdElkID0gc2VsZi5jcnlwdG8ucmFuZG9tVVVJRCgpO1xuXG4gICBjb25zdCBuZXdQcm9qZWN0ID0gUHJvamVjdChwcm9qZWN0VGl0bGUsIHByb2plY3RJZClcbiAgIHJldHVybiBuZXdQcm9qZWN0XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3RVSShwcm9qZWN0KSB7XG4gICAgY29uc3QgcHJvamVjdHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3RzXCIpXG4gICAgY29uc3QgcHJvamVjdERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgcHJvamVjdERpdi5pZCA9IHByb2plY3QuZ2V0UHJvamVjdElkKClcblxuICAgIGNvbnN0IGFkZFByb2plY3REaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1wcm9qZWN0XCIpXG4gICAgcHJvamVjdERpdi5jbGFzc0xpc3QuYWRkKCdwcm9qZWN0JywgJ2hpZ2gtbGlnaHQnKVxuXG4gICAgY29uc3QgcHJvamVjdFRpdGxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBwcm9qZWN0VGl0bGVEaXYuY2xhc3NMaXN0LmFkZChcInByb2plY3QtdGl0bGUtZGl2XCIsIFwiaGlnaC1saWdodFwiKVxuXG4gICAgY29uc3QgcHJvamVjdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgcHJvamVjdFRpdGxlLmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRpdGxlXCIsIFwiaGlnaC1saWdodFwiKVxuICAgIHByb2plY3RUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3QuZ2V0UHJvamVjdFRpdGxlKClcblxuICAgIGNvbnN0IHByb2plY3RUaXRsZUlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKVxuICAgIHByb2plY3RUaXRsZUlucHV0LmNsYXNzTGlzdC5hZGQoXCJlZGl0LXByb2plY3QtdGl0bGVcIiwgXCJoaWdoLWxpZ2h0XCIsIFwiaGlkZGVuXCIpXG4gICAgcHJvamVjdFRpdGxlLnR5cGUgPSBcInRleHRcIlxuXG4gICAgY29uc3QgcHJvamVjdEVkaXREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHByb2plY3RFZGl0RGl2LmNsYXNzTGlzdC5hZGQoXCJlZGl0LXByb2plY3QtYnV0dG9uc1wiKVxuXG4gICAgY29uc3QgZWRpdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcImVkaXQtcHJvamVjdFwiLCBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpXG4gICAgZWRpdEJ0bi50ZXh0Q29udGVudCA9ICdlZGl0J1xuXG4gICAgY29uc3QgZGVsZXRlQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWxldGUtcHJvamVjdFwiLCBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpXG4gICAgZGVsZXRlQnRuLnRleHRDb250ZW50ID0gJ2RlbGV0ZSdcblxuICAgIGNvbnN0IGNoZWNrQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgY2hlY2tCdG4uY2xhc3NMaXN0LmFkZChcImVkaXQtcHJvamVjdC1idG5cIiwgXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiLCBcImhpZGRlblwiKVxuICAgIGNoZWNrQnRuLnRleHRDb250ZW50ID0gJ2NoZWNrJ1xuXG4gICAgY29uc3QgY2FuY2VsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpXG4gICAgY2FuY2VsQnRuLmNsYXNzTGlzdC5hZGQoXCJjYW5jZWwtcHJvamVjdC1idG5cIiwgXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiLCBcImhpZGRlblwiKVxuICAgIGNhbmNlbEJ0bi50ZXh0Q29udGVudCA9ICdjYW5jZWwnXG5cbiAgICBwcm9qZWN0RGl2LmFwcGVuZChwcm9qZWN0VGl0bGVEaXYsIHByb2plY3RFZGl0RGl2KVxuICAgIHByb2plY3RUaXRsZURpdi5hcHBlbmQocHJvamVjdFRpdGxlLCBwcm9qZWN0VGl0bGVJbnB1dClcbiAgICBwcm9qZWN0RWRpdERpdi5hcHBlbmQoZWRpdEJ0biwgZGVsZXRlQnRuLCBjaGVja0J0biwgY2FuY2VsQnRuKVxuICAgIHByb2plY3RzQ29udGFpbmVyLmluc2VydEJlZm9yZShwcm9qZWN0RGl2LCBhZGRQcm9qZWN0RGl2KVxuXG4gICAgcmV0dXJuIHByb2plY3REaXZcbn1cblxuXG4vLyBBZGQgUHJvamVjdCBFdmVudCBMaXN0ZW5lcnNcbmNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXByb2plY3QnKVxuY29uc3QgYWRkUHJvamVjdERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGQtcHJvamVjdCcpXG5jb25zdCBzZXRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zZXQtbmV3LXByb2plY3QtYnRuXCIpXG5jb25zdCBjYW5jZWxQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYW5jZWwtbmV3LXByb2plY3QtYnRuXCIpXG5jb25zdCBwcm9qZWN0VGl0bGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC10aXRsZS1pbnB1dFwiKVxuXG5hZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGFkZFByb2plY3REaXYuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICBhZGRQcm9qZWN0QnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG59KVxuXG5zZXRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBjcmVhdGVQcm9qZWN0KClcbiAgICBwcm9qZWN0RGl2SWQgPSBuZXdQcm9qZWN0LmdldFByb2plY3RJZCgpXG4gICAgdG9Eb0xpc3QuYWRkUHJvamVjdChuZXdQcm9qZWN0KVxuICAgIGNyZWF0ZVByb2plY3RVSShuZXdQcm9qZWN0KVxuICAgIGFkZFByb2plY3REaXYuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICBhZGRQcm9qZWN0QnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgcHJvamVjdFRpdGxlSW5wdXQudmFsdWUgPSAnJ1xufSlcblxuY2FuY2VsUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBhZGRQcm9qZWN0RGl2LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgYWRkUHJvamVjdEJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxuICAgIHByb2plY3RUaXRsZUlucHV0LnZhbHVlID0gJydcbn0pXG5cblxuLy8gRHluYW1pYyBQcm9qZWN0IEV2ZW50IExpc3RlbmVyc1xuZnVuY3Rpb24gcmVtb3ZlUHJvamVjdFN0eWxpbmdzKCkge1xuICAgIGNvbnN0IHByb2plY3REaXZzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3QnKVxuICAgIHByb2plY3REaXZzLmZvckVhY2goZSA9PiB7XG4gICAgICAgIGlmIChlLmNsYXNzTGlzdC5jb250YWlucygnaGlnaC1saWdodCcpKSB7XG4gICAgICAgICAgICBlLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKVxuICAgICAgICAgICAgZS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpXG4gICAgICAgIH1cbiAgICB9KVxufVxuXG5mdW5jdGlvbiByZW1vdmVUYXNrcygpIHtcbiAgICBjb25zdCB0YXNrRGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXNrJylcbiAgICB0YXNrRGl2cy5mb3JFYWNoKGUgPT4gZS5yZW1vdmUoKSlcbn1cblxuZnVuY3Rpb24gcmVuZGVyUHJvamVjdFRhc2tzKCkge1xuICAgIGNvbnN0IHByb2plY3RUYXNrcyA9IHRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdERpdklkKS5nZXRUYXNrcygpXG4gICAgcHJvamVjdFRhc2tzLmZvckVhY2goKHRhc2spID0+IGNyZWF0ZVRhc2tVSSh0YXNrKSlcbn1cblxuY29uc3QgcHJvamVjdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdHMnKVxuY29uc3QgcHJvamVjdFN0eWxlID0gYFxuICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wMSk7XG4gICAgdHJhbnNpdGlvbjogMC4ycztcbiAgICBib3gtc2hhZG93OiA1cHggNXB4IDVweCAjYmNiY2JjO1xuICAgIGA7XG5cbmxldCBwcm9qZWN0RGl2SWQgXG5cbnByb2plY3RzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblxuICAgIC8vIEhvdmVyIC8gU2VsZWN0aW9uIHN0eWxpbmdcbiAgICByZW1vdmVUYXNrcygpXG4gICAgcmVtb3ZlUHJvamVjdFN0eWxpbmdzKClcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhcImRpdlwiKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Byb2plY3QnKSkge1xuICAgICAgICBlLnRhcmdldC5zdHlsZS5jc3NUZXh0ID0gcHJvamVjdFN0eWxlO1xuICAgICAgICBwcm9qZWN0RGl2SWQgPSBlLnRhcmdldC5pZDtcblxuICAgICAgICAvLyBSZW5kZXIgcHJvamVjdCB0YXNrc1xuICAgICAgICByZW5kZXJQcm9qZWN0VGFza3MoKVxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcImRpdlwiKSAmJiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0LXByb2plY3QtdGl0bGUnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Byb2plY3QtdGl0bGUtZGl2JykpICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGlnaC1saWdodCcpKSB7XG4gICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuc3R5bGUuY3NzVGV4dCA9IHByb2plY3RTdHlsZVxuICAgICAgICBwcm9qZWN0RGl2SWQgPSBlLnRhcmdldC5wYXJlbnROb2RlLmlkXG5cbiAgICAgICAgLy8gUmVuZGVyIHByb2plY3QgdGFza3NcbiAgICAgICAgcmVuZGVyUHJvamVjdFRhc2tzKClcblxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJvamVjdC10aXRsZScpKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZ2gtbGlnaHQnKSkge1xuICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuY3NzVGV4dCA9IHByb2plY3RTdHlsZTtcbiAgICAgICAgcHJvamVjdERpdklkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkO1xuXG4gICAgICAgIC8vIFJlbmRlciBwcm9qZWN0IHRhc2tzXG4gICAgICAgIHJlbmRlclByb2plY3RUYXNrcygpXG4gICAgICAgIFxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWRpdC1wcm9qZWN0JykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0LXByb2plY3QtYnRuJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYW5jZWwtcHJvamVjdC1idG4nKSkpIHtcbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmNzc1RleHQgPSBwcm9qZWN0U3R5bGU7XG4gICAgICAgIHByb2plY3REaXZJZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcblxuICAgICAgICAvLyBSZW5kZXIgcHJvamVjdCB0YXNrc1xuICAgICAgICByZW5kZXJQcm9qZWN0VGFza3MoKVxuICAgIH1cbiAgICAvLyBEZWxldGUgUHJvamVjdFxuXG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJzcGFuXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09ICdkZWxldGUnKSB7XG5cbiAgICAgICAgY29uc3QgcHJvamVjdCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gcHJvamVjdC5pZDtcbiAgICAgICAgdG9Eb0xpc3QucmVtb3ZlUHJvamVjdChwcm9qZWN0SWQpXG4gICAgICAgIHByb2plY3QucmVtb3ZlKClcbiAgICB9XG5cbiAgICAvLyBFZGl0IFByb2plY3RcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gJ2VkaXQnKSB7XG5cbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmNzc1RleHQgPSBwcm9qZWN0U3R5bGVcbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJylcblxuICAgICAgICBjb25zdCB0aXRsZSA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlblswXS5jaGlsZHJlblswXVxuICAgICAgICBjb25zdCBpbnB1dCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlblswXS5jaGlsZHJlblsxXVxuICAgICAgICBpbnB1dC52YWx1ZSA9IHRpdGxlLnRleHRDb250ZW50XG5cbiAgICAgICAgY29uc3QgZWRpdEJ0biA9IGUudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW5bMF1cbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblsxXVxuICAgICAgICBjb25zdCBlZGl0UHJvamVjdEJ0biA9IGUudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW5bMl1cbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblszXVxuXG4gICAgICAgIHRpdGxlLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgICBlZGl0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgZGVsZXRlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgZWRpdFByb2plY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgICBjYW5jZWxCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgIH1cblxuICAgIC8vIEVkaXQgUHJvamVjdCBUaXRsZVxuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKFwic3BhblwiKSAmJiBlLnRhcmdldC50ZXh0Q29udGVudCA9PSAnY2hlY2snKSB7XG5cbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkXG4gICAgICAgIGNvbnN0IHByb2plY3QgPSB0b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3RJZClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRpdGxlID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdXG4gICAgICAgIGNvbnN0IGlucHV0ID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdXG4gICAgICAgIHByb2plY3Quc2V0UHJvamVjdFRpdGxlKGlucHV0LnZhbHVlKVxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHByb2plY3QuZ2V0UHJvamVjdFRpdGxlKClcblxuICAgICAgICBjb25zdCBlZGl0QnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblswXTtcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblsxXTtcbiAgICAgICAgY29uc3QgZWRpdFByb2plY3RCdG4gPSBlLnRhcmdldC5wYXJlbnROb2RlLmNoaWxkcmVuWzJdO1xuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBlLnRhcmdldC5wYXJlbnROb2RlLmNoaWxkcmVuWzNdO1xuXG4gICAgICAgIHRpdGxlLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgICBlZGl0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgZGVsZXRlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgZWRpdFByb2plY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgICBjYW5jZWxCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgIH1cblxuICAgIC8vIENhbmNlbCBFZGl0XG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJzcGFuXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09ICdjYW5jZWwnKSB7XG5cbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmNzc1RleHQgPSBwcm9qZWN0U3R5bGVcbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJylcbiAgICBcbiAgICAgICAgY29uc3QgdGl0bGUgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF1cbiAgICAgICAgY29uc3QgaW5wdXQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV1cbiAgICAgICAgY29uc3QgZWRpdEJ0biA9IGUudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW5bMF07XG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGUudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW5bMV07XG4gICAgICAgIGNvbnN0IGVkaXRQcm9qZWN0QnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblsyXTtcbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblszXTtcblxuICAgICAgICB0aXRsZS5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgZWRpdEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgICAgIGVkaXRQcm9qZWN0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgY2FuY2VsQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIil9XG59KVxuXG4vLyBUYXNrIFVJXG5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2soKSB7XG4gICAgY29uc3QgcHJvamVjdCA9IHRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdERpdklkKVxuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpLnZhbHVlXG4gICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJykudmFsdWVcbiAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWUtZGF0ZScpLnZhbHVlXG4gICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5JykudmFsdWVcbiAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJykuY2hlY2tlZFxuICAgIGxldCB0YXNrU3RhdHVzXG4gICAgaWYgKHRhc2tDaGVja2JveCkge1xuICAgICAgICB0YXNrU3RhdHVzID0gJ0NvbXBsZXRlJ1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tTdGF0dXMgPSAnSW5jb21wbGV0ZSdcbiAgICB9XG4gICAgY29uc3QgdGFza0lkID0gc2VsZi5jcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld1Rhc2sgPSBUYXNrKHRhc2tUaXRsZSwgdGFza0Rlc2NyaXB0aW9uLCB0YXNrRGF0ZSwgdGFza1ByaW9yaXR5LCB0YXNrU3RhdHVzLCB0YXNrSWQpXG4gICAgcHJvamVjdC5hZGRUYXNrKG5ld1Rhc2spXG5cbiAgICByZXR1cm4gbmV3VGFza1xufVxuXG5mdW5jdGlvbiB1cGRhdGVUYXNrKCkge1xuICAgIGNvbnN0IHRhc2tUb0VkaXQgPSB0b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3REaXZJZCkuZ2V0VGFzayh0YXNrSWQpXG4gICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtdGl0bGUnKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWRlc2NyaXB0aW9uJykudmFsdWVcbiAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWR1ZS1kYXRlJykudmFsdWVcbiAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1wcmlvcml0eScpLnZhbHVlXG4gICAgY29uc3QgdGFza0NoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtc3RhdHVzJykuY2hlY2tlZFxuXG4gICAgdGFza1RvRWRpdC5zZXRUaXRsZSh0YXNrVGl0bGUpXG4gICAgdGFza1RvRWRpdC5zZXREZXNjcmlwdGlvbih0YXNrRGVzY3JpcHRpb24pXG4gICAgdGFza1RvRWRpdC5zZXREYXRlKHRhc2tEYXRlKVxuICAgIHRhc2tUb0VkaXQuc2V0UHJpb3JpdHkodGFza1ByaW9yaXR5KVxuICAgIGlmICh0YXNrQ2hlY2tib3gpIHtcbiAgICAgICAgdGFza1RvRWRpdC5zZXRTdGF0dXMoJ0NvbXBsZXRlJylcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXNrVG9FZGl0LnNldFN0YXR1cygnSW5jb21wbGV0ZScpXG4gICAgfSBcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFza1VJKHRhc2spIHtcbiAgICBjb25zdCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3NcIilcbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGFza0Rpdi5jbGFzc0xpc3QuYWRkKFwidGFza1wiKVxuICAgIHRhc2tEaXYuaWQgPSB0YXNrLmdldElkKClcbiAgICB0YXNrRGl2LmRhdGFzZXQucHJvamVjdCA9IHByb2plY3REaXZJZFxuXG4gICAgY29uc3QgZmlyc3RUYXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZmlyc3RUYXNrRGl2LmNsYXNzTGlzdC5hZGQoXCJmaXJzdC10YXNrLWVsZW1lbnRzXCIpXG5cbiAgICBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdMb3cnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgZ3JlZW4nO1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdNZWRpdW0nKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgb3JhbmdlJ1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgcmVkJ1xuICAgIH1cblxuICAgIGlmICh0YXNrLmdldFN0YXR1cygpID09ICdDb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjaXR5ID0gJzAuNSdcbiAgICB9IGVsc2UgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0luY29tcGxldGUnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUub3BhY3RpeSA9ICcxJ1xuICAgIH1cblxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGl0bGUuY2xhc3NMaXN0LmFkZChcInRpdGxlXCIpXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLmdldFRpdGxlKClcblxuICAgIGNvbnN0IGxhc3RUYXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGFzdFRhc2tEaXYuY2xhc3NMaXN0LmFkZChcImxhc3QtdGFzay1lbGVtZW50c1wiKTtcblxuICAgIGNvbnN0IGRldGFpbHNCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGRldGFpbHNCdG4udGV4dENvbnRlbnQgPSAnRGV0YWlscydcbiAgICBkZXRhaWxzQnRuLmNsYXNzTGlzdC5hZGQoJ2RldGFpbHMnKVxuXG4gICAgY29uc3QgZGF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRhdGVEaXYuY2xhc3NMaXN0LmFkZCgnZHVlLWRhdGUnKTtcbiAgICBkYXRlRGl2LnRleHRDb250ZW50ID0gdGFzay5nZXREYXRlKClcblxuICAgIGNvbnN0IGVkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgZWRpdC5jbGFzc0xpc3QuYWRkKFwiZWRpdFwiLCBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpO1xuICAgIGVkaXQudGV4dENvbnRlbnQgPSAnZWRpdCc7XG5cbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWxldGVcIiwgXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSAnZGVsZXRlJztcblxuICAgIGZpcnN0VGFza0Rpdi5hcHBlbmQodGl0bGUpXG4gICAgbGFzdFRhc2tEaXYuYXBwZW5kKGRldGFpbHNCdG4sIGRhdGVEaXYsIGVkaXQsIGRlbGV0ZUJ0bilcbiAgICB0YXNrRGl2LmFwcGVuZChmaXJzdFRhc2tEaXYsIGxhc3RUYXNrRGl2KVxuICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZCh0YXNrRGl2KVxufTtcblxuZnVuY3Rpb24gdXBkYXRlVGFza1VJKGlkKSB7XG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxuICAgIGNvbnN0IHRhc2sgPSB0b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3REaXZJZCkuZ2V0VGFzayhpZClcblxuICAgIGNvbnN0IHRhc2tUaXRsZSA9IHRhc2tEaXYuY2hpbGROb2Rlc1swXVxuICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRhc2suZ2V0VGl0bGUoKVxuXG4gICAgaWYgKHRhc2suZ2V0UHJpb3JpdHkoKSA9PSAnTG93Jykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIGdyZWVuJztcbiAgICB9IGVsc2UgaWYgKHRhc2suZ2V0UHJpb3JpdHkoKSA9PSAnTWVkaXVtJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIG9yYW5nZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCByZWQnO1xuICAgIH1cblxuICAgIGlmICh0YXNrLmdldFN0YXR1cygpID09ICdDb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFN0YXR1cygpID09ICdJbmNvbXBsZXRlJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gdGFza0Rpdi5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMV1cbiAgICB0YXNrRHVlRGF0ZS50ZXh0Q29udGVudCA9IHRhc2suZ2V0RGF0ZSgpXG59XG5cblxuLy8gRHluYW1pYyBUYXNrIEV2ZW50IExpc3RlbmVyc1xuXG5sZXQgdGFza0lkIC8vIHRoZSB2YXJpYWJsZSB0byBhY2Nlc3MgYSBzcGVjaWZpYyB0YXNrIGlkIGZvciBlZGl0aW5nXG5cbmNvbnN0IHRhc2tzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKVxudGFza3NEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyAgIFxuXG4gICAgLy8gRWRpdFxuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKFwic3BhblwiKSAmJiBlLnRhcmdldC50ZXh0Q29udGVudCA9PSBcImVkaXRcIikge1xuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWZvcm1cIik7XG4gICAgICAgIG9wZW5Gb3JtKGZvcm0pXG5cbiAgICAgICAgY29uc3QgaWQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWRcbiAgICAgICAgY29uc3QgcHJvamVjdCA9IHRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdERpdklkKVxuICAgICAgICBjb25zdCB0YXNrVG9FZGl0ID0gcHJvamVjdC5nZXRUYXNrKGlkKVxuICAgICAgICBcbiAgICAgICAgdGFza0lkID0gaWRcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXRpdGxlJylcbiAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtZGVzY3JpcHRpb24nKVxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWR1ZS1kYXRlJylcbiAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcHJpb3JpdHknKVxuICAgICAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1zdGF0dXMnKVxuXG4gICAgICAgIHRhc2tUaXRsZS52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0VGl0bGUoKTtcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnZhbHVlID0gdGFza1RvRWRpdC5nZXREZXNjcmlwdGlvbigpO1xuICAgICAgICB0YXNrRGF0ZS52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0RGF0ZSgpO1xuICAgICAgICB0YXNrUHJpb3JpdHkudmFsdWUgPSB0YXNrVG9FZGl0LmdldFByaW9yaXR5KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGFza1RvRWRpdC5nZXRTdGF0dXMoKSA9PSAnQ29tcGxldGUnKSB7XG4gICAgICAgICAgICB0YXNrQ2hlY2tib3guY2hlY2tlZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhc2tDaGVja2JveC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgfSAgICAgICAgXG5cbiAgICAvLyBEZWxldGUgIFxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJkZWxldGVcIikge1xuICAgICAgICBjb25zdCB0YXNrID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlXG4gICAgICAgIHRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdERpdklkKS5yZW1vdmVUYXNrKHRhc2suaWQpXG4gICAgICAgIHRhc2sucmVtb3ZlKClcbiAgICBcblxuICAgIC8vIERldGFpbHMgQnV0dG9uXG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5tYXRjaGVzKFwiYnV0dG9uXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09ICdEZXRhaWxzJykge1xuICAgICAgICBjb25zdCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZFxuICAgICAgICBjb25zdCB0YXNrID0gdG9Eb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0RGl2SWQpLmdldFRhc2soaWQpXG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10aXRsZS1vdXRwdXRcIilcbiAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1kdWUtZGF0ZS1vdXRwdXRcIilcbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stcHJpb3JpdHktb3V0cHV0XCIpXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1zdGF0dXMtb3V0cHV0XCIpXG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGV0YWlscy1vdXRwdXRcIilcblxuXG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gdGFzay5nZXRUaXRsZSgpXG4gICAgICAgIGRhdGUudGV4dENvbnRlbnQgPSB0YXNrLmdldERhdGUoKVxuICAgICAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IHRhc2suZ2V0UHJpb3JpdHkoKVxuICAgICAgICBzdGF0dXMudGV4dENvbnRlbnQgPSB0YXNrLmdldFN0YXR1cygpXG4gICAgICAgIGRldGFpbHMudGV4dENvbnRlbnQgPSB0YXNrLmdldERlc2NyaXB0aW9uKClcblxuICAgICAgICBjb25zdCBkZXRhaWxzTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGV0YWlsc1wiKTtcbiAgICAgICAgb3BlbkZvcm0oZGV0YWlsc01vZGFsKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgY2xvc2VNb2RhbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtY2xvc2UtYnV0dG9uXVwiKVxuICAgICAgICBjbG9zZU1vZGFsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gYnV0dG9uLmNsb3Nlc3QoXCIjdGFzay1kZXRhaWxzXCIpXG4gICAgICAgICAgICAgICAgY2xvc2VGb3JtKGZvcm0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbn0pO1xuXG4vLyBUYXNrIEJ1dHRvbiBGdW5jdGlvbmFsaXR5XG5cbmNvbnN0IGFkZFRhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRhc2snKTtcbmNvbnN0IGVkaXRUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdGFzaycpO1xuXG5hZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBuZXdUYXNrID0gY3JlYXRlVGFzaygpXG4gICAgY3JlYXRlVGFza1VJKG5ld1Rhc2spXG4gICAgY29uc3QgZm9ybUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tY2FyZFwiKTtcbiAgICBmb3JtQ2FyZC5yZXNldCgpO1xuICAgIGNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R1ZS1kYXRlJylcbiAgICBjb25zdCB0b2RheURhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgIHRhc2tEYXRlLnZhbHVlID0gdG9kYXlEYXRlO1xufSlcblxuZWRpdFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHVwZGF0ZVRhc2soKVxuICAgIHVwZGF0ZVRhc2tVSSh0YXNrSWQpXG59KVxuXG4vLyBJbml0aWFsaXplIEZvcm0gRGVmYXVsdHNcbmNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R1ZS1kYXRlJylcbmNvbnN0IHRvZGF5RGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG50YXNrRGF0ZS52YWx1ZSA9IHRvZGF5RGF0ZTtcblxuLy8gSW5pdGlhbGl6ZSBQcm9qZWN0XG5cbmNvbnN0IHByb2dyYW1taW5nID0gY3JlYXRlUHJvamVjdCgpO1xucHJvZ3JhbW1pbmcuc2V0UHJvamVjdFRpdGxlKCdQcm9ncmFtbWluZycpXG50b0RvTGlzdC5hZGRQcm9qZWN0KHByb2dyYW1taW5nKVxuY29uc3QgcHJvamVjdERpdiA9IGNyZWF0ZVByb2plY3RVSShwcm9ncmFtbWluZylcbnByb2plY3REaXZJZCA9IHByb2dyYW1taW5nLmdldFByb2plY3RJZCgpO1xucHJvamVjdERpdi5pZCA9IHByb2plY3REaXZJZDtcbnByb2plY3REaXYuc3R5bGUuY3NzVGV4dCA9IHByb2plY3RTdHlsZTtcblxuY29uc3QgZ3ltID0gY3JlYXRlUHJvamVjdCgpO1xuZ3ltLnNldFByb2plY3RUaXRsZSgnR3ltJylcbnRvRG9MaXN0LmFkZFByb2plY3QoZ3ltKVxuY29uc3QgcHJvamVjdERpdjEgPSBjcmVhdGVQcm9qZWN0VUkoZ3ltKVxucHJvamVjdERpdklkID0gZ3ltLmdldFByb2plY3RJZCgpO1xucHJvamVjdERpdjEuaWQgPSBwcm9qZWN0RGl2SWQ7IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8vIFRoaXMgZW50cnkgbW9kdWxlIGlzIHJlZmVyZW5jZWQgYnkgb3RoZXIgbW9kdWxlcyBzbyBpdCBjYW4ndCBiZSBpbmxpbmVkXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDgwMyk7XG52YXIgX193ZWJwYWNrX2V4cG9ydHNfXyA9IF9fd2VicGFja19yZXF1aXJlX18oOTgyKTtcbiJdLCJuYW1lcyI6WyJUYXNrIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJwcmlvcml0eSIsInN0YXR1cyIsImlkIiwiZ2V0VGl0bGUiLCJzZXRUaXRsZSIsIm5ld1RpdGxlIiwiZ2V0RGVzY3JpcHRpb24iLCJzZXREZXNjcmlwdGlvbiIsIm5ld0Rlc2NyaXB0aW9uIiwiZ2V0RGF0ZSIsInNldERhdGUiLCJuZXdEYXRlIiwiZ2V0UHJpb3JpdHkiLCJzZXRQcmlvcml0eSIsIm5ld1ByaW9yaXR5IiwiZ2V0U3RhdHVzIiwic2V0U3RhdHVzIiwibmV3U3RhdHVzIiwiZ2V0SWQiLCJzZXRJZCIsIm5ld0lkIiwiUHJvamVjdCIsInByb2plY3RUaXRsZSIsInByb2plY3RJZCIsInByb2plY3QiLCJnZXRUYXNrcyIsImdldFByb2plY3RUaXRsZSIsImdldFByb2plY3RJZCIsInNldFByb2plY3RUaXRsZSIsInNldFByb2plY3RJZCIsImdldFRhc2siLCJmaW5kIiwidGFzayIsImFkZFRhc2siLCJwdXNoIiwicmVtb3ZlVGFzayIsImZpbHRlciIsIlRvRG8iLCJ0b0RvIiwiZ2V0UHJvamVjdCIsImdldFByb2plY3RzIiwiYWRkUHJvamVjdCIsInJlbW92ZVByb2plY3QiLCJvcGVuTW9kYWxCdXR0b25zIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xvc2VNb2RhbEJ1dHRvbnMiLCJvdmVybGF5IiwiZ2V0RWxlbWVudEJ5SWQiLCJvcGVuRm9ybSIsImZvcm0iLCJjbGFzc0xpc3QiLCJhZGQiLCJjbG9zZUZvcm0iLCJyZW1vdmUiLCJmb3JFYWNoIiwiYnV0dG9uIiwiYWRkRXZlbnRMaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJkYXRhc2V0IiwibW9kYWxUYXJnZXQiLCJjbG9zZXN0IiwidG9Eb0xpc3QiLCJjcmVhdGVQcm9qZWN0IiwicHJvamVjdFRpdGxlSW5wdXQiLCJ2YWx1ZSIsInNlbGYiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwiY3JlYXRlUHJvamVjdFVJIiwicHJvamVjdHNDb250YWluZXIiLCJwcm9qZWN0RGl2IiwiY3JlYXRlRWxlbWVudCIsImFkZFByb2plY3REaXYiLCJwcm9qZWN0VGl0bGVEaXYiLCJ0ZXh0Q29udGVudCIsInR5cGUiLCJwcm9qZWN0RWRpdERpdiIsImVkaXRCdG4iLCJkZWxldGVCdG4iLCJjaGVja0J0biIsImNhbmNlbEJ0biIsImFwcGVuZCIsImluc2VydEJlZm9yZSIsImFkZFByb2plY3RCdG4iLCJzZXRQcm9qZWN0QnRuIiwiY2FuY2VsUHJvamVjdEJ0biIsInJlbmRlclByb2plY3RUYXNrcyIsInByb2plY3REaXZJZCIsImNyZWF0ZVRhc2tVSSIsInRvZ2dsZSIsIm5ld1Byb2plY3QiLCJwcm9qZWN0cyIsInByb2plY3RTdHlsZSIsInRhc2tJZCIsInRhc2tzQ29udGFpbmVyIiwidGFza0RpdiIsImZpcnN0VGFza0RpdiIsInN0eWxlIiwiYm9yZGVyTGVmdCIsIm9wYWNpdHkiLCJvcGFjdGl5IiwibGFzdFRhc2tEaXYiLCJkZXRhaWxzQnRuIiwiZGF0ZURpdiIsImVkaXQiLCJlIiwiY29udGFpbnMiLCJyZW1vdmVBdHRyaWJ1dGUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwiY3NzVGV4dCIsInBhcmVudE5vZGUiLCJjaGlsZHJlbiIsImlucHV0IiwiZWRpdFByb2plY3RCdG4iLCJ0YXNrVG9FZGl0IiwidGFza1RpdGxlIiwidGFza0Rlc2NyaXB0aW9uIiwidGFza0RhdGUiLCJ0YXNrUHJpb3JpdHkiLCJ0YXNrQ2hlY2tib3giLCJjaGVja2VkIiwiZGF0ZSIsImRldGFpbHMiLCJkZXRhaWxzTW9kYWwiLCJhZGRUYXNrQnV0dG9uIiwiZWRpdFRhc2tCdXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsIm5ld1Rhc2siLCJ0YXNrU3RhdHVzIiwiY3JlYXRlVGFzayIsInJlc2V0IiwidG9kYXlEYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwic2xpY2UiLCJ1cGRhdGVUYXNrIiwiY2hpbGROb2RlcyIsInVwZGF0ZVRhc2tVSSIsInByb2dyYW1taW5nIiwiZ3ltIiwicHJvamVjdERpdjEiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9