(()=>{"use strict";var e={138:(e,t,d)=>{d.d(t,{IK:()=>a,TG:()=>o,iQ:()=>n});const n=(e="",t="",d="Low",n="No Due Date",a)=>({getTitle:()=>e,setTitle:t=>e=t,getDetails:()=>t,setDetails:e=>t=e,getPriority:()=>d,setPriority:e=>d=e,getDueDate:()=>n,setDueDate:e=>n=e,getStatus:()=>a,setStatus:e=>a=e}),a=e=>{let t=[];return{getTitle:()=>e,setTitle:t=>e=t,getTasks:()=>t,setTasks:e=>t=e,getTask:e=>t.find((t=>e===t.getTitle())),containsTask:e=>t.some((t=>e===t.getTitle())),addTask:e=>t.push(e),removeTask:e=>{t=t.filter((t=>e!==t.getTitle()))}}},o=()=>{let e=[];return{getProjects:()=>e,getProject:t=>e.find((e=>t===e.getTitle())),containsProject:t=>e.some((e=>t===e.getTitle())),addProject:t=>e.push(t),removeProject:t=>{e=e.filter((e=>t!==e.getTitle()))}}}},803:(e,t,d)=>{var n=d(138);const a=(0,n.TG)(),o=(0,n.IK)("Home"),i=(0,n.IK)("Today"),r=(0,n.IK)("This Week");a.addProject(o),a.addProject(i),a.addProject(r),document.getElementById("due-date").value=s();const l={};function s(){let e=new Date,t=String(e.getDate()).padStart(2,"0"),d=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+d+"-"+t}function c(e){const t=e.target.parentNode.parentNode.parentNode.children[0].children[0].textContent;o.removeTask(t),e.target.parentNode.parentNode.parentNode.remove()}function u(e){const t=e.target.parentNode.parentNode.parentNode.children[0].children[0].textContent,d=o.getTask(t),n=d.getDueDate(),a=d.getPriority(),i=d.getDetails(),r=d.getStatus(),l=document.getElementById("edit-title"),s=document.getElementById("edit-due-date"),c=document.getElementById("edit-priority"),u=document.getElementById("edit-details"),m=document.getElementById("edit-status");l.value=t,s.value=n,c.value=a,u.value=i,m.checked="Not Complete"!=r}document.getElementById("submit-task").addEventListener("click",(e=>{e.preventDefault(),function(e){const t=document.querySelector(".tasks"),d=document.createElement("div"),n=document.createElement("div"),a=document.createElement("div"),i=document.createElement("div"),r=document.createElement("div"),s=document.createElement("div"),m=document.createElement("span"),g=document.createElement("div"),y=document.createElement("span");d.classList.add("task"),n.classList.add("first-task-elements"),a.classList.add("task-title"),i.classList.add("last-task-elements"),r.classList.add("task-due-date"),s.classList.add("task-edit"),m.classList.add("material-icons-outlined","edit-symbol"),m.dataset.modalTarget="#edit-modal",g.classList.add("task-delete"),y.classList.add("material-icons-outlined","delete-symbol"),"Complete"==e.getStatus()?(d.style.opacity=.5,d.style.borderColor="rgba(inherit, inherit, inherit, 0.5)"):(d.style.opacity=1,d.style.borderColor="rgba(inherit, inherit, inherit, 1)"),"low"==e.getPriority()?d.style.borderLeft="5px solid green":"medium"==e.getPriority()?d.style.borderLeft="5px solid orange":"high"==e.getPriority()&&(d.style.borderLeft="5px solid red"),a.textContent=e.getTitle(),r.textContent=e.getDueDate(),m.textContent="edit",y.textContent="delete",y.addEventListener("click",c),m.addEventListener("click",E),m.addEventListener("click",u),o.addTask(e),d.append(n,i),n.append(a),i.append(r,s,g),s.append(m),g.append(y),t.append(d),l[e]=d}(function(){const e=document.getElementById("title").value,t=document.getElementById("due-date").value,d=document.getElementById("priority").value,a=document.getElementById("details").value;let o;return o=document.getElementById("status").checked?"Complete":"Not Complete",(0,n.iQ)(e,a,d,t,o)}());const t=document.getElementById("new-task"),d=document.getElementById("due-date");t.reset(),d.value=s()})),document.getElementById("edit-task-submit").addEventListener("click",(e=>{e.preventDefault();const t=(d=document.getElementById("edit-title").value,o.getTask(d));var d;!function(e){const t=document.getElementById("edit-title").value,d=document.getElementById("edit-due-date").value,n=document.getElementById("edit-priority").value,a=document.getElementById("edit-details").value,o=document.getElementById("edit-status").checked;e.setTitle(t),e.setDueDate(d),e.setPriority(n),e.setDetails(a),o?e.setStatus("Complete"):e.setStatus("Not Complete")}(t),function(e){const t=l[e];t.children[0].children[0].textContent=e.getTitle(),t.children[1].children[0].textContent=e.getDueDate(),"low"==e.getPriority()?t.style.borderLeft="5px solid green":"medium"==e.getPriority()?t.style.borderLeft="5px solid orange":"high"==e.getPriority()&&(t.style.borderLeft="5px solid red"),"Complete"==e.getStatus()?(t.style.opacity=.5,t.style.borderColor="rgba(inherit, inherit, inherit, 0.5)"):"Not Complete"==e.getStatus()&&(t.style.opacity=1,t.style.borderColor="rgba(inherit, inherit, inherit, 1)")}(t)}));const m=document.querySelectorAll("[data-modal-target]"),g=document.querySelectorAll("[data-close-button]"),y=document.getElementById("overlay");function p(e){h(document.querySelector(e.target.dataset.modalTarget))}function v(e){var t;null!=(t=e.target.closest(".modal"))&&(t.classList.remove("active"),y.classList.remove("active"))}function E(e){h(document.querySelector(e.target.dataset.modalTarget))}function h(e){null!=e&&(e.classList.add("active"),y.classList.add("active"))}m.forEach((e=>{e.addEventListener("click",p)})),g.forEach((e=>{e.addEventListener("click",v)}))}},t={};function d(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,d),o.exports}d.d=(e,t)=>{for(var n in t)d.o(t,n)&&!d.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d(138),d(803)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxFQUFFQyxPQUFPcUQsUUFBUSxhQXlCL0JELEVBQU0zQixVQUFVckIsT0FBTyxVQUN2QjRDLEVBQVF2QixVQUFVckIsT0FBTyxXQXRCN0IsU0FBUzZCLEVBQWFsQyxHQUVsQm1ELEVBRGNqRSxTQUFTOEIsY0FBY2hCLEVBQUVDLE9BQU8yQixRQUFRQyxjQVkxRCxTQUFTc0IsRUFBVUUsR0FDRixNQUFUQSxJQUNKQSxFQUFNM0IsVUFBVUMsSUFBSSxVQUNwQnNCLEVBQVF2QixVQUFVQyxJQUFJLFdBWDFCbUIsRUFBZVMsU0FBUUMsSUFDbkJBLEVBQU8zQyxpQkFBaUIsUUFBU3FDLE1BR3JDRixFQUFpQk8sU0FBUUMsSUFDckJBLEVBQU8zQyxpQkFBaUIsUUFBU3VDLFFDOVBqQ0ssRUFBMkIsR0FHL0IsU0FBU0MsRUFBb0JDLEdBRTVCLElBQUlDLEVBQWVILEVBQXlCRSxHQUM1QyxRQUFxQkUsSUFBakJELEVBQ0gsT0FBT0EsRUFBYUUsUUFHckIsSUFBSUMsRUFBU04sRUFBeUJFLEdBQVksQ0FHakRHLFFBQVMsSUFPVixPQUhBRSxFQUFvQkwsR0FBVUksRUFBUUEsRUFBT0QsUUFBU0osR0FHL0NLLEVBQU9ELFFDcEJmSixFQUFvQk8sRUFBSSxDQUFDSCxFQUFTSSxLQUNqQyxJQUFJLElBQUlDLEtBQU9ELEVBQ1hSLEVBQW9CVSxFQUFFRixFQUFZQyxLQUFTVCxFQUFvQlUsRUFBRU4sRUFBU0ssSUFDNUVFLE9BQU9DLGVBQWVSLEVBQVNLLEVBQUssQ0FBRUksWUFBWSxFQUFNQyxJQUFLTixFQUFXQyxNQ0ozRVQsRUFBb0JVLEVBQUksQ0FBQ0ssRUFBS0MsSUFBVUwsT0FBT00sVUFBVUMsZUFBZUMsS0FBS0osRUFBS0MsR0NHbEZoQixFQUFvQixLQUNNQSxFQUFvQixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8vLi9zcmMvdXNlci1pbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdG8tZG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG8tZG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvLWRvL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG8tZG8vd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGlzRGF0ZSwgdG9EYXRlLCBpc1RoaXNXZWVrLCBpc1RvZGF5IH0gZnJvbSBcImRhdGUtZm5zXCI7XG5pbXBvcnQgeyBpZCB9IGZyb20gXCJkYXRlLWZucy9sb2NhbGVcIjtcblxuLy8gVGFzayBGYWN0b3J5XG5cbmNvbnN0IFRhc2sgPSAodGl0bGUgPSAnJywgZGV0YWlscyA9ICcnLCBwcmlvcml0eSA9ICdMb3cnLCBkdWVEYXRlID0gJ05vIER1ZSBEYXRlJywgc3RhdHVzKSA9PiB7XG4gICAgY29uc3QgZ2V0VGl0bGUgPSAoKSA9PiB0aXRsZTtcbiAgICBjb25zdCBzZXRUaXRsZSA9IG5ld1RpdGxlID0+IHRpdGxlID0gbmV3VGl0bGU7XG5cbiAgICBjb25zdCBnZXREZXRhaWxzID0gKCkgPT4gZGV0YWlscztcbiAgICBjb25zdCBzZXREZXRhaWxzID0gbmV3RGV0YWlscyA9PiBkZXRhaWxzID0gbmV3RGV0YWlscztcblxuICAgIGNvbnN0IGdldFByaW9yaXR5ID0gKCkgPT4gcHJpb3JpdHk7XG4gICAgY29uc3Qgc2V0UHJpb3JpdHkgPSBuZXdQcmlvcml0eSA9PiBwcmlvcml0eSA9IG5ld1ByaW9yaXR5O1xuXG4gICAgY29uc3QgZ2V0RHVlRGF0ZSA9ICgpID0+IGR1ZURhdGU7XG4gICAgY29uc3Qgc2V0RHVlRGF0ZSA9IG5ld0R1ZURhdGUgPT4gZHVlRGF0ZSA9IG5ld0R1ZURhdGU7XG5cbiAgICBjb25zdCBnZXRTdGF0dXMgPSAoKSA9PiBzdGF0dXM7XG4gICAgY29uc3Qgc2V0U3RhdHVzID0gbmV3U3RhdHVzICA9PiBzdGF0dXMgPSBuZXdTdGF0dXM7ICAgXG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRUaXRsZSwgc2V0VGl0bGUsIFxuICAgICAgICBnZXREZXRhaWxzLCBzZXREZXRhaWxzLCBcbiAgICAgICAgZ2V0UHJpb3JpdHksIHNldFByaW9yaXR5LCBcbiAgICAgICAgZ2V0RHVlRGF0ZSwgc2V0RHVlRGF0ZSxcbiAgICAgICAgZ2V0U3RhdHVzLCBzZXRTdGF0dXNcbiAgICB9XG59O1xuXG4vLyBQcm9qZWN0IEZhY3RvcnlcblxuY29uc3QgUHJvamVjdCA9ICh0aXRsZSkgPT4ge1xuICAgIGNvbnN0IGdldFRpdGxlID0gKCkgPT4gdGl0bGU7XG4gICAgY29uc3Qgc2V0VGl0bGUgPSAobmV3VGl0bGUpID0+IHRpdGxlID0gbmV3VGl0bGU7XG5cbiAgICBsZXQgdGFza3MgPSBbXTtcblxuICAgIGNvbnN0IGdldFRhc2tzID0gKCkgPT4gdGFza3M7XG5cbiAgICBjb25zdCBzZXRUYXNrcyA9IChuZXdUYXNrcykgPT4gdGFza3MgPSBuZXdUYXNrcztcbiAgICBcbiAgICBjb25zdCBnZXRUYXNrID0gdGFza1RpdGxlID0+IHtcbiAgICAgICAgcmV0dXJuIHRhc2tzLmZpbmQoKHRhc2spID0+IHRhc2tUaXRsZSA9PT0gdGFzay5nZXRUaXRsZSgpKVxuICAgIH07XG5cbiAgICBjb25zdCBjb250YWluc1Rhc2sgPSB0YXNrVGl0bGUgPT4ge1xuICAgICAgICByZXR1cm4gdGFza3Muc29tZSgodGFzaykgPT4gdGFza1RpdGxlID09PSB0YXNrLmdldFRpdGxlKCkpXG4gICAgfTtcblxuICAgIGNvbnN0IGFkZFRhc2sgPSB0YXNrID0+IHRhc2tzLnB1c2godGFzaylcblxuICAgIGNvbnN0IHJlbW92ZVRhc2sgPSB0YXNrVGl0bGUgPT4ge1xuICAgICAgICB0YXNrcyA9IHRhc2tzLmZpbHRlcigodGFzaykgPT4gdGFza1RpdGxlICE9PSB0YXNrLmdldFRpdGxlKCkpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRUaXRsZSwgc2V0VGl0bGUsXG4gICAgICAgIGdldFRhc2tzLCBzZXRUYXNrcyxcbiAgICAgICAgZ2V0VGFzayxcbiAgICAgICAgY29udGFpbnNUYXNrLFxuICAgICAgICBhZGRUYXNrLCByZW1vdmVUYXNrXG4gICAgfVxufTtcblxuLy8gVG8gRG8gTGlzdCBGYWN0b3J5XG5cbmNvbnN0IFRvRG9MaXN0ID0gKCkgPT4ge1xuICAgIFxuICAgIGxldCBwcm9qZWN0cyA9IFtdXG4gICAgXG4gICAgY29uc3QgZ2V0UHJvamVjdHMgPSAoKSA9PiBwcm9qZWN0cztcblxuICAgIGNvbnN0IGdldFByb2plY3QgPSAocHJvamVjdFRpdGxlKSA9PiB7XG4gICAgICAgIHJldHVybiBwcm9qZWN0cy5maW5kKChwcm9qZWN0KSA9PiBwcm9qZWN0VGl0bGUgPT09IHByb2plY3QuZ2V0VGl0bGUoKSlcbiAgICB9O1xuXG4gICAgY29uc3QgY29udGFpbnNQcm9qZWN0ID0gKHByb2plY3RUaXRsZSkgPT4ge1xuICAgICAgICByZXR1cm4gcHJvamVjdHMuc29tZSgocHJvamVjdCkgPT4gcHJvamVjdFRpdGxlID09PSBwcm9qZWN0LmdldFRpdGxlKCkpXG4gICAgfVxuXG4gICAgY29uc3QgYWRkUHJvamVjdCA9IChwcm9qZWN0KSA9PiBwcm9qZWN0cy5wdXNoKHByb2plY3QpXG5cbiAgICBjb25zdCByZW1vdmVQcm9qZWN0ID0gKHByb2plY3RUaXRsZSkgPT4ge1xuICAgICAgICBwcm9qZWN0cyA9IHByb2plY3RzLmZpbHRlcigocHJvamVjdCkgPT4gcHJvamVjdFRpdGxlICE9PSBwcm9qZWN0LmdldFRpdGxlKCkpXG4gICAgfVxuXG4gICAgY29uc3Qgc2V0QWxsVGFza3MgPSAoKSA9PiB7fVxuXG4gICAgY29uc3Qgc2V0VG9kYXkgPSAoKSA9PiB7fVxuXG4gICAgY29uc3Qgc2V0VGhpc1dlZWsgPSAoKSA9PiB7fVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZ2V0UHJvamVjdHMsXG4gICAgICAgIGdldFByb2plY3QsXG4gICAgICAgIGNvbnRhaW5zUHJvamVjdCxcbiAgICAgICAgYWRkUHJvamVjdCwgcmVtb3ZlUHJvamVjdFxuICAgIH1cbn1cblxuZXhwb3J0IHtUYXNrLCBQcm9qZWN0LCBUb0RvTGlzdH0iLCJpbXBvcnQge1Rhc2ssIFByb2plY3QsIFRvRG9MaXN0fSBmcm9tIFwiLi9pbmRleFwiXG5cbi8vIFRvIERvIExpc3QgSW5pdGlhbGl6YXRpb246XG5cbmNvbnN0IHRvRG8gPSBUb0RvTGlzdCgpO1xuXG5jb25zdCBob21lID0gUHJvamVjdCgnSG9tZScpO1xuY29uc3QgdG9kYXkgPSBQcm9qZWN0KCdUb2RheScpO1xuY29uc3QgdGhpc1dlZWsgPSBQcm9qZWN0KCdUaGlzIFdlZWsnKTtcblxudG9Eby5hZGRQcm9qZWN0KGhvbWUpXG50b0RvLmFkZFByb2plY3QodG9kYXkpXG50b0RvLmFkZFByb2plY3QodGhpc1dlZWspXG5cbmNvbnN0IGRhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlLWRhdGUnKVxuZGF0ZS52YWx1ZSA9IGdldFRvZGF5KClcblxuLy8gRGl2IGxpc3RcblxuY29uc3QgZGl2T2JqZWN0ID0ge31cblxuLy8gVG9kYXkncyBEYXRlXG5mdW5jdGlvbiBnZXRUb2RheSgpIHtcbiAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xuICAgIGxldCBkZCA9IFN0cmluZyh0b2RheS5nZXREYXRlKCkpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgbGV0IG1tID0gU3RyaW5nKHRvZGF5LmdldE1vbnRoKCkgKyAxKS5wYWRTdGFydCgyLCAnMCcpO1xuICAgIGxldCB5eXl5ID0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgICByZXR1cm4geXl5eSArICctJyArIG1tICsgJy0nICsgZGQ7XG59XG5cbi8vIEdldC9TZXQgTmV3IGFuZCBQcmV2aW91cyBUYWtzczpcblxuZnVuY3Rpb24gZ2V0TmV3VGFza0luZm8oKSB7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRpdGxlXCIpLnZhbHVlO1xuICAgIGNvbnN0IGR1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImR1ZS1kYXRlXCIpLnZhbHVlO1xuICAgIGNvbnN0IHByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eVwiKS52YWx1ZTtcbiAgICBjb25zdCBkZXRhaWxzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXRhaWxzXCIpLnZhbHVlO1xuICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhdHVzXCIpLmNoZWNrZWQ7XG4gICAgbGV0IHRhc2tTdGF0dXNcbiAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgIHRhc2tTdGF0dXMgPSAnQ29tcGxldGUnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tTdGF0dXMgPSAnTm90IENvbXBsZXRlJztcbiAgICB9XG4gICAgY29uc3QgdGFzayA9IFRhc2sodGl0bGUsIGRldGFpbHMsIHByaW9yaXR5LCBkdWVEYXRlLCB0YXNrU3RhdHVzKVxuICAgIHJldHVybiB0YXNrXG59XG5cbmZ1bmN0aW9uIGdldFByZXZpb3VzVGFza0luZm8odGl0bGUpIHtcbiAgICBjb25zdCB0YXNrID0gaG9tZS5nZXRUYXNrKHRpdGxlKVxuICAgIHJldHVybiB0YXNrXG59XG5cbmZ1bmN0aW9uIHNldFByZXZpb3VzVGFza0luZm8odGFzaykge1xuICAgIGNvbnN0IG5ld1RpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0LXRpdGxlXCIpLnZhbHVlO1xuICAgIGNvbnN0IG5ld0R1ZURhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtZHVlLWRhdGVcIikudmFsdWU7XG4gICAgY29uc3QgbmV3UHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtcHJpb3JpdHlcIikudmFsdWU7XG4gICAgY29uc3QgbmV3RGV0YWlscyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1kZXRhaWxzXCIpLnZhbHVlO1xuICAgIGNvbnN0IG5ld1N0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1zdGF0dXNcIikuY2hlY2tlZDtcblxuICAgIHRhc2suc2V0VGl0bGUobmV3VGl0bGUpXG4gICAgdGFzay5zZXREdWVEYXRlKG5ld0R1ZURhdGUpXG4gICAgdGFzay5zZXRQcmlvcml0eShuZXdQcmlvcml0eSlcbiAgICB0YXNrLnNldERldGFpbHMobmV3RGV0YWlscylcblxuICAgIGlmIChuZXdTdGF0dXMpIHtcbiAgICAgICAgdGFzay5zZXRTdGF0dXMoJ0NvbXBsZXRlJylcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXNrLnNldFN0YXR1cygnTm90IENvbXBsZXRlJylcbiAgICB9XG59XG5cbi8vIENyZWF0aW5nIFRhc2sgVUlcblxuZnVuY3Rpb24gY3JlYXRlVGFza1VJKHRhc2spIHtcbiAgICAvLyBDcmVhdGluZyBlbGVtZW50c1xuICAgIGNvbnN0IHRhc2tIb2xkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza3MnKVxuICAgIGNvbnN0IHRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBmaXJzdFRhc2tFbGVtZW50cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IGxhc3RUYXNrRWxlbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnN0IHRhc2tFZGl0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29uc3QgZWRpdFN5bWJvbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIGNvbnN0IHRhc2tEZWxldGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBjb25zdCBkZWxldGVTeW1ib2wgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcblxuICAgIC8vIEFkZGluZyBjbGFzc2VzXG4gICAgdGFza0Rpdi5jbGFzc0xpc3QuYWRkKCd0YXNrJylcbiAgICBmaXJzdFRhc2tFbGVtZW50cy5jbGFzc0xpc3QuYWRkKCdmaXJzdC10YXNrLWVsZW1lbnRzJylcbiAgICB0YXNrVGl0bGUuY2xhc3NMaXN0LmFkZCgndGFzay10aXRsZScpXG4gICAgbGFzdFRhc2tFbGVtZW50cy5jbGFzc0xpc3QuYWRkKCdsYXN0LXRhc2stZWxlbWVudHMnKVxuICAgIHRhc2tEdWVEYXRlLmNsYXNzTGlzdC5hZGQoJ3Rhc2stZHVlLWRhdGUnKVxuICAgIHRhc2tFZGl0LmNsYXNzTGlzdC5hZGQoJ3Rhc2stZWRpdCcpXG4gICAgZWRpdFN5bWJvbC5jbGFzc0xpc3QuYWRkKCdtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCcsICdlZGl0LXN5bWJvbCcpXG4gICAgZWRpdFN5bWJvbC5kYXRhc2V0Lm1vZGFsVGFyZ2V0ID0gXCIjZWRpdC1tb2RhbFwiXG4gICAgdGFza0RlbGV0ZS5jbGFzc0xpc3QuYWRkKCd0YXNrLWRlbGV0ZScpXG4gICAgZGVsZXRlU3ltYm9sLmNsYXNzTGlzdC5hZGQoJ21hdGVyaWFsLWljb25zLW91dGxpbmVkJywgJ2RlbGV0ZS1zeW1ib2wnKVxuIFxuICAgIGlmICh0YXNrLmdldFN0YXR1cygpID09ICdDb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjaXR5ID0gMC41XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyQ29sb3IgPSBgcmdiYShpbmhlcml0LCBpbmhlcml0LCBpbmhlcml0LCAwLjUpYFxuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUub3BhY2l0eSA9IDFcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJDb2xvciA9IGByZ2JhKGluaGVyaXQsIGluaGVyaXQsIGluaGVyaXQsIDEpYFxuICAgIH1cblxuICAgIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ2xvdycpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBncmVlbic7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ21lZGl1bScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBvcmFuZ2UnO1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdoaWdoJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIHJlZCc7XG4gICAgfVxuXG4gICAgdGFza1RpdGxlLnRleHRDb250ZW50ID0gdGFzay5nZXRUaXRsZSgpO1xuICAgIHRhc2tEdWVEYXRlLnRleHRDb250ZW50ID0gdGFzay5nZXREdWVEYXRlKCk7XG4gICAgZWRpdFN5bWJvbC50ZXh0Q29udGVudCA9ICdlZGl0JztcbiAgICBkZWxldGVTeW1ib2wudGV4dENvbnRlbnQgPSAnZGVsZXRlJztcblxuICAgIC8vIEV2ZW50IExpc3RlbmVyc1xuICAgIGRlbGV0ZVN5bWJvbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGRlbGV0ZVRhc2spXG4gICAgZWRpdFN5bWJvbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5FZGl0VGFzaylcbiAgICBlZGl0U3ltYm9sLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZWRpdFRhc2spXG5cbiAgICAvLyBBZGQgVGFzayB0byBNYWluIFByb2plY3RcbiAgICBob21lLmFkZFRhc2sodGFzaylcblxuICAgIC8vIEFwcGVuZGluZyBpdGVtcyB0byBET01cbiAgICB0YXNrRGl2LmFwcGVuZChmaXJzdFRhc2tFbGVtZW50cywgbGFzdFRhc2tFbGVtZW50cylcbiAgICBmaXJzdFRhc2tFbGVtZW50cy5hcHBlbmQodGFza1RpdGxlKVxuICAgIGxhc3RUYXNrRWxlbWVudHMuYXBwZW5kKHRhc2tEdWVEYXRlLCB0YXNrRWRpdCwgdGFza0RlbGV0ZSlcbiAgICB0YXNrRWRpdC5hcHBlbmQoZWRpdFN5bWJvbClcbiAgICB0YXNrRGVsZXRlLmFwcGVuZChkZWxldGVTeW1ib2wpXG4gICAgdGFza0hvbGRlci5hcHBlbmQodGFza0RpdilcblxuICAgIC8vIEFkZGluZyBJdGVtIHRvIERpdk9iamVjdFxuICAgIGRpdk9iamVjdFt0YXNrXSA9IHRhc2tEaXZcbn1cblxuLy8gVXBkYXRpbmcgVGFzayBVSVxuXG5mdW5jdGlvbiB1cGRhdGVUYXNrVUkodGFzaykge1xuICAgIGNvbnN0IGRpdiA9IGRpdk9iamVjdFt0YXNrXVxuXG4gICAgY29uc3QgdGl0bGUgPSBkaXYuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF1cbiAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRhc2suZ2V0VGl0bGUoKVxuICAgIFxuICAgIGNvbnN0IGR1ZURhdGUgPSBkaXYuY2hpbGRyZW5bMV0uY2hpbGRyZW5bMF1cbiAgICBkdWVEYXRlLnRleHRDb250ZW50ID0gdGFzay5nZXREdWVEYXRlKClcblxuICAgIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ2xvdycpIHtcbiAgICAgICAgZGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIGdyZWVuJztcbiAgICB9IGVsc2UgaWYgKHRhc2suZ2V0UHJpb3JpdHkoKSA9PSAnbWVkaXVtJykge1xuICAgICAgICBkaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgb3JhbmdlJztcbiAgICB9IGVsc2UgaWYgKHRhc2suZ2V0UHJpb3JpdHkoKSA9PSAnaGlnaCcpIHtcbiAgICAgICAgZGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIHJlZCc7XG4gICAgfVxuXG4gICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0NvbXBsZXRlJykge1xuICAgICAgICBkaXYuc3R5bGUub3BhY2l0eSA9IDAuNVxuICAgICAgICBkaXYuc3R5bGUuYm9yZGVyQ29sb3IgPSAncmdiYShpbmhlcml0LCBpbmhlcml0LCBpbmhlcml0LCAwLjUpJ1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSAnTm90IENvbXBsZXRlJykge1xuICAgICAgICBkaXYuc3R5bGUub3BhY2l0eSA9IDFcbiAgICAgICAgZGl2LnN0eWxlLmJvcmRlckNvbG9yID0gJ3JnYmEoaW5oZXJpdCwgaW5oZXJpdCwgaW5oZXJpdCwgMSknXG4gICAgfVxufVxuXG5cbi8vIEV2ZW50IExpc3RlbmVyIFRhc2tzOlxuXG5mdW5jdGlvbiBkZWxldGVUYXNrKGUpIHtcbiAgICBjb25zdCB0aXRsZSA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLnRleHRDb250ZW50XG4gICAgaG9tZS5yZW1vdmVUYXNrKHRpdGxlKVxuICAgIGNvbnN0IGl0ZW0gPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZVxuICAgIGl0ZW0ucmVtb3ZlKClcbn1cblxuZnVuY3Rpb24gZWRpdFRhc2soZSkge1xuICAgIGNvbnN0IHRpdGxlID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0udGV4dENvbnRlbnRcbiAgICBjb25zdCB0YXNrID0gaG9tZS5nZXRUYXNrKHRpdGxlKVxuICAgIFxuICAgIGNvbnN0IGR1ZURhdGUgPSB0YXNrLmdldER1ZURhdGUoKVxuICAgIGNvbnN0IHByaW9yaXR5ID0gdGFzay5nZXRQcmlvcml0eSgpXG4gICAgY29uc3QgZGV0YWlscyA9IHRhc2suZ2V0RGV0YWlscygpXG4gICAgY29uc3Qgc3RhdHVzID0gdGFzay5nZXRTdGF0dXMoKVxuXG4gICAgY29uc3QgZWRpdFRpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtdGl0bGUnKVxuICAgIGNvbnN0IGVkaXREdWVEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtZHVlLWRhdGUnKVxuICAgIGNvbnN0IGVkaXRQcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXByaW9yaXR5JylcbiAgICBjb25zdCBlZGl0RGV0YWlscyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWRldGFpbHMnKVxuICAgIGNvbnN0IGVkaXRTdGF0dXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1zdGF0dXMnKVxuXG4gICAgZWRpdFRpdGxlLnZhbHVlID0gdGl0bGVcbiAgICBlZGl0RHVlRGF0ZS52YWx1ZSA9IGR1ZURhdGVcbiAgICBlZGl0UHJpb3JpdHkudmFsdWUgID0gcHJpb3JpdHlcbiAgICBlZGl0RGV0YWlscy52YWx1ZSA9IGRldGFpbHNcblxuICAgIGlmIChzdGF0dXMgPT0gJ05vdCBDb21wbGV0ZScpIHtcbiAgICAgICAgZWRpdFN0YXR1cy5jaGVja2VkID0gZmFsc2VcbiAgICB9IGVsc2Uge1xuICAgICAgICBlZGl0U3RhdHVzLmNoZWNrZWQgPSB0cnVlXG4gICAgfVxufVxuXG4vLyBTdWJtaXQgRm9ybSBCdXR0b24gRnVuY3Rpb25hbGl0aWVzXG5jb25zdCBzdWJtaXRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3VibWl0LXRhc2snKVxuXG5zdWJtaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG5ld1Rhc2sgPSBnZXROZXdUYXNrSW5mbygpXG4gICAgY3JlYXRlVGFza1VJKG5ld1Rhc2spXG4gICAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXctdGFzaycpXG4gICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWUtZGF0ZScpXG4gICAgZm9ybS5yZXNldCgpXG4gICAgZGF0ZS52YWx1ZSA9IGdldFRvZGF5KCk7IFxuICAgIH0pXG5cbmNvbnN0IGVkaXRUYXNrQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtdGFzay1zdWJtaXQnKVxuZWRpdFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXRpdGxlJykudmFsdWVcbiAgICBjb25zdCBvcmlnaW5hbEluZm8gPSBnZXRQcmV2aW91c1Rhc2tJbmZvKHRhc2tUaXRsZSlcbiAgICBzZXRQcmV2aW91c1Rhc2tJbmZvKG9yaWdpbmFsSW5mbylcbiAgICB1cGRhdGVUYXNrVUkob3JpZ2luYWxJbmZvKVxuICAgIH1cbilcblxuXG4vLyBNb2RhbCBPcGVuaW5nIC8gQ2xvc2luZ1xuXG5jb25zdCBhZGRUYXNrQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW1vZGFsLXRhcmdldF0nKVxuY29uc3QgY2xvc2VUYXNrQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNsb3NlLWJ1dHRvbl0nKVxuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdvdmVybGF5Jyk7XG5cbmZ1bmN0aW9uIG9wZW5BZGRUYXNrKGUpIHtcbiAgICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZS50YXJnZXQuZGF0YXNldC5tb2RhbFRhcmdldClcbiAgICBvcGVuTW9kYWwobW9kYWwpXG59XG5cbmZ1bmN0aW9uIGNsb3NlVGFzayhlKSB7XG4gICAgY29uc3QgbW9kYWwgPSBlLnRhcmdldC5jbG9zZXN0KCcubW9kYWwnKVxuICAgIGNsb3NlTW9kYWwobW9kYWwpXG59XG5cbmZ1bmN0aW9uIG9wZW5FZGl0VGFzayhlKSB7XG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGUudGFyZ2V0LmRhdGFzZXQubW9kYWxUYXJnZXQpXG4gICAgb3Blbk1vZGFsKG1vZGFsKVxufVxuXG5hZGRUYXNrQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlbkFkZFRhc2spICBcbn0pXG5cbmNsb3NlVGFza0J1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlVGFzaylcbn0pXG5cbmZ1bmN0aW9uIG9wZW5Nb2RhbChtb2RhbCkge1xuICAgIGlmIChtb2RhbCA9PSBudWxsKSByZXR1cm5cbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxuICAgIG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbn1cblxuZnVuY3Rpb24gY2xvc2VNb2RhbChtb2RhbCkge1xuICAgIGlmIChtb2RhbCA9PSBudWxsKSByZXR1cm5cbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcbn0iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oMTM4KTtcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4MDMpO1xuIl0sIm5hbWVzIjpbIlRhc2siLCJ0aXRsZSIsImRldGFpbHMiLCJwcmlvcml0eSIsImR1ZURhdGUiLCJzdGF0dXMiLCJnZXRUaXRsZSIsInNldFRpdGxlIiwibmV3VGl0bGUiLCJnZXREZXRhaWxzIiwic2V0RGV0YWlscyIsIm5ld0RldGFpbHMiLCJnZXRQcmlvcml0eSIsInNldFByaW9yaXR5IiwibmV3UHJpb3JpdHkiLCJnZXREdWVEYXRlIiwic2V0RHVlRGF0ZSIsIm5ld0R1ZURhdGUiLCJnZXRTdGF0dXMiLCJzZXRTdGF0dXMiLCJuZXdTdGF0dXMiLCJQcm9qZWN0IiwidGFza3MiLCJnZXRUYXNrcyIsInNldFRhc2tzIiwibmV3VGFza3MiLCJnZXRUYXNrIiwidGFza1RpdGxlIiwiZmluZCIsInRhc2siLCJjb250YWluc1Rhc2siLCJzb21lIiwiYWRkVGFzayIsInB1c2giLCJyZW1vdmVUYXNrIiwiZmlsdGVyIiwiVG9Eb0xpc3QiLCJwcm9qZWN0cyIsImdldFByb2plY3RzIiwiZ2V0UHJvamVjdCIsInByb2plY3RUaXRsZSIsInByb2plY3QiLCJjb250YWluc1Byb2plY3QiLCJhZGRQcm9qZWN0IiwicmVtb3ZlUHJvamVjdCIsInRvRG8iLCJob21lIiwidG9kYXkiLCJ0aGlzV2VlayIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWx1ZSIsImdldFRvZGF5IiwiZGl2T2JqZWN0IiwiRGF0ZSIsImRkIiwiU3RyaW5nIiwiZ2V0RGF0ZSIsInBhZFN0YXJ0IiwibW0iLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwiZGVsZXRlVGFzayIsImUiLCJ0YXJnZXQiLCJwYXJlbnROb2RlIiwiY2hpbGRyZW4iLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsImVkaXRUYXNrIiwiZWRpdFRpdGxlIiwiZWRpdER1ZURhdGUiLCJlZGl0UHJpb3JpdHkiLCJlZGl0RGV0YWlscyIsImVkaXRTdGF0dXMiLCJjaGVja2VkIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwidGFza0hvbGRlciIsInF1ZXJ5U2VsZWN0b3IiLCJ0YXNrRGl2IiwiY3JlYXRlRWxlbWVudCIsImZpcnN0VGFza0VsZW1lbnRzIiwibGFzdFRhc2tFbGVtZW50cyIsInRhc2tEdWVEYXRlIiwidGFza0VkaXQiLCJlZGl0U3ltYm9sIiwidGFza0RlbGV0ZSIsImRlbGV0ZVN5bWJvbCIsImNsYXNzTGlzdCIsImFkZCIsImRhdGFzZXQiLCJtb2RhbFRhcmdldCIsInN0eWxlIiwib3BhY2l0eSIsImJvcmRlckNvbG9yIiwiYm9yZGVyTGVmdCIsIm9wZW5FZGl0VGFzayIsImFwcGVuZCIsImNyZWF0ZVRhc2tVSSIsInRhc2tTdGF0dXMiLCJnZXROZXdUYXNrSW5mbyIsImZvcm0iLCJkYXRlIiwicmVzZXQiLCJvcmlnaW5hbEluZm8iLCJzZXRQcmV2aW91c1Rhc2tJbmZvIiwiZGl2IiwidXBkYXRlVGFza1VJIiwiYWRkVGFza0J1dHRvbnMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2xvc2VUYXNrQnV0dG9ucyIsIm92ZXJsYXkiLCJvcGVuQWRkVGFzayIsIm9wZW5Nb2RhbCIsImNsb3NlVGFzayIsIm1vZGFsIiwiY2xvc2VzdCIsImZvckVhY2giLCJidXR0b24iLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9