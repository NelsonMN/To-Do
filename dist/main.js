(()=>{"use strict";var t={138:(t,e,n)=>{n.d(e,{IK:()=>s,iQ:()=>d,m8:()=>o});const d=(t,e,n,d,s,o)=>({getTitle:()=>t,setTitle:e=>t=e,getDescription:()=>e,setDescription:t=>e=t,getDate:()=>n,setDate:t=>n=t,getPriority:()=>d,setPriority:t=>d=t,getStatus:()=>s,setStatus:t=>s=t,getId:()=>o,setId:t=>o=t}),s=(t,e)=>{let n=[];return{getTasks:()=>n,getProjectTitle:()=>t,getProjectId:()=>e,setProjectTitle:e=>t=e,setProjectId:t=>e=t,getTask:t=>n.find((e=>e.getId()===t)),addTask:t=>{n.push(t)},removeTask:t=>{n=n.filter((e=>e.getId()!==t))}}},o=()=>{let t=[];return{getProject:e=>t.find((t=>t.getProjectId()===e)),getProjects:()=>t,addProject:e=>{t.push(e)},removeProject:e=>{t=t.filter((t=>t.getProjectId()!==e))}}}},982:(t,e,n)=>{n.d(e,{B:()=>c,z:()=>a});const d=document.querySelectorAll("[data-modal-target]"),s=document.querySelectorAll("[data-close-button]"),o=document.getElementById("overlay");function c(t){null!=t&&(t.classList.add("active"),o.classList.add("active"))}function a(t){null!=t&&(t.classList.remove("active"),o.classList.remove("active"))}d.forEach((t=>{t.addEventListener("click",(()=>{c(document.querySelector(t.dataset.modalTarget))}))})),s.forEach((t=>{t.addEventListener("click",(()=>{a(t.closest(".form"))}))}))},803:(t,e,n)=>{var d=n(138),s=n(982);const o=(0,d.m8)();function c(){const t=u.value,e=self.crypto.randomUUID();return(0,d.IK)(t,e)}function a(t){const e=document.querySelector(".projects"),n=document.createElement("div");n.id=t.getProjectId();const d=document.getElementById("add-project");n.classList.add("project","high-light");const s=document.createElement("div");s.classList.add("project-title-div","high-light");const o=document.createElement("span");o.classList.add("project-title","high-light"),o.textContent=t.getProjectTitle();const c=document.createElement("input");c.classList.add("edit-project-title","high-light","hidden"),o.type="text";const a=document.createElement("div");a.classList.add("edit-project-buttons");const r=document.createElement("span");r.classList.add("edit-project","material-icons-outlined"),r.textContent="edit";const i=document.createElement("span");i.classList.add("delete-project","material-icons-outlined"),i.textContent="delete";const l=document.createElement("span");l.classList.add("edit-project-btn","material-icons-outlined","hidden"),l.textContent="check";const g=document.createElement("span");return g.classList.add("cancel-project-btn","material-icons-outlined","hidden"),g.textContent="cancel",n.append(s,a),s.append(o,c),a.append(r,i,l,g),e.insertBefore(n,d),n}const r=document.querySelector(".add-project"),i=document.getElementById("add-project"),l=document.querySelector(".set-new-project-btn"),g=document.querySelector(".cancel-new-project-btn"),u=document.getElementById("project-title-input");function m(){o.getProject(y).getTasks().forEach((t=>v(t)))}r.addEventListener("click",(()=>{i.classList.toggle("hidden"),r.classList.toggle("hidden")})),l.addEventListener("click",(()=>{const t=c();y=t.getProjectId(),o.addProject(t),a(t),i.classList.toggle("hidden"),r.classList.toggle("hidden"),u.value=""})),g.addEventListener("click",(()=>{i.classList.toggle("hidden"),r.classList.toggle("hidden"),u.value=""}));const p=document.querySelector(".projects"),h="\n    transform: scale(1.01);\n    transition: 0.2s;\n    box-shadow: 5px 5px 5px #bcbcbc;\n    ";let y,L;function v(t){const e=document.querySelector(".tasks"),n=document.createElement("div");n.classList.add("task"),n.id=t.getId(),n.dataset.project=y;const d=document.createElement("div");d.classList.add("first-task-elements"),"Low"==t.getPriority()?n.style.borderLeft="5px solid green":"Medium"==t.getPriority()?n.style.borderLeft="5px solid orange":n.style.borderLeft="5px solid red","Complete"==t.getStatus()?n.style.opacity="0.5":"Incomplete"==t.getStatus()&&(n.style.opactiy="1");const s=document.createElement("div");s.classList.add("title"),s.textContent=t.getTitle();const o=document.createElement("div");o.classList.add("last-task-elements");const c=document.createElement("button");c.textContent="Details",c.classList.add("details");const a=document.createElement("div");a.classList.add("due-date"),a.textContent=t.getDate();const r=document.createElement("span");r.classList.add("edit","material-icons-outlined"),r.textContent="edit";const i=document.createElement("span");i.classList.add("delete","material-icons-outlined"),i.textContent="delete",d.append(s),o.append(c,a,r,i),n.append(d,o),e.append(n)}p.addEventListener("click",(t=>{if(document.querySelectorAll(".task").forEach((t=>t.remove())),document.querySelectorAll(".project").forEach((t=>{t.classList.contains("high-light")&&(t.removeAttribute("style"),t.classList.remove("selected"))})),t.target.matches("div")&&t.target.classList.contains("project")?(t.target.style.cssText=h,y=t.target.id,m()):t.target.matches("div")&&(t.target.classList.contains("edit-project-title")||t.target.classList.contains("project-title-div"))&&t.target.classList.contains("high-light")?(t.target.parentNode.style.cssText=h,y=t.target.parentNode.id,m()):(t.target.matches("span")&&t.target.classList.contains("project-title")&&t.target.classList.contains("high-light")||t.target.matches("span")&&(t.target.classList.contains("edit-project")||t.target.classList.contains("edit-project-btn")||t.target.classList.contains("cancel-project-btn")))&&(t.target.parentNode.parentNode.style.cssText=h,y=t.target.parentNode.parentNode.id,m()),t.target.matches("span")&&"delete"==t.target.textContent){const e=t.target.parentNode.parentNode,n=e.id;o.removeProject(n),e.remove()}if(t.target.matches("span")&&"edit"==t.target.textContent){t.target.parentNode.parentNode.style.cssText=h,t.target.parentNode.parentNode.classList.add("selected");const e=t.target.parentNode.parentNode.children[0].children[0],n=t.target.parentNode.parentNode.children[0].children[1];n.value=e.textContent;const d=t.target.parentNode.children[0],s=t.target.parentNode.children[1],o=t.target.parentNode.children[2],c=t.target.parentNode.children[3];e.classList.toggle("hidden"),n.classList.toggle("hidden"),d.classList.toggle("hidden"),s.classList.toggle("hidden"),o.classList.toggle("hidden"),c.classList.toggle("hidden")}if(t.target.matches("span")&&"check"==t.target.textContent){const e=t.target.parentNode.parentNode.id,n=o.getProject(e),d=t.target.parentNode.parentNode.children[0].children[0],s=t.target.parentNode.parentNode.children[0].children[1];n.setProjectTitle(s.value),d.textContent=n.getProjectTitle();const c=t.target.parentNode.children[0],a=t.target.parentNode.children[1],r=t.target.parentNode.children[2],i=t.target.parentNode.children[3];d.classList.toggle("hidden"),s.classList.toggle("hidden"),c.classList.toggle("hidden"),a.classList.toggle("hidden"),r.classList.toggle("hidden"),i.classList.toggle("hidden")}if(t.target.matches("span")&&"cancel"==t.target.textContent){t.target.parentNode.parentNode.style.cssText=h,t.target.parentNode.parentNode.classList.add("selected");const e=t.target.parentNode.parentNode.children[0].children[0],n=t.target.parentNode.parentNode.children[0].children[1],d=t.target.parentNode.children[0],s=t.target.parentNode.children[1],o=t.target.parentNode.children[2],c=t.target.parentNode.children[3];e.classList.toggle("hidden"),n.classList.toggle("hidden"),d.classList.toggle("hidden"),s.classList.toggle("hidden"),o.classList.toggle("hidden"),c.classList.toggle("hidden")}})),document.querySelector(".tasks").addEventListener("click",(t=>{if(t.target.matches("span")&&"edit"==t.target.textContent){const e=document.querySelector("#edit-form");(0,s.B)(e);const n=t.target.parentNode.parentNode.id,d=o.getProject(y).getTask(n);L=n;const c=document.getElementById("edit-title"),a=document.getElementById("edit-description"),r=document.getElementById("edit-due-date"),i=document.getElementById("edit-priority"),l=document.getElementById("edit-status");c.value=d.getTitle(),a.value=d.getDescription(),r.value=d.getDate(),i.value=d.getPriority(),"Complete"==d.getStatus()?l.checked=!0:l.checked=!1}else if(t.target.matches("span")&&"delete"==t.target.textContent){const e=t.target.parentNode.parentNode;o.getProject(y).removeTask(e.id),e.remove()}else if(t.target.matches("button")&&"Details"==t.target.textContent){const e=t.target.parentNode.parentNode.id,n=o.getProject(y).getTask(e),d=document.getElementById("task-title-output"),c=document.getElementById("task-due-date-output"),a=document.getElementById("task-priority-output"),r=document.getElementById("task-status-output"),i=document.getElementById("task-details-output");d.textContent=n.getTitle(),c.textContent=n.getDate(),a.textContent=n.getPriority(),r.textContent=n.getStatus(),i.textContent=n.getDescription();const l=document.getElementById("task-details");(0,s.B)(l),document.querySelectorAll("[data-close-button]").forEach((t=>{t.addEventListener("click",(()=>{const e=t.closest("#task-details");(0,s.z)(e)}))}))}}));const E=document.querySelector(".add-task"),j=document.querySelector(".edit-task");E.addEventListener("click",(t=>{t.preventDefault();const e=function(){const t=o.getProject(y),e=document.getElementById("title").value,n=document.getElementById("description").value,s=document.getElementById("due-date").value,c=document.getElementById("priority").value;let a;a=document.getElementById("status").checked?"Complete":"Incomplete";const r=self.crypto.randomUUID(),i=(0,d.iQ)(e,n,s,c,a,r);return t.addTask(i),i}();v(e),document.querySelector(".form-card").reset();const n=document.getElementById("due-date"),s=(new Date).toISOString().slice(0,10);n.value=s})),j.addEventListener("click",(t=>{t.preventDefault(),function(){const t=o.getProject(y).getTask(L),e=document.getElementById("edit-title").value,n=document.getElementById("edit-description").value,d=document.getElementById("edit-due-date").value,s=document.getElementById("edit-priority").value,c=document.getElementById("edit-status").checked;t.setTitle(e),t.setDescription(n),t.setDate(d),t.setPriority(s),c?t.setStatus("Complete"):t.setStatus("Incomplete")}(),function(t){const e=document.getElementById(t),n=o.getProject(y).getTask(t);e.childNodes[0].textContent=n.getTitle(),"Low"==n.getPriority()?e.style.borderLeft="5px solid green":"Medium"==n.getPriority()?e.style.borderLeft="5px solid orange":e.style.borderLeft="5px solid red","Complete"==n.getStatus()?e.style.opacity="0.5":"Incomplete"==n.getStatus()&&(e.style.opacity="1"),e.childNodes[1].childNodes[1].textContent=n.getDate()}(L)}));const N=document.getElementById("due-date"),I=(new Date).toISOString().slice(0,10);N.value=I;const f=c();f.setProjectTitle("Default Project"),o.addProject(f);const x=a(f);y=f.getProjectId(),x.id=y,x.classList.add("selected"),x.style.cssText=h}},e={};function n(d){var s=e[d];if(void 0!==s)return s.exports;var o=e[d]={exports:{}};return t[d](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var d in e)n.o(e,d)&&!n.o(t,d)&&Object.defineProperty(t,d,{enumerable:!0,get:e[d]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n(138),n(803),n(982)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SixHQUcvQ0ssRUFBT0QsUUNwQmZKLEVBQW9CTyxFQUFJLENBQUNILEVBQVNJLEtBQ2pDLElBQUksSUFBSUMsS0FBT0QsRUFDWFIsRUFBb0JVLEVBQUVGLEVBQVlDLEtBQVNULEVBQW9CVSxFQUFFTixFQUFTSyxJQUM1RUUsT0FBT0MsZUFBZVIsRUFBU0ssRUFBSyxDQUFFSSxZQUFZLEVBQU1DLElBQUtOLEVBQVdDLE1DSjNFVCxFQUFvQlUsRUFBSSxDQUFDSyxFQUFLQyxJQUFVTCxPQUFPTSxVQUFVQyxlQUFlQyxLQUFLSixFQUFLQyxHQ0dsRmhCLEVBQW9CLEtBQ3BCQSxFQUFvQixLQUNNQSxFQUFvQixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG8tZG8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG8tZG8vLi9zcmMvbW9kYWwuanMiLCJ3ZWJwYWNrOi8vdG8tZG8vLi9zcmMvdXNlci1pbnRlcmZhY2UuanMiLCJ3ZWJwYWNrOi8vdG8tZG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG8tZG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvLWRvL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vdG8tZG8vd2VicGFjay9zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFRhc2sgPSAodGl0bGUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgc3RhdHVzLCBpZCkgPT4ge1xuXG4gICAgY29uc3QgZ2V0VGl0bGUgPSAoKSA9PiB0aXRsZTtcbiAgICBjb25zdCBzZXRUaXRsZSA9IG5ld1RpdGxlID0+IHRpdGxlID0gbmV3VGl0bGU7XG4gICAgY29uc3QgZ2V0RGVzY3JpcHRpb24gPSAoKSA9PiBkZXNjcmlwdGlvbjtcbiAgICBjb25zdCBzZXREZXNjcmlwdGlvbj0gbmV3RGVzY3JpcHRpb24gPT4gZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvbjtcbiAgICBjb25zdCBnZXREYXRlID0gKCkgPT4gZHVlRGF0ZTtcbiAgICBjb25zdCBzZXREYXRlID0gbmV3RGF0ZSA9PiBkdWVEYXRlID0gbmV3RGF0ZTtcbiAgICBjb25zdCBnZXRQcmlvcml0eSA9ICgpID0+IHByaW9yaXR5O1xuICAgIGNvbnN0IHNldFByaW9yaXR5ID0gbmV3UHJpb3JpdHkgPT4gcHJpb3JpdHkgPSBuZXdQcmlvcml0eTtcbiAgICBjb25zdCBnZXRTdGF0dXMgPSAoKSA9PiBzdGF0dXM7XG4gICAgY29uc3Qgc2V0U3RhdHVzID0gbmV3U3RhdHVzID0+IHN0YXR1cyA9IG5ld1N0YXR1cztcbiAgICBjb25zdCBnZXRJZCA9ICgpID0+IGlkO1xuICAgIGNvbnN0IHNldElkID0gbmV3SWQgPT4gaWQgPSBuZXdJZDtcblxuICAgIHJldHVybiB7Z2V0VGl0bGUsIHNldFRpdGxlLCBnZXREZXNjcmlwdGlvbiwgc2V0RGVzY3JpcHRpb24sIGdldERhdGUsIHNldERhdGUsIGdldFByaW9yaXR5LCBzZXRQcmlvcml0eSwgZ2V0U3RhdHVzLCBzZXRTdGF0dXMsIGdldElkLCBzZXRJZH1cbn07XG5cblxuY29uc3QgUHJvamVjdCA9IChwcm9qZWN0VGl0bGUsIHByb2plY3RJZCkgPT4ge1xuXG4gICAgbGV0IHByb2plY3QgPSBbXTtcblxuICAgIGNvbnN0IGdldFByb2plY3RUaXRsZSA9ICgpID0+IHByb2plY3RUaXRsZTtcbiAgICBjb25zdCBzZXRQcm9qZWN0VGl0bGUgPSBuZXdUaXRsZSA9PiBwcm9qZWN0VGl0bGUgPSBuZXdUaXRsZTtcbiAgICBjb25zdCBnZXRQcm9qZWN0SWQgPSAoKSA9PiBwcm9qZWN0SWQ7XG4gICAgY29uc3Qgc2V0UHJvamVjdElkID0gbmV3SWQgPT4gcHJvamVjdElkID0gbmV3SWQ7XG5cbiAgICBjb25zdCBnZXRUYXNrID0gKGlkKSA9PiB7XG4gICAgICAgIHJldHVybiBwcm9qZWN0LmZpbmQoKHRhc2spID0+IHRhc2suZ2V0SWQoKSA9PT0gaWQpXG4gICAgfTtcblxuICAgIGNvbnN0IGdldFRhc2tzID0gKCkgPT4gcHJvamVjdDtcblxuICAgIGNvbnN0IGFkZFRhc2sgPSAodGFzaykgPT4ge1xuICAgICAgICBwcm9qZWN0LnB1c2godGFzaylcbiAgICB9O1xuXG4gICAgY29uc3QgcmVtb3ZlVGFzayA9IChpZCkgPT4ge1xuICAgICAgICBwcm9qZWN0ID0gcHJvamVjdC5maWx0ZXIoKHRhc2spID0+IHRhc2suZ2V0SWQoKSAhPT0gaWQpXG4gICAgfTtcblxuICAgIHJldHVybiB7Z2V0VGFza3MsIGdldFByb2plY3RUaXRsZSwgZ2V0UHJvamVjdElkLCBzZXRQcm9qZWN0VGl0bGUsIHNldFByb2plY3RJZCwgZ2V0VGFzaywgYWRkVGFzaywgcmVtb3ZlVGFza31cbn07XG5cblxuY29uc3QgVG9EbyA9ICgpID0+IHtcbiAgICBcbiAgICBsZXQgdG9EbyA9IFtdO1xuICAgIFxuICAgIGNvbnN0IGdldFByb2plY3QgPSAocHJvamVjdElkKSA9PiB7XG4gICAgICAgIHJldHVybiB0b0RvLmZpbmQoKHByb2plY3QpID0+IHByb2plY3QuZ2V0UHJvamVjdElkKCkgPT09IHByb2plY3RJZClcbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0UHJvamVjdHMgPSAoKSA9PiB0b0RvO1xuXG4gICAgY29uc3QgYWRkUHJvamVjdCA9IChwcm9qZWN0KSA9PiB7XG4gICAgICAgIHRvRG8ucHVzaChwcm9qZWN0KVxuICAgIH07XG5cbiAgICBjb25zdCByZW1vdmVQcm9qZWN0ID0gKHByb2plY3RJZCkgPT4ge1xuICAgICAgICB0b0RvID0gdG9Eby5maWx0ZXIoKHByb2plY3QpID0+IHByb2plY3QuZ2V0UHJvamVjdElkKCkgIT09IHByb2plY3RJZClcbiAgICB9O1xuICAgIFxuICAgIHJldHVybiB7Z2V0UHJvamVjdCwgZ2V0UHJvamVjdHMsIGFkZFByb2plY3QsIHJlbW92ZVByb2plY3R9XG59O1xuXG5leHBvcnQge1Rhc2ssIFByb2plY3QsIFRvRG99IiwiY29uc3Qgb3Blbk1vZGFsQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1tb2RhbC10YXJnZXRdXCIpO1xuY29uc3QgY2xvc2VNb2RhbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtY2xvc2UtYnV0dG9uXVwiKTtcbmNvbnN0IG92ZXJsYXkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm92ZXJsYXlcIik7XG5cbm9wZW5Nb2RhbEJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihidXR0b24uZGF0YXNldC5tb2RhbFRhcmdldCk7XG4gICAgICAgIG9wZW5Gb3JtKGZvcm0pO1xuICAgIH0pXG59KSBcblxuY2xvc2VNb2RhbEJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjb25zdCBmb3JtID0gYnV0dG9uLmNsb3Nlc3QoXCIuZm9ybVwiKVxuICAgICAgICBjbG9zZUZvcm0oZm9ybSk7XG4gICAgfSlcbn0pXG5cbmZ1bmN0aW9uIG9wZW5Gb3JtKGZvcm0pIHtcbiAgICBpZiAoZm9ybSA9PSBudWxsKSByZXR1cm5cbiAgICBmb3JtLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xufVxuXG5mdW5jdGlvbiBjbG9zZUZvcm0oZm9ybSkge1xuICAgIGlmIChmb3JtID09IG51bGwpIHJldHVyblxuICAgIGZvcm0uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIik7XG59XG5cbmV4cG9ydCB7b3BlbkZvcm0sIGNsb3NlRm9ybX0iLCJpbXBvcnQge1Rhc2ssIFByb2plY3QsIFRvRG99IGZyb20gJy4vaW5kZXgnXG5pbXBvcnQge29wZW5Gb3JtLCBjbG9zZUZvcm19IGZyb20gJy4vbW9kYWwnXG5cbi8vIFByb2plY3QgVUlcblxuY29uc3QgdG9Eb0xpc3QgPSBUb0RvKClcblxuLy8gUHJvamVjdCBVSVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0KCkge1xuICAgY29uc3QgcHJvamVjdFRpdGxlID0gcHJvamVjdFRpdGxlSW5wdXQudmFsdWVcbiAgIGNvbnN0IHByb2plY3RJZCA9IHNlbGYuY3J5cHRvLnJhbmRvbVVVSUQoKTtcblxuICAgY29uc3QgbmV3UHJvamVjdCA9IFByb2plY3QocHJvamVjdFRpdGxlLCBwcm9qZWN0SWQpXG4gICByZXR1cm4gbmV3UHJvamVjdFxufVxuXG5mdW5jdGlvbiBjcmVhdGVQcm9qZWN0VUkocHJvamVjdCkge1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0c1wiKVxuICAgIGNvbnN0IHByb2plY3REaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIHByb2plY3REaXYuaWQgPSBwcm9qZWN0LmdldFByb2plY3RJZCgpXG5cbiAgICBjb25zdCBhZGRQcm9qZWN0RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZGQtcHJvamVjdFwiKVxuICAgIHByb2plY3REaXYuY2xhc3NMaXN0LmFkZCgncHJvamVjdCcsICdoaWdoLWxpZ2h0JylcblxuICAgIGNvbnN0IHByb2plY3RUaXRsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgcHJvamVjdFRpdGxlRGl2LmNsYXNzTGlzdC5hZGQoXCJwcm9qZWN0LXRpdGxlLWRpdlwiLCBcImhpZ2gtbGlnaHRcIilcblxuICAgIGNvbnN0IHByb2plY3RUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIHByb2plY3RUaXRsZS5jbGFzc0xpc3QuYWRkKFwicHJvamVjdC10aXRsZVwiLCBcImhpZ2gtbGlnaHRcIilcbiAgICBwcm9qZWN0VGl0bGUudGV4dENvbnRlbnQgPSBwcm9qZWN0LmdldFByb2plY3RUaXRsZSgpXG5cbiAgICBjb25zdCBwcm9qZWN0VGl0bGVJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JylcbiAgICBwcm9qZWN0VGl0bGVJbnB1dC5jbGFzc0xpc3QuYWRkKFwiZWRpdC1wcm9qZWN0LXRpdGxlXCIsIFwiaGlnaC1saWdodFwiLCBcImhpZGRlblwiKVxuICAgIHByb2plY3RUaXRsZS50eXBlID0gXCJ0ZXh0XCJcblxuICAgIGNvbnN0IHByb2plY3RFZGl0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICBwcm9qZWN0RWRpdERpdi5jbGFzc0xpc3QuYWRkKFwiZWRpdC1wcm9qZWN0LWJ1dHRvbnNcIilcblxuICAgIGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJylcbiAgICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0LXByb2plY3RcIiwgXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKVxuICAgIGVkaXRCdG4udGV4dENvbnRlbnQgPSAnZWRpdCdcblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QuYWRkKFwiZGVsZXRlLXByb2plY3RcIiwgXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKVxuICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9ICdkZWxldGUnXG5cbiAgICBjb25zdCBjaGVja0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIGNoZWNrQnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0LXByb2plY3QtYnRuXCIsIFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIiwgXCJoaWRkZW5cIilcbiAgICBjaGVja0J0bi50ZXh0Q29udGVudCA9ICdjaGVjaydcblxuICAgIGNvbnN0IGNhbmNlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKVxuICAgIGNhbmNlbEJ0bi5jbGFzc0xpc3QuYWRkKFwiY2FuY2VsLXByb2plY3QtYnRuXCIsIFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIiwgXCJoaWRkZW5cIilcbiAgICBjYW5jZWxCdG4udGV4dENvbnRlbnQgPSAnY2FuY2VsJ1xuXG4gICAgcHJvamVjdERpdi5hcHBlbmQocHJvamVjdFRpdGxlRGl2LCBwcm9qZWN0RWRpdERpdilcbiAgICBwcm9qZWN0VGl0bGVEaXYuYXBwZW5kKHByb2plY3RUaXRsZSwgcHJvamVjdFRpdGxlSW5wdXQpXG4gICAgcHJvamVjdEVkaXREaXYuYXBwZW5kKGVkaXRCdG4sIGRlbGV0ZUJ0biwgY2hlY2tCdG4sIGNhbmNlbEJ0bilcbiAgICBwcm9qZWN0c0NvbnRhaW5lci5pbnNlcnRCZWZvcmUocHJvamVjdERpdiwgYWRkUHJvamVjdERpdilcblxuICAgIHJldHVybiBwcm9qZWN0RGl2XG59XG5cblxuLy8gQWRkIFByb2plY3QgRXZlbnQgTGlzdGVuZXJzXG5jb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1wcm9qZWN0JylcbmNvbnN0IGFkZFByb2plY3REaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXByb2plY3QnKVxuY29uc3Qgc2V0UHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2V0LW5ldy1wcm9qZWN0LWJ0blwiKVxuY29uc3QgY2FuY2VsUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsLW5ldy1wcm9qZWN0LWJ0blwiKVxuY29uc3QgcHJvamVjdFRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtdGl0bGUtaW5wdXRcIilcblxuYWRkUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBhZGRQcm9qZWN0RGl2LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgYWRkUHJvamVjdEJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxufSlcblxuc2V0UHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCBuZXdQcm9qZWN0ID0gY3JlYXRlUHJvamVjdCgpXG4gICAgcHJvamVjdERpdklkID0gbmV3UHJvamVjdC5nZXRQcm9qZWN0SWQoKVxuICAgIHRvRG9MaXN0LmFkZFByb2plY3QobmV3UHJvamVjdClcbiAgICBjcmVhdGVQcm9qZWN0VUkobmV3UHJvamVjdClcbiAgICBhZGRQcm9qZWN0RGl2LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgYWRkUHJvamVjdEJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxuICAgIHByb2plY3RUaXRsZUlucHV0LnZhbHVlID0gJydcbn0pXG5cbmNhbmNlbFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgYWRkUHJvamVjdERpdi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxuICAgIGFkZFByb2plY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICBwcm9qZWN0VGl0bGVJbnB1dC52YWx1ZSA9ICcnXG59KVxuXG5cbi8vIER5bmFtaWMgUHJvamVjdCBFdmVudCBMaXN0ZW5lcnNcbmZ1bmN0aW9uIHJlbW92ZVByb2plY3RTdHlsaW5ncygpIHtcbiAgICBjb25zdCBwcm9qZWN0RGl2cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9qZWN0JylcbiAgICBwcm9qZWN0RGl2cy5mb3JFYWNoKGUgPT4ge1xuICAgICAgICBpZiAoZS5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZ2gtbGlnaHQnKSkge1xuICAgICAgICAgICAgZS5yZW1vdmVBdHRyaWJ1dGUoJ3N0eWxlJylcbiAgICAgICAgICAgIGUuY2xhc3NMaXN0LnJlbW92ZSgnc2VsZWN0ZWQnKVxuICAgICAgICB9XG4gICAgfSlcbn1cblxuZnVuY3Rpb24gcmVtb3ZlVGFza3MoKSB7XG4gICAgY29uc3QgdGFza0RpdnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFzaycpXG4gICAgdGFza0RpdnMuZm9yRWFjaChlID0+IGUucmVtb3ZlKCkpXG59XG5cbmZ1bmN0aW9uIHJlbmRlclByb2plY3RUYXNrcygpIHtcbiAgICBjb25zdCBwcm9qZWN0VGFza3MgPSB0b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3REaXZJZCkuZ2V0VGFza3MoKVxuICAgIHByb2plY3RUYXNrcy5mb3JFYWNoKCh0YXNrKSA9PiBjcmVhdGVUYXNrVUkodGFzaykpXG59XG5cbmNvbnN0IHByb2plY3RzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3RzJylcbmNvbnN0IHByb2plY3RTdHlsZSA9IGBcbiAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMDEpO1xuICAgIHRyYW5zaXRpb246IDAuMnM7XG4gICAgYm94LXNoYWRvdzogNXB4IDVweCA1cHggI2JjYmNiYztcbiAgICBgXG5cbmxldCBwcm9qZWN0RGl2SWQgXG5cbnByb2plY3RzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblxuICAgIC8vIEhvdmVyIC8gU2VsZWN0aW9uIHN0eWxpbmdcbiAgICByZW1vdmVUYXNrcygpXG4gICAgcmVtb3ZlUHJvamVjdFN0eWxpbmdzKClcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhcImRpdlwiKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Byb2plY3QnKSkge1xuICAgICAgICBlLnRhcmdldC5zdHlsZS5jc3NUZXh0ID0gcHJvamVjdFN0eWxlO1xuICAgICAgICBwcm9qZWN0RGl2SWQgPSBlLnRhcmdldC5pZDtcblxuICAgICAgICAvLyBSZW5kZXIgcHJvamVjdCB0YXNrc1xuICAgICAgICByZW5kZXJQcm9qZWN0VGFza3MoKVxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcImRpdlwiKSAmJiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0LXByb2plY3QtdGl0bGUnKSB8fCBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Byb2plY3QtdGl0bGUtZGl2JykpICYmIGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGlnaC1saWdodCcpKSB7XG4gICAgICAgIGUudGFyZ2V0LnBhcmVudE5vZGUuc3R5bGUuY3NzVGV4dCA9IHByb2plY3RTdHlsZVxuICAgICAgICBwcm9qZWN0RGl2SWQgPSBlLnRhcmdldC5wYXJlbnROb2RlLmlkXG5cbiAgICAgICAgLy8gUmVuZGVyIHByb2plY3QgdGFza3NcbiAgICAgICAgcmVuZGVyUHJvamVjdFRhc2tzKClcblxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncHJvamVjdC10aXRsZScpKSAmJiBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZ2gtbGlnaHQnKSkge1xuICAgICAgICBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUuY3NzVGV4dCA9IHByb2plY3RTdHlsZTtcbiAgICAgICAgcHJvamVjdERpdklkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkO1xuXG4gICAgICAgIC8vIFJlbmRlciBwcm9qZWN0IHRhc2tzXG4gICAgICAgIHJlbmRlclByb2plY3RUYXNrcygpXG4gICAgICAgIFxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWRpdC1wcm9qZWN0JykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0LXByb2plY3QtYnRuJykgfHwgZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjYW5jZWwtcHJvamVjdC1idG4nKSkpIHtcbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmNzc1RleHQgPSBwcm9qZWN0U3R5bGU7XG4gICAgICAgIHByb2plY3REaXZJZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZDtcblxuICAgICAgICAvLyBSZW5kZXIgcHJvamVjdCB0YXNrc1xuICAgICAgICByZW5kZXJQcm9qZWN0VGFza3MoKVxuICAgIH1cbiAgICAvLyBEZWxldGUgUHJvamVjdFxuXG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJzcGFuXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09ICdkZWxldGUnKSB7XG5cbiAgICAgICAgY29uc3QgcHJvamVjdCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gcHJvamVjdC5pZDtcbiAgICAgICAgdG9Eb0xpc3QucmVtb3ZlUHJvamVjdChwcm9qZWN0SWQpXG4gICAgICAgIHByb2plY3QucmVtb3ZlKClcbiAgICB9XG5cbiAgICAvLyBFZGl0IFByb2plY3RcbiAgICBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gJ2VkaXQnKSB7XG5cbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmNzc1RleHQgPSBwcm9qZWN0U3R5bGVcbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJylcblxuICAgICAgICBjb25zdCB0aXRsZSA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlblswXS5jaGlsZHJlblswXVxuICAgICAgICBjb25zdCBpbnB1dCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlblswXS5jaGlsZHJlblsxXVxuICAgICAgICBpbnB1dC52YWx1ZSA9IHRpdGxlLnRleHRDb250ZW50XG5cbiAgICAgICAgY29uc3QgZWRpdEJ0biA9IGUudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW5bMF1cbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblsxXVxuICAgICAgICBjb25zdCBlZGl0UHJvamVjdEJ0biA9IGUudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW5bMl1cbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblszXVxuXG4gICAgICAgIHRpdGxlLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgICBlZGl0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgZGVsZXRlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgZWRpdFByb2plY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgICBjYW5jZWxCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgIH1cblxuICAgIC8vIEVkaXQgUHJvamVjdCBUaXRsZVxuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKFwic3BhblwiKSAmJiBlLnRhcmdldC50ZXh0Q29udGVudCA9PSAnY2hlY2snKSB7XG5cbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkXG4gICAgICAgIGNvbnN0IHByb2plY3QgPSB0b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3RJZClcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRpdGxlID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdXG4gICAgICAgIGNvbnN0IGlucHV0ID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdXG4gICAgICAgIHByb2plY3Quc2V0UHJvamVjdFRpdGxlKGlucHV0LnZhbHVlKVxuICAgICAgICB0aXRsZS50ZXh0Q29udGVudCA9IHByb2plY3QuZ2V0UHJvamVjdFRpdGxlKClcblxuICAgICAgICBjb25zdCBlZGl0QnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblswXTtcbiAgICAgICAgY29uc3QgZGVsZXRlQnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblsxXTtcbiAgICAgICAgY29uc3QgZWRpdFByb2plY3RCdG4gPSBlLnRhcmdldC5wYXJlbnROb2RlLmNoaWxkcmVuWzJdO1xuICAgICAgICBjb25zdCBjYW5jZWxCdG4gPSBlLnRhcmdldC5wYXJlbnROb2RlLmNoaWxkcmVuWzNdO1xuXG4gICAgICAgIHRpdGxlLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgaW5wdXQuY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgICBlZGl0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgZGVsZXRlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgZWRpdFByb2plY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgICAgICBjYW5jZWxCdG4uY2xhc3NMaXN0LnRvZ2dsZShcImhpZGRlblwiKVxuICAgIH1cblxuICAgIC8vIENhbmNlbCBFZGl0XG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJzcGFuXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09ICdjYW5jZWwnKSB7XG5cbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLnN0eWxlLmNzc1RleHQgPSBwcm9qZWN0U3R5bGVcbiAgICAgICAgZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ3NlbGVjdGVkJylcbiAgICBcbiAgICAgICAgY29uc3QgdGl0bGUgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF1cbiAgICAgICAgY29uc3QgaW5wdXQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV1cbiAgICAgICAgY29uc3QgZWRpdEJ0biA9IGUudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW5bMF07XG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGUudGFyZ2V0LnBhcmVudE5vZGUuY2hpbGRyZW5bMV07XG4gICAgICAgIGNvbnN0IGVkaXRQcm9qZWN0QnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblsyXTtcbiAgICAgICAgY29uc3QgY2FuY2VsQnRuID0gZS50YXJnZXQucGFyZW50Tm9kZS5jaGlsZHJlblszXTtcblxuICAgICAgICB0aXRsZS5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgICAgIGlucHV0LmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgZWRpdEJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgICAgIGRlbGV0ZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKFwiaGlkZGVuXCIpXG4gICAgICAgIGVkaXRQcm9qZWN0QnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIilcbiAgICAgICAgY2FuY2VsQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJoaWRkZW5cIil9XG59KVxuXG4vLyBUYXNrIFVJXG5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2soKSB7XG4gICAgY29uc3QgcHJvamVjdCA9IHRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdERpdklkKVxuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0aXRsZScpLnZhbHVlXG4gICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rlc2NyaXB0aW9uJykudmFsdWVcbiAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWUtZGF0ZScpLnZhbHVlXG4gICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByaW9yaXR5JykudmFsdWVcbiAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhdHVzJykuY2hlY2tlZFxuICAgIGxldCB0YXNrU3RhdHVzXG4gICAgaWYgKHRhc2tDaGVja2JveCkge1xuICAgICAgICB0YXNrU3RhdHVzID0gJ0NvbXBsZXRlJ1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tTdGF0dXMgPSAnSW5jb21wbGV0ZSdcbiAgICB9XG4gICAgY29uc3QgdGFza0lkID0gc2VsZi5jcnlwdG8ucmFuZG9tVVVJRCgpO1xuICAgIGNvbnN0IG5ld1Rhc2sgPSBUYXNrKHRhc2tUaXRsZSwgdGFza0Rlc2NyaXB0aW9uLCB0YXNrRGF0ZSwgdGFza1ByaW9yaXR5LCB0YXNrU3RhdHVzLCB0YXNrSWQpXG4gICAgcHJvamVjdC5hZGRUYXNrKG5ld1Rhc2spXG5cbiAgICByZXR1cm4gbmV3VGFza1xufVxuXG5mdW5jdGlvbiB1cGRhdGVUYXNrKCkge1xuICAgIGNvbnN0IHRhc2tUb0VkaXQgPSB0b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3REaXZJZCkuZ2V0VGFzayh0YXNrSWQpXG4gICAgY29uc3QgdGFza1RpdGxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtdGl0bGUnKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWRlc2NyaXB0aW9uJykudmFsdWVcbiAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWR1ZS1kYXRlJykudmFsdWVcbiAgICBjb25zdCB0YXNrUHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1wcmlvcml0eScpLnZhbHVlXG4gICAgY29uc3QgdGFza0NoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtc3RhdHVzJykuY2hlY2tlZFxuXG4gICAgdGFza1RvRWRpdC5zZXRUaXRsZSh0YXNrVGl0bGUpXG4gICAgdGFza1RvRWRpdC5zZXREZXNjcmlwdGlvbih0YXNrRGVzY3JpcHRpb24pXG4gICAgdGFza1RvRWRpdC5zZXREYXRlKHRhc2tEYXRlKVxuICAgIHRhc2tUb0VkaXQuc2V0UHJpb3JpdHkodGFza1ByaW9yaXR5KVxuICAgIGlmICh0YXNrQ2hlY2tib3gpIHtcbiAgICAgICAgdGFza1RvRWRpdC5zZXRTdGF0dXMoJ0NvbXBsZXRlJylcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXNrVG9FZGl0LnNldFN0YXR1cygnSW5jb21wbGV0ZScpXG4gICAgfSBcbn1cblxuZnVuY3Rpb24gY3JlYXRlVGFza1VJKHRhc2spIHtcbiAgICBjb25zdCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFza3NcIilcbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGFza0Rpdi5jbGFzc0xpc3QuYWRkKFwidGFza1wiKVxuICAgIHRhc2tEaXYuaWQgPSB0YXNrLmdldElkKClcbiAgICB0YXNrRGl2LmRhdGFzZXQucHJvamVjdCA9IHByb2plY3REaXZJZFxuXG4gICAgY29uc3QgZmlyc3RUYXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZmlyc3RUYXNrRGl2LmNsYXNzTGlzdC5hZGQoXCJmaXJzdC10YXNrLWVsZW1lbnRzXCIpXG5cbiAgICBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdMb3cnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgZ3JlZW4nO1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRQcmlvcml0eSgpID09ICdNZWRpdW0nKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgb3JhbmdlJ1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgcmVkJ1xuICAgIH1cblxuICAgIGlmICh0YXNrLmdldFN0YXR1cygpID09ICdDb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjaXR5ID0gJzAuNSdcbiAgICB9IGVsc2UgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0luY29tcGxldGUnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUub3BhY3RpeSA9ICcxJ1xuICAgIH1cblxuICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGl0bGUuY2xhc3NMaXN0LmFkZChcInRpdGxlXCIpXG4gICAgdGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLmdldFRpdGxlKClcblxuICAgIGNvbnN0IGxhc3RUYXNrRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgbGFzdFRhc2tEaXYuY2xhc3NMaXN0LmFkZChcImxhc3QtdGFzay1lbGVtZW50c1wiKTtcblxuICAgIGNvbnN0IGRldGFpbHNCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKVxuICAgIGRldGFpbHNCdG4udGV4dENvbnRlbnQgPSAnRGV0YWlscydcbiAgICBkZXRhaWxzQnRuLmNsYXNzTGlzdC5hZGQoJ2RldGFpbHMnKVxuXG4gICAgY29uc3QgZGF0ZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRhdGVEaXYuY2xhc3NMaXN0LmFkZCgnZHVlLWRhdGUnKTtcbiAgICBkYXRlRGl2LnRleHRDb250ZW50ID0gdGFzay5nZXREYXRlKClcblxuICAgIGNvbnN0IGVkaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgZWRpdC5jbGFzc0xpc3QuYWRkKFwiZWRpdFwiLCBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpO1xuICAgIGVkaXQudGV4dENvbnRlbnQgPSAnZWRpdCc7XG5cbiAgICBjb25zdCBkZWxldGVCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgZGVsZXRlQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWxldGVcIiwgXCJtYXRlcmlhbC1pY29ucy1vdXRsaW5lZFwiKTtcbiAgICBkZWxldGVCdG4udGV4dENvbnRlbnQgPSAnZGVsZXRlJztcblxuICAgIGZpcnN0VGFza0Rpdi5hcHBlbmQodGl0bGUpXG4gICAgbGFzdFRhc2tEaXYuYXBwZW5kKGRldGFpbHNCdG4sIGRhdGVEaXYsIGVkaXQsIGRlbGV0ZUJ0bilcbiAgICB0YXNrRGl2LmFwcGVuZChmaXJzdFRhc2tEaXYsIGxhc3RUYXNrRGl2KVxuICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZCh0YXNrRGl2KVxufTtcblxuZnVuY3Rpb24gdXBkYXRlVGFza1VJKGlkKSB7XG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxuICAgIGNvbnN0IHRhc2sgPSB0b0RvTGlzdC5nZXRQcm9qZWN0KHByb2plY3REaXZJZCkuZ2V0VGFzayhpZClcblxuICAgIGNvbnN0IHRhc2tUaXRsZSA9IHRhc2tEaXYuY2hpbGROb2Rlc1swXVxuICAgIHRhc2tUaXRsZS50ZXh0Q29udGVudCA9IHRhc2suZ2V0VGl0bGUoKVxuXG4gICAgaWYgKHRhc2suZ2V0UHJpb3JpdHkoKSA9PSAnTG93Jykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIGdyZWVuJztcbiAgICB9IGVsc2UgaWYgKHRhc2suZ2V0UHJpb3JpdHkoKSA9PSAnTWVkaXVtJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLmJvcmRlckxlZnQgPSAnNXB4IHNvbGlkIG9yYW5nZSc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCByZWQnO1xuICAgIH1cblxuICAgIGlmICh0YXNrLmdldFN0YXR1cygpID09ICdDb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFN0YXR1cygpID09ICdJbmNvbXBsZXRlJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLm9wYWNpdHkgPSAnMSc7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRhc2tEdWVEYXRlID0gdGFza0Rpdi5jaGlsZE5vZGVzWzFdLmNoaWxkTm9kZXNbMV1cbiAgICB0YXNrRHVlRGF0ZS50ZXh0Q29udGVudCA9IHRhc2suZ2V0RGF0ZSgpXG59XG5cblxuLy8gRHluYW1pYyBUYXNrIEV2ZW50IExpc3RlbmVyc1xuXG5sZXQgdGFza0lkIC8vIHRoZSB2YXJpYWJsZSB0byBhY2Nlc3MgYSBzcGVjaWZpYyB0YXNrIGlkIGZvciBlZGl0aW5nXG5cbmNvbnN0IHRhc2tzRGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YXNrc1wiKVxudGFza3NEaXYuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4geyAgIFxuXG4gICAgLy8gRWRpdFxuICAgIGlmIChlLnRhcmdldC5tYXRjaGVzKFwic3BhblwiKSAmJiBlLnRhcmdldC50ZXh0Q29udGVudCA9PSBcImVkaXRcIikge1xuICAgICAgICBjb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWZvcm1cIik7XG4gICAgICAgIG9wZW5Gb3JtKGZvcm0pXG5cbiAgICAgICAgY29uc3QgaWQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuaWRcbiAgICAgICAgY29uc3QgcHJvamVjdCA9IHRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdERpdklkKVxuICAgICAgICBjb25zdCB0YXNrVG9FZGl0ID0gcHJvamVjdC5nZXRUYXNrKGlkKVxuICAgICAgICBcbiAgICAgICAgdGFza0lkID0gaWRcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXRpdGxlJylcbiAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtZGVzY3JpcHRpb24nKVxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWR1ZS1kYXRlJylcbiAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcHJpb3JpdHknKVxuICAgICAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1zdGF0dXMnKVxuXG4gICAgICAgIHRhc2tUaXRsZS52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0VGl0bGUoKTtcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnZhbHVlID0gdGFza1RvRWRpdC5nZXREZXNjcmlwdGlvbigpO1xuICAgICAgICB0YXNrRGF0ZS52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0RGF0ZSgpO1xuICAgICAgICB0YXNrUHJpb3JpdHkudmFsdWUgPSB0YXNrVG9FZGl0LmdldFByaW9yaXR5KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGFza1RvRWRpdC5nZXRTdGF0dXMoKSA9PSAnQ29tcGxldGUnKSB7XG4gICAgICAgICAgICB0YXNrQ2hlY2tib3guY2hlY2tlZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhc2tDaGVja2JveC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgfSAgICAgICAgXG5cbiAgICAvLyBEZWxldGUgIFxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJkZWxldGVcIikge1xuICAgICAgICBjb25zdCB0YXNrID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlXG4gICAgICAgIHRvRG9MaXN0LmdldFByb2plY3QocHJvamVjdERpdklkKS5yZW1vdmVUYXNrKHRhc2suaWQpXG4gICAgICAgIHRhc2sucmVtb3ZlKClcbiAgICBcblxuICAgIC8vIERldGFpbHMgQnV0dG9uXG4gICAgfSBlbHNlIGlmIChlLnRhcmdldC5tYXRjaGVzKFwiYnV0dG9uXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09ICdEZXRhaWxzJykge1xuICAgICAgICBjb25zdCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZFxuICAgICAgICBjb25zdCB0YXNrID0gdG9Eb0xpc3QuZ2V0UHJvamVjdChwcm9qZWN0RGl2SWQpLmdldFRhc2soaWQpXG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10aXRsZS1vdXRwdXRcIilcbiAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1kdWUtZGF0ZS1vdXRwdXRcIilcbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stcHJpb3JpdHktb3V0cHV0XCIpXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1zdGF0dXMtb3V0cHV0XCIpXG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGV0YWlscy1vdXRwdXRcIilcblxuXG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gdGFzay5nZXRUaXRsZSgpXG4gICAgICAgIGRhdGUudGV4dENvbnRlbnQgPSB0YXNrLmdldERhdGUoKVxuICAgICAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IHRhc2suZ2V0UHJpb3JpdHkoKVxuICAgICAgICBzdGF0dXMudGV4dENvbnRlbnQgPSB0YXNrLmdldFN0YXR1cygpXG4gICAgICAgIGRldGFpbHMudGV4dENvbnRlbnQgPSB0YXNrLmdldERlc2NyaXB0aW9uKClcblxuICAgICAgICBjb25zdCBkZXRhaWxzTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGV0YWlsc1wiKTtcbiAgICAgICAgb3BlbkZvcm0oZGV0YWlsc01vZGFsKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgY2xvc2VNb2RhbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtY2xvc2UtYnV0dG9uXVwiKVxuICAgICAgICBjbG9zZU1vZGFsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gYnV0dG9uLmNsb3Nlc3QoXCIjdGFzay1kZXRhaWxzXCIpXG4gICAgICAgICAgICAgICAgY2xvc2VGb3JtKGZvcm0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbn0pO1xuXG4vLyBUYXNrIEJ1dHRvbiBGdW5jdGlvbmFsaXR5XG5cbmNvbnN0IGFkZFRhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRhc2snKTtcbmNvbnN0IGVkaXRUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdGFzaycpO1xuXG5hZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBuZXdUYXNrID0gY3JlYXRlVGFzaygpXG4gICAgY3JlYXRlVGFza1VJKG5ld1Rhc2spXG4gICAgY29uc3QgZm9ybUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tY2FyZFwiKTtcbiAgICBmb3JtQ2FyZC5yZXNldCgpO1xuICAgIGNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R1ZS1kYXRlJylcbiAgICBjb25zdCB0b2RheURhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc2xpY2UoMCwgMTApO1xuICAgIHRhc2tEYXRlLnZhbHVlID0gdG9kYXlEYXRlO1xufSlcblxuZWRpdFRhc2tCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKVxuICAgIHVwZGF0ZVRhc2soKVxuICAgIHVwZGF0ZVRhc2tVSSh0YXNrSWQpXG59KVxuXG4vLyBJbml0aWFsaXplIEZvcm0gRGVmYXVsdHNcbmNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R1ZS1kYXRlJylcbmNvbnN0IHRvZGF5RGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG50YXNrRGF0ZS52YWx1ZSA9IHRvZGF5RGF0ZTtcblxuLy8gSW5pdGlhbGl6ZSBQcm9qZWN0XG5cbmNvbnN0IHByb2plY3QgPSBjcmVhdGVQcm9qZWN0KClcbnByb2plY3Quc2V0UHJvamVjdFRpdGxlKCdEZWZhdWx0IFByb2plY3QnKVxudG9Eb0xpc3QuYWRkUHJvamVjdChwcm9qZWN0KVxuY29uc3QgcHJvamVjdERpdiA9IGNyZWF0ZVByb2plY3RVSShwcm9qZWN0KVxucHJvamVjdERpdklkID0gcHJvamVjdC5nZXRQcm9qZWN0SWQoKVxucHJvamVjdERpdi5pZCA9IHByb2plY3REaXZJZFxucHJvamVjdERpdi5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIilcbnByb2plY3REaXYuc3R5bGUuY3NzVGV4dCA9IHByb2plY3RTdHlsZSIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxuX193ZWJwYWNrX3JlcXVpcmVfXygxMzgpO1xuX193ZWJwYWNrX3JlcXVpcmVfXyg4MDMpO1xudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4Mik7XG4iXSwibmFtZXMiOlsiVGFzayIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJzdGF0dXMiLCJpZCIsImdldFRpdGxlIiwic2V0VGl0bGUiLCJuZXdUaXRsZSIsImdldERlc2NyaXB0aW9uIiwic2V0RGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsImdldERhdGUiLCJzZXREYXRlIiwibmV3RGF0ZSIsImdldFByaW9yaXR5Iiwic2V0UHJpb3JpdHkiLCJuZXdQcmlvcml0eSIsImdldFN0YXR1cyIsInNldFN0YXR1cyIsIm5ld1N0YXR1cyIsImdldElkIiwic2V0SWQiLCJuZXdJZCIsIlByb2plY3QiLCJwcm9qZWN0VGl0bGUiLCJwcm9qZWN0SWQiLCJwcm9qZWN0IiwiZ2V0VGFza3MiLCJnZXRQcm9qZWN0VGl0bGUiLCJnZXRQcm9qZWN0SWQiLCJzZXRQcm9qZWN0VGl0bGUiLCJzZXRQcm9qZWN0SWQiLCJnZXRUYXNrIiwiZmluZCIsInRhc2siLCJhZGRUYXNrIiwicHVzaCIsInJlbW92ZVRhc2siLCJmaWx0ZXIiLCJUb0RvIiwidG9EbyIsImdldFByb2plY3QiLCJnZXRQcm9qZWN0cyIsImFkZFByb2plY3QiLCJyZW1vdmVQcm9qZWN0Iiwib3Blbk1vZGFsQnV0dG9ucyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvckFsbCIsImNsb3NlTW9kYWxCdXR0b25zIiwib3ZlcmxheSIsImdldEVsZW1lbnRCeUlkIiwib3BlbkZvcm0iLCJmb3JtIiwiY2xhc3NMaXN0IiwiYWRkIiwiY2xvc2VGb3JtIiwicmVtb3ZlIiwiZm9yRWFjaCIsImJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yIiwiZGF0YXNldCIsIm1vZGFsVGFyZ2V0IiwiY2xvc2VzdCIsInRvRG9MaXN0IiwiY3JlYXRlUHJvamVjdCIsInByb2plY3RUaXRsZUlucHV0IiwidmFsdWUiLCJzZWxmIiwiY3J5cHRvIiwicmFuZG9tVVVJRCIsImNyZWF0ZVByb2plY3RVSSIsInByb2plY3RzQ29udGFpbmVyIiwicHJvamVjdERpdiIsImNyZWF0ZUVsZW1lbnQiLCJhZGRQcm9qZWN0RGl2IiwicHJvamVjdFRpdGxlRGl2IiwidGV4dENvbnRlbnQiLCJ0eXBlIiwicHJvamVjdEVkaXREaXYiLCJlZGl0QnRuIiwiZGVsZXRlQnRuIiwiY2hlY2tCdG4iLCJjYW5jZWxCdG4iLCJhcHBlbmQiLCJpbnNlcnRCZWZvcmUiLCJhZGRQcm9qZWN0QnRuIiwic2V0UHJvamVjdEJ0biIsImNhbmNlbFByb2plY3RCdG4iLCJyZW5kZXJQcm9qZWN0VGFza3MiLCJwcm9qZWN0RGl2SWQiLCJjcmVhdGVUYXNrVUkiLCJ0b2dnbGUiLCJuZXdQcm9qZWN0IiwicHJvamVjdHMiLCJwcm9qZWN0U3R5bGUiLCJ0YXNrSWQiLCJ0YXNrc0NvbnRhaW5lciIsInRhc2tEaXYiLCJmaXJzdFRhc2tEaXYiLCJzdHlsZSIsImJvcmRlckxlZnQiLCJvcGFjaXR5Iiwib3BhY3RpeSIsImxhc3RUYXNrRGl2IiwiZGV0YWlsc0J0biIsImRhdGVEaXYiLCJlZGl0IiwiZSIsImNvbnRhaW5zIiwicmVtb3ZlQXR0cmlidXRlIiwidGFyZ2V0IiwibWF0Y2hlcyIsImNzc1RleHQiLCJwYXJlbnROb2RlIiwiY2hpbGRyZW4iLCJpbnB1dCIsImVkaXRQcm9qZWN0QnRuIiwidGFza1RvRWRpdCIsInRhc2tUaXRsZSIsInRhc2tEZXNjcmlwdGlvbiIsInRhc2tEYXRlIiwidGFza1ByaW9yaXR5IiwidGFza0NoZWNrYm94IiwiY2hlY2tlZCIsImRhdGUiLCJkZXRhaWxzIiwiZGV0YWlsc01vZGFsIiwiYWRkVGFza0J1dHRvbiIsImVkaXRUYXNrQnV0dG9uIiwicHJldmVudERlZmF1bHQiLCJuZXdUYXNrIiwidGFza1N0YXR1cyIsImNyZWF0ZVRhc2siLCJyZXNldCIsInRvZGF5RGF0ZSIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNsaWNlIiwidXBkYXRlVGFzayIsImNoaWxkTm9kZXMiLCJ1cGRhdGVUYXNrVUkiLCJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsImQiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiXSwic291cmNlUm9vdCI6IiJ9