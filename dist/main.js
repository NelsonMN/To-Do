(()=>{"use strict";var e={138:(e,t,n)=>{n.d(t,{IK:()=>o,iQ:()=>d,m8:()=>s});const d=(e,t,n,d,o,s)=>({getTitle:()=>e,setTitle:t=>e=t,getDescription:()=>t,setDescription:e=>t=e,getDate:()=>n,setDate:e=>n=e,getPriority:()=>d,setPriority:e=>d=e,getStatus:()=>o,setStatus:e=>o=e,getId:()=>s,setId:e=>s=e}),o=(e,t)=>{let n=[];return{getTasks:()=>n,getProjectTitle:()=>e,getProjectId:()=>t,setProjectTitle:t=>e=t,setProjectId:e=>t=e,getTask:e=>n.find((t=>t.getId()===e)),addTask:e=>{n.push(e)},removeTask:e=>{n=n.filter((t=>t.getId()!==e))}}},s=()=>{let e=[];return{getProject:t=>e.find((e=>e.getProjectId()===t)),getProjects:()=>e,addProject:t=>{e.push(t)},removeProject:t=>{e=e.filter((e=>e.getProjectId()!==t))}}}},982:(e,t,n)=>{n.d(t,{B:()=>c,z:()=>a});const d=document.querySelectorAll("[data-modal-target]"),o=document.querySelectorAll("[data-close-button]"),s=document.getElementById("overlay");function c(e){null!=e&&(e.classList.add("active"),s.classList.add("active"))}function a(e){null!=e&&(e.classList.remove("active"),s.classList.remove("active"))}d.forEach((e=>{e.addEventListener("click",(()=>{c(document.querySelector(e.dataset.modalTarget))}))})),o.forEach((e=>{e.addEventListener("click",(()=>{a(e.closest(".form"))}))}))},803:(e,t,n)=>{var d=n(138),o=n(982);const s=(0,d.m8)(),c=(0,d.IK)("Default Project");s.addProject(c);const a=document.getElementById("due-date"),l=(new Date).toISOString().slice(0,10);a.value=l;const r=document.querySelector(".add-project"),i=document.getElementById("add-project"),u=document.querySelector(".set-new-project-btn"),m=document.querySelector(".cancel-new-project-btn"),g=document.getElementById("project-title-input");let p;r.addEventListener("click",(()=>{i.classList.toggle("hidden"),r.classList.toggle("hidden")})),u.addEventListener("click",(()=>{const e=function(){const e=g.value,t=self.crypto.randomUUID();return(0,d.IK)(e,t)}();s.addProject(e),i.classList.toggle("hidden"),r.classList.toggle("hidden"),g.value=""})),m.addEventListener("click",(()=>{i.classList.toggle("hidden"),r.classList.toggle("hidden"),g.value=""})),document.querySelector(".tasks").addEventListener("click",(e=>{if(e.target.matches("span")&&"edit"==e.target.textContent){const t=document.querySelector("#edit-form");(0,o.B)(t);const n=e.target.parentNode.parentNode.id;console.log(n);const d=c.getTask(n);p=n;const s=document.getElementById("edit-title"),a=document.getElementById("edit-description"),l=document.getElementById("edit-due-date"),r=document.getElementById("edit-priority"),i=document.getElementById("edit-status");s.value=d.getTitle(),a.value=d.getDescription(),l.value=d.getDate(),r.value=d.getPriority(),"Complete"==d.getStatus()?i.checked=!0:i.checked=!1}else if(e.target.matches("span")&&"delete"==e.target.textContent){const t=e.target.parentNode.parentNode;c.removeTask(t.id),t.remove()}else if(e.target.matches("button")&&"Details"==e.target.textContent){const t=e.target.parentNode.parentNode.id,n=c.getTask(t);p=t;const d=document.getElementById("task-title-output"),s=document.getElementById("task-due-date-output"),a=document.getElementById("task-priority-output"),l=document.getElementById("task-status-output"),r=document.getElementById("task-details-output");d.textContent=n.getTitle(),s.textContent=n.getDate(),a.textContent=n.getPriority(),l.textContent=n.getStatus(),r.textContent=n.getDescription();const i=document.getElementById("task-details");(0,o.B)(i),document.querySelectorAll("[data-close-button]").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest("#task-details");(0,o.z)(t)}))}))}}));const y=document.querySelector(".add-task"),v=document.querySelector(".edit-task");y.addEventListener("click",(e=>{e.preventDefault();const t=function(){const e=document.getElementById("title").value,t=document.getElementById("description").value,n=document.getElementById("due-date").value,o=document.getElementById("priority").value;let s;s=document.getElementById("status").checked?"Complete":"Incomplete";const c=self.crypto.randomUUID();return(0,d.iQ)(e,t,n,o,s,c)}();!function(e){const t=document.querySelector(".tasks"),n=document.createElement("div");n.classList.add("task"),n.id=e.getId();const d=document.createElement("div");d.classList.add("first-task-elements"),"Low"==e.getPriority()?n.style.borderLeft="5px solid green":"Medium"==e.getPriority()?n.style.borderLeft="5px solid orange":n.style.borderLeft="5px solid red","Complete"==e.getStatus()?n.style.opacity="0.5":"Incomplete"==e.getStatus()&&(n.style.opactiy="1");const o=document.createElement("div");o.classList.add("title"),o.textContent=e.getTitle();const s=document.createElement("div");s.classList.add("last-task-elements");const c=document.createElement("button");c.textContent="Details",c.classList.add("details");const a=document.createElement("div");a.classList.add("due-date"),a.textContent=e.getDate();const l=document.createElement("span");l.classList.add("edit","material-icons-outlined"),l.textContent="edit";const r=document.createElement("span");r.classList.add("delete","material-icons-outlined"),r.textContent="delete",d.append(o),s.append(c,a,l,r),n.append(d,s),t.append(n)}(t),c.addTask(t),document.querySelector(".form-card").reset();const n=document.getElementById("due-date"),o=(new Date).toISOString().slice(0,10);n.value=o})),v.addEventListener("click",(e=>{e.preventDefault(),function(){const e=c.getTask(p),t=document.getElementById("edit-title").value,n=document.getElementById("edit-description").value,d=document.getElementById("edit-due-date").value,o=document.getElementById("edit-priority").value,s=document.getElementById("edit-status").checked;e.setTitle(t),e.setDescription(n),e.setDate(d),e.setPriority(o),s?e.setStatus("Complete"):e.setStatus("Incomplete")}(),function(e){const t=document.getElementById(e),n=c.getTask(e);t.childNodes[0].textContent=n.getTitle(),"Low"==n.getPriority()?t.style.borderLeft="5px solid green":"Medium"==n.getPriority()?t.style.borderLeft="5px solid orange":t.style.borderLeft="5px solid red","Complete"==n.getStatus()?t.style.opacity="0.5":"Incomplete"==n.getStatus()&&(t.style.opacity="1"),t.childNodes[1].childNodes[1].textContent=n.getDate()}(p)}))}},t={};function n(d){var o=t[d];if(void 0!==o)return o.exports;var s=t[d]={exports:{}};return e[d](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var d in t)n.o(t,d)&&!n.o(e,d)&&Object.defineProperty(e,d,{enumerable:!0,get:t[d]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(138),n(803),n(982)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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UUcsTUFBTUMsV0FBYSxnQkFHUCxZQUFwQjdFLEVBQUtqQixZQUNMMEYsRUFBUUcsTUFBTUUsUUFBVSxNQUNHLGNBQXBCOUUsRUFBS2pCLGNBQ1owRixFQUFRRyxNQUFNRSxRQUFVLEtBR1JMLEVBQVFnQixXQUFXLEdBQUdBLFdBQVcsR0FDekNwQyxZQUFjckQsRUFBS3ZCLFVBb0cvQmlILENBQWEvQyxRQ25SYmdELEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLElBT1YsT0FIQUUsRUFBb0JMLEdBQVVJLEVBQVFBLEVBQU9ELFFBQVNKLEdBRy9DSyxFQUFPRCxRQ3BCZkosRUFBb0JPLEVBQUksQ0FBQ0gsRUFBU0ksS0FDakMsSUFBSSxJQUFJQyxLQUFPRCxFQUNYUixFQUFvQlUsRUFBRUYsRUFBWUMsS0FBU1QsRUFBb0JVLEVBQUVOLEVBQVNLLElBQzVFRSxPQUFPQyxlQUFlUixFQUFTSyxFQUFLLENBQUVJLFlBQVksRUFBTUMsSUFBS04sRUFBV0MsTUNKM0VULEVBQW9CVSxFQUFJLENBQUNLLEVBQUtDLElBQVVMLE9BQU9NLFVBQVVDLGVBQWVDLEtBQUtKLEVBQUtDLEdDR2xGaEIsRUFBb0IsS0FDcEJBLEVBQW9CLEtBQ01BLEVBQW9CLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90by1kby8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90by1kby8uL3NyYy9tb2RhbC5qcyIsIndlYnBhY2s6Ly90by1kby8uL3NyYy91c2VyLWludGVyZmFjZS5qcyIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vdG8tZG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90by1kby93ZWJwYWNrL3N0YXJ0dXAiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgVGFzayA9ICh0aXRsZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBzdGF0dXMsIGlkKSA9PiB7XG5cbiAgICBjb25zdCBnZXRUaXRsZSA9ICgpID0+IHRpdGxlO1xuICAgIGNvbnN0IHNldFRpdGxlID0gbmV3VGl0bGUgPT4gdGl0bGUgPSBuZXdUaXRsZTtcbiAgICBjb25zdCBnZXREZXNjcmlwdGlvbiA9ICgpID0+IGRlc2NyaXB0aW9uO1xuICAgIGNvbnN0IHNldERlc2NyaXB0aW9uPSBuZXdEZXNjcmlwdGlvbiA9PiBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuICAgIGNvbnN0IGdldERhdGUgPSAoKSA9PiBkdWVEYXRlO1xuICAgIGNvbnN0IHNldERhdGUgPSBuZXdEYXRlID0+IGR1ZURhdGUgPSBuZXdEYXRlO1xuICAgIGNvbnN0IGdldFByaW9yaXR5ID0gKCkgPT4gcHJpb3JpdHk7XG4gICAgY29uc3Qgc2V0UHJpb3JpdHkgPSBuZXdQcmlvcml0eSA9PiBwcmlvcml0eSA9IG5ld1ByaW9yaXR5O1xuICAgIGNvbnN0IGdldFN0YXR1cyA9ICgpID0+IHN0YXR1cztcbiAgICBjb25zdCBzZXRTdGF0dXMgPSBuZXdTdGF0dXMgPT4gc3RhdHVzID0gbmV3U3RhdHVzO1xuICAgIGNvbnN0IGdldElkID0gKCkgPT4gaWQ7XG4gICAgY29uc3Qgc2V0SWQgPSBuZXdJZCA9PiBpZCA9IG5ld0lkO1xuXG4gICAgcmV0dXJuIHtnZXRUaXRsZSwgc2V0VGl0bGUsIGdldERlc2NyaXB0aW9uLCBzZXREZXNjcmlwdGlvbiwgZ2V0RGF0ZSwgc2V0RGF0ZSwgZ2V0UHJpb3JpdHksIHNldFByaW9yaXR5LCBnZXRTdGF0dXMsIHNldFN0YXR1cywgZ2V0SWQsIHNldElkfVxufTtcblxuXG5jb25zdCBQcm9qZWN0ID0gKHByb2plY3RUaXRsZSwgcHJvamVjdElkKSA9PiB7XG5cbiAgICBsZXQgcHJvamVjdCA9IFtdO1xuXG4gICAgY29uc3QgZ2V0UHJvamVjdFRpdGxlID0gKCkgPT4gcHJvamVjdFRpdGxlO1xuICAgIGNvbnN0IHNldFByb2plY3RUaXRsZSA9IG5ld1RpdGxlID0+IHByb2plY3RUaXRsZSA9IG5ld1RpdGxlO1xuICAgIGNvbnN0IGdldFByb2plY3RJZCA9ICgpID0+IHByb2plY3RJZDtcbiAgICBjb25zdCBzZXRQcm9qZWN0SWQgPSBuZXdJZCA9PiBwcm9qZWN0SWQgPSBuZXdJZDtcblxuICAgIGNvbnN0IGdldFRhc2sgPSAoaWQpID0+IHtcbiAgICAgICAgcmV0dXJuIHByb2plY3QuZmluZCgodGFzaykgPT4gdGFzay5nZXRJZCgpID09PSBpZClcbiAgICB9O1xuXG4gICAgY29uc3QgZ2V0VGFza3MgPSAoKSA9PiBwcm9qZWN0O1xuXG4gICAgY29uc3QgYWRkVGFzayA9ICh0YXNrKSA9PiB7XG4gICAgICAgIHByb2plY3QucHVzaCh0YXNrKVxuICAgIH07XG5cbiAgICBjb25zdCByZW1vdmVUYXNrID0gKGlkKSA9PiB7XG4gICAgICAgIHByb2plY3QgPSBwcm9qZWN0LmZpbHRlcigodGFzaykgPT4gdGFzay5nZXRJZCgpICE9PSBpZClcbiAgICB9O1xuXG4gICAgcmV0dXJuIHtnZXRUYXNrcywgZ2V0UHJvamVjdFRpdGxlLCBnZXRQcm9qZWN0SWQsIHNldFByb2plY3RUaXRsZSwgc2V0UHJvamVjdElkLCBnZXRUYXNrLCBhZGRUYXNrLCByZW1vdmVUYXNrfVxufTtcblxuXG5jb25zdCBUb0RvID0gKCkgPT4ge1xuICAgIFxuICAgIGxldCB0b0RvID0gW107XG4gICAgXG4gICAgY29uc3QgZ2V0UHJvamVjdCA9IChwcm9qZWN0SWQpID0+IHtcbiAgICAgICAgcmV0dXJuIHRvRG8uZmluZCgocHJvamVjdCkgPT4gcHJvamVjdC5nZXRQcm9qZWN0SWQoKSA9PT0gcHJvamVjdElkKVxuICAgIH07XG5cbiAgICBjb25zdCBnZXRQcm9qZWN0cyA9ICgpID0+IHRvRG87XG5cbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gKHByb2plY3QpID0+IHtcbiAgICAgICAgdG9Eby5wdXNoKHByb2plY3QpXG4gICAgfTtcblxuICAgIGNvbnN0IHJlbW92ZVByb2plY3QgPSAocHJvamVjdElkKSA9PiB7XG4gICAgICAgIHRvRG8gPSB0b0RvLmZpbHRlcigocHJvamVjdCkgPT4gcHJvamVjdC5nZXRQcm9qZWN0SWQoKSAhPT0gcHJvamVjdElkKVxuICAgIH07XG4gICAgXG4gICAgcmV0dXJuIHtnZXRQcm9qZWN0LCBnZXRQcm9qZWN0cywgYWRkUHJvamVjdCwgcmVtb3ZlUHJvamVjdH1cbn07XG5cbmV4cG9ydCB7VGFzaywgUHJvamVjdCwgVG9Eb30iLCJjb25zdCBvcGVuTW9kYWxCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIltkYXRhLW1vZGFsLXRhcmdldF1cIik7XG5jb25zdCBjbG9zZU1vZGFsQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS1jbG9zZS1idXR0b25dXCIpO1xuY29uc3Qgb3ZlcmxheSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwib3ZlcmxheVwiKTtcblxub3Blbk1vZGFsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGJ1dHRvbi5kYXRhc2V0Lm1vZGFsVGFyZ2V0KTtcbiAgICAgICAgb3BlbkZvcm0oZm9ybSk7XG4gICAgfSlcbn0pIFxuXG5jbG9zZU1vZGFsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBidXR0b24uY2xvc2VzdChcIi5mb3JtXCIpXG4gICAgICAgIGNsb3NlRm9ybShmb3JtKTtcbiAgICB9KVxufSlcblxuZnVuY3Rpb24gb3BlbkZvcm0oZm9ybSkge1xuICAgIGlmIChmb3JtID09IG51bGwpIHJldHVyblxuICAgIGZvcm0uY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG59XG5cbmZ1bmN0aW9uIGNsb3NlRm9ybShmb3JtKSB7XG4gICAgaWYgKGZvcm0gPT0gbnVsbCkgcmV0dXJuXG4gICAgZm9ybS5jbGFzc0xpc3QucmVtb3ZlKFwiYWN0aXZlXCIpO1xuICAgIG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKTtcbn1cblxuZXhwb3J0IHtvcGVuRm9ybSwgY2xvc2VGb3JtfSIsImltcG9ydCB7VGFzaywgUHJvamVjdCwgVG9Eb30gZnJvbSAnLi9pbmRleCdcbmltcG9ydCB7b3BlbkZvcm0sIGNsb3NlRm9ybX0gZnJvbSAnLi9tb2RhbCdcblxuXG4vLyBJbml0aWFsaXplIFRvLURvIExpc3RcblxuY29uc3QgdG9Eb0xpc3QgPSBUb0RvKClcblxuXG4vLyBJbml0aWFsaXplIERlZmF1bHQgUHJvamVjdFxuY29uc3QgZGVmYXVsdFByb2plY3QgPSBQcm9qZWN0KCdEZWZhdWx0IFByb2plY3QnKVxudG9Eb0xpc3QuYWRkUHJvamVjdChkZWZhdWx0UHJvamVjdClcblxuXG4vLyBJbml0aWFsaXplIEZvcm0gRGVmYXVsdHNcbmNvbnN0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2R1ZS1kYXRlJylcbmNvbnN0IHRvZGF5RGF0ZSA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKS5zbGljZSgwLCAxMCk7XG50YXNrRGF0ZS52YWx1ZSA9IHRvZGF5RGF0ZTtcblxuXG4vLyBQcm9qZWN0IFVJXG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3QoKSB7XG4gICBjb25zdCBwcm9qZWN0VGl0bGUgPSBwcm9qZWN0VGl0bGVJbnB1dC52YWx1ZVxuICAgY29uc3QgcHJvamVjdElkID0gc2VsZi5jcnlwdG8ucmFuZG9tVVVJRCgpO1xuXG4gICBjb25zdCBuZXdQcm9qZWN0ID0gUHJvamVjdChwcm9qZWN0VGl0bGUsIHByb2plY3RJZClcbiAgIHJldHVybiBuZXdQcm9qZWN0XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVByb2plY3RVSShwcm9qZWN0KSB7XG5cbn1cblxuLy8gQWRkIFByb2plY3QgRXZlbnQgTGlzdGVuZXJzXG5jb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFkZC1wcm9qZWN0JylcbmNvbnN0IGFkZFByb2plY3REaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXByb2plY3QnKVxuY29uc3Qgc2V0UHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2V0LW5ldy1wcm9qZWN0LWJ0blwiKVxuY29uc3QgY2FuY2VsUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FuY2VsLW5ldy1wcm9qZWN0LWJ0blwiKVxuY29uc3QgcHJvamVjdFRpdGxlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3QtdGl0bGUtaW5wdXRcIilcblxuYWRkUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBcbiAgICBhZGRQcm9qZWN0RGl2LmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgYWRkUHJvamVjdEJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxufSlcblxuc2V0UHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAvLyBBZGQgUHJvamVjdFxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSBjcmVhdGVQcm9qZWN0KClcbiAgICB0b0RvTGlzdC5hZGRQcm9qZWN0KG5ld1Byb2plY3QpXG4gICAgYWRkUHJvamVjdERpdi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKVxuICAgIGFkZFByb2plY3RCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICBwcm9qZWN0VGl0bGVJbnB1dC52YWx1ZSA9ICcnXG59KVxuXG5jYW5jZWxQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIGFkZFByb2plY3REaXYuY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJylcbiAgICBhZGRQcm9qZWN0QnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpXG4gICAgcHJvamVjdFRpdGxlSW5wdXQudmFsdWUgPSAnJ1xufSlcblxuXG5cbi8vIFRhc2sgVUlcblxuZnVuY3Rpb24gY3JlYXRlVGFzaygpIHtcbiAgICBjb25zdCB0YXNrVGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGl0bGUnKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZXNjcmlwdGlvbicpLnZhbHVlXG4gICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZHVlLWRhdGUnKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tQcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmlvcml0eScpLnZhbHVlXG4gICAgY29uc3QgdGFza0NoZWNrYm94ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1cycpLmNoZWNrZWRcbiAgICBsZXQgdGFza1N0YXR1c1xuICAgIGlmICh0YXNrQ2hlY2tib3gpIHtcbiAgICAgICAgdGFza1N0YXR1cyA9ICdDb21wbGV0ZSdcbiAgICB9IGVsc2Uge1xuICAgICAgICB0YXNrU3RhdHVzID0gJ0luY29tcGxldGUnXG4gICAgfVxuICAgIGNvbnN0IHRhc2tJZCA9IHNlbGYuY3J5cHRvLnJhbmRvbVVVSUQoKTtcbiAgICBjb25zdCBuZXdUYXNrID0gVGFzayh0YXNrVGl0bGUsIHRhc2tEZXNjcmlwdGlvbiwgdGFza0RhdGUsIHRhc2tQcmlvcml0eSwgdGFza1N0YXR1cywgdGFza0lkKVxuICAgIHJldHVybiBuZXdUYXNrXG59XG5cbmZ1bmN0aW9uIHVwZGF0ZVRhc2soKSB7XG4gICAgY29uc3QgdGFza1RvRWRpdCA9IGRlZmF1bHRQcm9qZWN0LmdldFRhc2sodGFza0lkKVxuICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXRpdGxlJykudmFsdWVcbiAgICBjb25zdCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1kZXNjcmlwdGlvbicpLnZhbHVlXG4gICAgY29uc3QgdGFza0RhdGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1kdWUtZGF0ZScpLnZhbHVlXG4gICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcHJpb3JpdHknKS52YWx1ZVxuICAgIGNvbnN0IHRhc2tDaGVja2JveCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXN0YXR1cycpLmNoZWNrZWRcblxuICAgIHRhc2tUb0VkaXQuc2V0VGl0bGUodGFza1RpdGxlKVxuICAgIHRhc2tUb0VkaXQuc2V0RGVzY3JpcHRpb24odGFza0Rlc2NyaXB0aW9uKVxuICAgIHRhc2tUb0VkaXQuc2V0RGF0ZSh0YXNrRGF0ZSlcbiAgICB0YXNrVG9FZGl0LnNldFByaW9yaXR5KHRhc2tQcmlvcml0eSlcbiAgICBpZiAodGFza0NoZWNrYm94KSB7XG4gICAgICAgIHRhc2tUb0VkaXQuc2V0U3RhdHVzKCdDb21wbGV0ZScpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFza1RvRWRpdC5zZXRTdGF0dXMoJ0luY29tcGxldGUnKVxuICAgIH0gXG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRhc2tVSSh0YXNrKSB7XG4gICAgY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpXG4gICAgY29uc3QgdGFza0RpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHRhc2tEaXYuY2xhc3NMaXN0LmFkZChcInRhc2tcIilcbiAgICB0YXNrRGl2LmlkID0gdGFzay5nZXRJZCgpXG5cbiAgICBjb25zdCBmaXJzdFRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBmaXJzdFRhc2tEaXYuY2xhc3NMaXN0LmFkZChcImZpcnN0LXRhc2stZWxlbWVudHNcIilcblxuICAgIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ0xvdycpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBncmVlbic7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ01lZGl1bScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBvcmFuZ2UnXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCByZWQnXG4gICAgfVxuXG4gICAgaWYgKHRhc2suZ2V0U3RhdHVzKCkgPT0gJ0NvbXBsZXRlJykge1xuICAgICAgICB0YXNrRGl2LnN0eWxlLm9wYWNpdHkgPSAnMC41J1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSAnSW5jb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjdGl5ID0gJzEnXG4gICAgfVxuXG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aXRsZS5jbGFzc0xpc3QuYWRkKFwidGl0bGVcIilcbiAgICB0aXRsZS50ZXh0Q29udGVudCA9IHRhc2suZ2V0VGl0bGUoKVxuXG4gICAgY29uc3QgbGFzdFRhc2tEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBsYXN0VGFza0Rpdi5jbGFzc0xpc3QuYWRkKFwibGFzdC10YXNrLWVsZW1lbnRzXCIpO1xuXG4gICAgY29uc3QgZGV0YWlsc0J0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpXG4gICAgZGV0YWlsc0J0bi50ZXh0Q29udGVudCA9ICdEZXRhaWxzJ1xuICAgIGRldGFpbHNCdG4uY2xhc3NMaXN0LmFkZCgnZGV0YWlscycpXG5cbiAgICBjb25zdCBkYXRlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgZGF0ZURpdi5jbGFzc0xpc3QuYWRkKCdkdWUtZGF0ZScpO1xuICAgIGRhdGVEaXYudGV4dENvbnRlbnQgPSB0YXNrLmdldERhdGUoKVxuXG4gICAgY29uc3QgZWRpdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBlZGl0LmNsYXNzTGlzdC5hZGQoXCJlZGl0XCIsIFwibWF0ZXJpYWwtaWNvbnMtb3V0bGluZWRcIik7XG4gICAgZWRpdC50ZXh0Q29udGVudCA9ICdlZGl0JztcblxuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICBkZWxldGVCdG4uY2xhc3NMaXN0LmFkZChcImRlbGV0ZVwiLCBcIm1hdGVyaWFsLWljb25zLW91dGxpbmVkXCIpO1xuICAgIGRlbGV0ZUJ0bi50ZXh0Q29udGVudCA9ICdkZWxldGUnO1xuXG4gICAgZmlyc3RUYXNrRGl2LmFwcGVuZCh0aXRsZSlcbiAgICBsYXN0VGFza0Rpdi5hcHBlbmQoZGV0YWlsc0J0biwgZGF0ZURpdiwgZWRpdCwgZGVsZXRlQnRuKVxuICAgIHRhc2tEaXYuYXBwZW5kKGZpcnN0VGFza0RpdiwgbGFzdFRhc2tEaXYpXG4gICAgdGFza3NDb250YWluZXIuYXBwZW5kKHRhc2tEaXYpXG59O1xuXG5mdW5jdGlvbiB1cGRhdGVUYXNrVUkoaWQpIHtcbiAgICBjb25zdCB0YXNrRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpXG4gICAgY29uc3QgdGFzayA9IGRlZmF1bHRQcm9qZWN0LmdldFRhc2soaWQpXG5cbiAgICBjb25zdCB0YXNrVGl0bGUgPSB0YXNrRGl2LmNoaWxkTm9kZXNbMF1cbiAgICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLmdldFRpdGxlKClcblxuICAgIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ0xvdycpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBncmVlbic7XG4gICAgfSBlbHNlIGlmICh0YXNrLmdldFByaW9yaXR5KCkgPT0gJ01lZGl1bScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5ib3JkZXJMZWZ0ID0gJzVweCBzb2xpZCBvcmFuZ2UnO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUuYm9yZGVyTGVmdCA9ICc1cHggc29saWQgcmVkJztcbiAgICB9XG5cbiAgICBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSAnQ29tcGxldGUnKSB7XG4gICAgICAgIHRhc2tEaXYuc3R5bGUub3BhY2l0eSA9ICcwLjUnO1xuICAgIH0gZWxzZSBpZiAodGFzay5nZXRTdGF0dXMoKSA9PSAnSW5jb21wbGV0ZScpIHtcbiAgICAgICAgdGFza0Rpdi5zdHlsZS5vcGFjaXR5ID0gJzEnO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB0YXNrRHVlRGF0ZSA9IHRhc2tEaXYuY2hpbGROb2Rlc1sxXS5jaGlsZE5vZGVzWzFdXG4gICAgdGFza0R1ZURhdGUudGV4dENvbnRlbnQgPSB0YXNrLmdldERhdGUoKVxufVxuXG5cbi8vIFRhc2sgRXZlbnQgTGlzdGVuZXJzXG5cbmxldCB0YXNrSWQgLy8gdGhlIHZhcmlhYmxlIHRvIGFjY2VzcyBhIHNwZWNpZmljIHRhc2sgaWQgZm9yIGVkaXRpbmdcblxuY29uc3QgdGFza3NEaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2tzXCIpXG50YXNrc0Rpdi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7ICAgXG5cbiAgICAvLyBFZGl0XG4gICAgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJzcGFuXCIpICYmIGUudGFyZ2V0LnRleHRDb250ZW50ID09IFwiZWRpdFwiKSB7XG4gICAgICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtZm9ybVwiKTtcbiAgICAgICAgb3BlbkZvcm0oZm9ybSlcblxuICAgICAgICBjb25zdCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZFxuICAgICAgICBjb25zb2xlLmxvZyhpZClcbiAgICAgICAgY29uc3QgdGFza1RvRWRpdCA9IGRlZmF1bHRQcm9qZWN0LmdldFRhc2soaWQpXG5cbiAgICAgICAgdGFza0lkID0gaWRcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRhc2tUaXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LXRpdGxlJylcbiAgICAgICAgY29uc3QgdGFza0Rlc2NyaXB0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtZGVzY3JpcHRpb24nKVxuICAgICAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LWR1ZS1kYXRlJylcbiAgICAgICAgY29uc3QgdGFza1ByaW9yaXR5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXQtcHJpb3JpdHknKVxuICAgICAgICBjb25zdCB0YXNrQ2hlY2tib3ggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1zdGF0dXMnKVxuXG4gICAgICAgIHRhc2tUaXRsZS52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0VGl0bGUoKTtcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLnZhbHVlID0gdGFza1RvRWRpdC5nZXREZXNjcmlwdGlvbigpO1xuICAgICAgICB0YXNrRGF0ZS52YWx1ZSA9IHRhc2tUb0VkaXQuZ2V0RGF0ZSgpO1xuICAgICAgICB0YXNrUHJpb3JpdHkudmFsdWUgPSB0YXNrVG9FZGl0LmdldFByaW9yaXR5KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGFza1RvRWRpdC5nZXRTdGF0dXMoKSA9PSAnQ29tcGxldGUnKSB7XG4gICAgICAgICAgICB0YXNrQ2hlY2tib3guY2hlY2tlZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhc2tDaGVja2JveC5jaGVja2VkID0gZmFsc2VcbiAgICAgICAgfSAgICAgICAgXG5cbiAgICAvLyBEZWxldGUgIFxuICAgIH0gZWxzZSBpZiAoZS50YXJnZXQubWF0Y2hlcyhcInNwYW5cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gXCJkZWxldGVcIikge1xuICAgICAgICBjb25zdCB0YXNrID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlXG4gICAgICAgIGRlZmF1bHRQcm9qZWN0LnJlbW92ZVRhc2sodGFzay5pZClcbiAgICAgICAgdGFzay5yZW1vdmUoKVxuICAgIFxuXG4gICAgLy8gRGV0YWlscyBCdXR0b25cbiAgICB9IGVsc2UgaWYgKGUudGFyZ2V0Lm1hdGNoZXMoXCJidXR0b25cIikgJiYgZS50YXJnZXQudGV4dENvbnRlbnQgPT0gJ0RldGFpbHMnKSB7XG4gICAgICAgIGNvbnN0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkXG4gICAgICAgIGNvbnN0IHRhc2sgPSBkZWZhdWx0UHJvamVjdC5nZXRUYXNrKGlkKVxuXG4gICAgICAgIHRhc2tJZCA9IGlkXG4gICAgICAgIFxuICAgICAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10aXRsZS1vdXRwdXRcIilcbiAgICAgICAgY29uc3QgZGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1kdWUtZGF0ZS1vdXRwdXRcIilcbiAgICAgICAgY29uc3QgcHJpb3JpdHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stcHJpb3JpdHktb3V0cHV0XCIpXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay1zdGF0dXMtb3V0cHV0XCIpXG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGV0YWlscy1vdXRwdXRcIilcblxuXG4gICAgICAgIHRpdGxlLnRleHRDb250ZW50ID0gdGFzay5nZXRUaXRsZSgpXG4gICAgICAgIGRhdGUudGV4dENvbnRlbnQgPSB0YXNrLmdldERhdGUoKVxuICAgICAgICBwcmlvcml0eS50ZXh0Q29udGVudCA9IHRhc2suZ2V0UHJpb3JpdHkoKVxuICAgICAgICBzdGF0dXMudGV4dENvbnRlbnQgPSB0YXNrLmdldFN0YXR1cygpXG4gICAgICAgIGRldGFpbHMudGV4dENvbnRlbnQgPSB0YXNrLmdldERlc2NyaXB0aW9uKClcblxuICAgICAgICBjb25zdCBkZXRhaWxzTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stZGV0YWlsc1wiKTtcbiAgICAgICAgb3BlbkZvcm0oZGV0YWlsc01vZGFsKVxuICAgICAgICBcbiAgICAgICAgY29uc3QgY2xvc2VNb2RhbEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2RhdGEtY2xvc2UtYnV0dG9uXVwiKVxuICAgICAgICBjbG9zZU1vZGFsQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBmb3JtID0gYnV0dG9uLmNsb3Nlc3QoXCIjdGFzay1kZXRhaWxzXCIpXG4gICAgICAgICAgICAgICAgY2xvc2VGb3JtKGZvcm0pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfSlcbiAgICB9XG5cbn0pO1xuXG4vLyBUYXNrIEJ1dHRvbiBGdW5jdGlvbmFsaXR5XG5cbmNvbnN0IGFkZFRhc2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWRkLXRhc2snKTtcbmNvbnN0IGVkaXRUYXNrQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVkaXQtdGFzaycpO1xuXG5hZGRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBuZXdUYXNrID0gY3JlYXRlVGFzaygpXG4gICAgY3JlYXRlVGFza1VJKG5ld1Rhc2spXG4gICAgZGVmYXVsdFByb2plY3QuYWRkVGFzayhuZXdUYXNrKVxuICAgIGNvbnN0IGZvcm1DYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLWNhcmRcIik7XG4gICAgZm9ybUNhcmQucmVzZXQoKTtcbiAgICBjb25zdCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkdWUtZGF0ZScpXG4gICAgY29uc3QgdG9kYXlEYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNsaWNlKDAsIDEwKTtcbiAgICB0YXNrRGF0ZS52YWx1ZSA9IHRvZGF5RGF0ZTtcbn0pXG5cbmVkaXRUYXNrQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICB1cGRhdGVUYXNrKClcbiAgICB1cGRhdGVUYXNrVUkodGFza0lkKVxufSkiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oMTM4KTtcbl9fd2VicGFja19yZXF1aXJlX18oODAzKTtcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5ODIpO1xuIl0sIm5hbWVzIjpbIlRhc2siLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsInByaW9yaXR5Iiwic3RhdHVzIiwiaWQiLCJnZXRUaXRsZSIsInNldFRpdGxlIiwibmV3VGl0bGUiLCJnZXREZXNjcmlwdGlvbiIsInNldERlc2NyaXB0aW9uIiwibmV3RGVzY3JpcHRpb24iLCJnZXREYXRlIiwic2V0RGF0ZSIsIm5ld0RhdGUiLCJnZXRQcmlvcml0eSIsInNldFByaW9yaXR5IiwibmV3UHJpb3JpdHkiLCJnZXRTdGF0dXMiLCJzZXRTdGF0dXMiLCJuZXdTdGF0dXMiLCJnZXRJZCIsInNldElkIiwibmV3SWQiLCJQcm9qZWN0IiwicHJvamVjdFRpdGxlIiwicHJvamVjdElkIiwicHJvamVjdCIsImdldFRhc2tzIiwiZ2V0UHJvamVjdFRpdGxlIiwiZ2V0UHJvamVjdElkIiwic2V0UHJvamVjdFRpdGxlIiwic2V0UHJvamVjdElkIiwiZ2V0VGFzayIsImZpbmQiLCJ0YXNrIiwiYWRkVGFzayIsInB1c2giLCJyZW1vdmVUYXNrIiwiZmlsdGVyIiwiVG9EbyIsInRvRG8iLCJnZXRQcm9qZWN0IiwiZ2V0UHJvamVjdHMiLCJhZGRQcm9qZWN0IiwicmVtb3ZlUHJvamVjdCIsIm9wZW5Nb2RhbEJ1dHRvbnMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbG9zZU1vZGFsQnV0dG9ucyIsIm92ZXJsYXkiLCJnZXRFbGVtZW50QnlJZCIsIm9wZW5Gb3JtIiwiZm9ybSIsImNsYXNzTGlzdCIsImFkZCIsImNsb3NlRm9ybSIsInJlbW92ZSIsImZvckVhY2giLCJidXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwicXVlcnlTZWxlY3RvciIsImRhdGFzZXQiLCJtb2RhbFRhcmdldCIsImNsb3Nlc3QiLCJ0b0RvTGlzdCIsImRlZmF1bHRQcm9qZWN0IiwidGFza0RhdGUiLCJ0b2RheURhdGUiLCJEYXRlIiwidG9JU09TdHJpbmciLCJzbGljZSIsInZhbHVlIiwiYWRkUHJvamVjdEJ0biIsImFkZFByb2plY3REaXYiLCJzZXRQcm9qZWN0QnRuIiwiY2FuY2VsUHJvamVjdEJ0biIsInByb2plY3RUaXRsZUlucHV0IiwidGFza0lkIiwidG9nZ2xlIiwibmV3UHJvamVjdCIsInNlbGYiLCJjcnlwdG8iLCJyYW5kb21VVUlEIiwiY3JlYXRlUHJvamVjdCIsImUiLCJ0YXJnZXQiLCJtYXRjaGVzIiwidGV4dENvbnRlbnQiLCJwYXJlbnROb2RlIiwiY29uc29sZSIsImxvZyIsInRhc2tUb0VkaXQiLCJ0YXNrVGl0bGUiLCJ0YXNrRGVzY3JpcHRpb24iLCJ0YXNrUHJpb3JpdHkiLCJ0YXNrQ2hlY2tib3giLCJjaGVja2VkIiwiZGF0ZSIsImRldGFpbHMiLCJkZXRhaWxzTW9kYWwiLCJhZGRUYXNrQnV0dG9uIiwiZWRpdFRhc2tCdXR0b24iLCJwcmV2ZW50RGVmYXVsdCIsIm5ld1Rhc2siLCJ0YXNrU3RhdHVzIiwiY3JlYXRlVGFzayIsInRhc2tzQ29udGFpbmVyIiwidGFza0RpdiIsImNyZWF0ZUVsZW1lbnQiLCJmaXJzdFRhc2tEaXYiLCJzdHlsZSIsImJvcmRlckxlZnQiLCJvcGFjaXR5Iiwib3BhY3RpeSIsImxhc3RUYXNrRGl2IiwiZGV0YWlsc0J0biIsImRhdGVEaXYiLCJlZGl0IiwiZGVsZXRlQnRuIiwiYXBwZW5kIiwiY3JlYXRlVGFza1VJIiwicmVzZXQiLCJ1cGRhdGVUYXNrIiwiY2hpbGROb2RlcyIsInVwZGF0ZVRhc2tVSSIsIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwiZCIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCJdLCJzb3VyY2VSb290IjoiIn0=